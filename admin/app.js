Ext.Loader.setConfig({ enabled: true });
Ext.application({
    name: 'VulnerabilityToolAdmin',
    
    controllers: [
        'Photo', 'User'
    ],
    
    appFolder: 'app',

    launch: function() {
        Ext.create('Ext.container.Viewport', {

            items: [
                Ext.create('Ext.tab.Panel', {

                    renderTo: document.body,
                    items: [
                        {
                            //width: 700,
                            // height: 700,
                            xtype: 'photoList'
                        },
                        {
                            //width: 700,
                            // height: 700,
                            xtype: 'userList'
                        }
                    ],

                    listeners: {
                        afterrender: function(panel) {
                            var bar = panel.tabBar;
                            bar.insert(2, [{
                                xtype: 'component',
                                flex: 1
                            }, {
                                xtype: 'button',
                                id:'logout_id',
                                text: 'Logout',
                                handler: function() {

                                    Ext.Ajax.request({
                                        method: 'POST',
                                        url: 'data/logout.php',
                                        success: function (result) {
                                            var logout = result.responseText;

                                            //console.log(result.responseText);
                                            if (logout == 'logout') {
                                                window.location = "../index.html";
                                            }
                                        }
                                    });

                                }
                            }]);
                        }
                    }
                })
            ]
        });
    }
});


