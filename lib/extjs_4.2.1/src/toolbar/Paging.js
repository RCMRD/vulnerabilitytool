Ext.define("Ext.toolbar.Paging",{extend:"Ext.toolbar.Toolbar",alias:"widget.pagingtoolbar",alternateClassName:"Ext.PagingToolbar",requires:["Ext.toolbar.TextItem","Ext.form.field.Number"],mixins:{bindable:"Ext.util.Bindable"},displayInfo:!1,prependButtons:!1,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,getPagingItems:function(){var n=this;return[{itemId:"first",tooltip:n.firstText,overflowText:n.firstText,iconCls:Ext.baseCSSPrefix+"tbar-page-first",disabled:!0,handler:n.moveFirst,scope:n},{itemId:"prev",tooltip:n.prevText,overflowText:n.prevText,iconCls:Ext.baseCSSPrefix+"tbar-page-prev",disabled:!0,handler:n.movePrevious,scope:n},"-",n.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:Ext.baseCSSPrefix+"tbar-page-number",allowDecimals:!1,minValue:1,hideTrigger:!0,enableKeyEvents:!0,keyNavEnabled:!1,selectOnFocus:!0,submitValue:!1,isFormField:!1,width:n.inputItemWidth,margins:"-1 2 3 2",listeners:{scope:n,keydown:n.onPagingKeyDown,blur:n.onPagingBlur}},{xtype:"tbtext",itemId:"afterTextItem",text:Ext.String.format(n.afterPageText,1)},"-",{itemId:"next",tooltip:n.nextText,overflowText:n.nextText,iconCls:Ext.baseCSSPrefix+"tbar-page-next",disabled:!0,handler:n.moveNext,scope:n},{itemId:"last",tooltip:n.lastText,overflowText:n.lastText,iconCls:Ext.baseCSSPrefix+"tbar-page-last",disabled:!0,handler:n.moveLast,scope:n},"-",{itemId:"refresh",tooltip:n.refreshText,overflowText:n.refreshText,iconCls:Ext.baseCSSPrefix+"tbar-loading",handler:n.doRefresh,scope:n}]},initComponent:function(){var n=this,t=n.getPagingItems(),i=n.items||n.buttons||[];n.items=n.prependButtons?i.concat(t):t.concat(i);delete n.buttons;n.displayInfo&&(n.items.push("->"),n.items.push({xtype:"tbtext",itemId:"displayItem"}));n.callParent();n.addEvents("change","beforechange");n.on("beforerender",n.onLoad,n,{single:!0});n.bindStore(n.store||"ext-empty-store",!0)},updateInfo:function(){var n=this,i=n.child("#displayItem"),f=n.store,t=n.getPageData(),r,u;i&&(r=f.getCount(),u=r===0?n.emptyMsg:Ext.String.format(n.displayMsg,t.fromRecord,t.toRecord,t.total),i.setText(u))},onLoad:function(){var n=this,f,t,r,e,o,i,u;o=n.store.getCount();i=o===0;i?(t=0,r=0,e=Ext.String.format(n.afterPageText,0)):(f=n.getPageData(),t=f.currentPage,r=f.pageCount,e=Ext.String.format(n.afterPageText,isNaN(r)?1:r));Ext.suspendLayouts();u=n.child("#afterTextItem");u&&u.setText(e);u=n.getInputItem();u&&u.setDisabled(i).setValue(t);n.setChildDisabled("#first",t===1||i);n.setChildDisabled("#prev",t===1||i);n.setChildDisabled("#next",t===r||i);n.setChildDisabled("#last",t===r||i);n.setChildDisabled("#refresh",!1);n.updateInfo();Ext.resumeLayouts(!0);n.rendered&&n.fireEvent("change",n,f)},setChildDisabled:function(n,t){var i=this.child(n);i&&i.setDisabled(t)},getPageData:function(){var n=this.store,t=n.getTotalCount();return{total:t,currentPage:n.currentPage,pageCount:Math.ceil(t/n.pageSize),fromRecord:(n.currentPage-1)*n.pageSize+1,toRecord:Math.min(n.currentPage*n.pageSize,t)}},onLoadError:function(){this.rendered&&this.setChildDisabled("#refresh",!1)},getInputItem:function(){return this.child("#inputItem")},readPageFromInput:function(n){var t=this.getInputItem(),i=!1,r;return t&&(r=t.getValue(),i=parseInt(r,10),!r||isNaN(i))?(t.setValue(n.currentPage),!1):i},onPagingFocus:function(){var n=this.getInputItem();n&&n.select()},onPagingBlur:function(){var n=this.getInputItem(),t;n&&(t=this.getPageData().currentPage,n.setValue(t))},onPagingKeyDown:function(n,t){var u=this,r=t.getKey(),f=u.getPageData(),e=t.shiftKey?10:1,i;r==t.RETURN?(t.stopEvent(),i=u.readPageFromInput(f),i!==!1&&(i=Math.min(Math.max(1,i),f.pageCount),u.fireEvent("beforechange",u,i)!==!1&&u.store.loadPage(i))):r==t.HOME||r==t.END?(t.stopEvent(),i=r==t.HOME?1:f.pageCount,n.setValue(i)):(r==t.UP||r==t.PAGE_UP||r==t.DOWN||r==t.PAGE_DOWN)&&(t.stopEvent(),i=u.readPageFromInput(f),i&&((r==t.DOWN||r==t.PAGE_DOWN)&&(e*=-1),i+=e,i>=1&&i<=f.pageCount&&n.setValue(i)))},beforeLoad:function(){this.rendered&&this.setChildDisabled("#refresh",!0)},moveFirst:function(){this.fireEvent("beforechange",this,1)!==!1&&this.store.loadPage(1)},movePrevious:function(){var n=this,t=n.store.currentPage-1;t>0&&n.fireEvent("beforechange",n,t)!==!1&&n.store.previousPage()},moveNext:function(){var n=this,i=n.getPageData().pageCount,t=n.store.currentPage+1;t<=i&&n.fireEvent("beforechange",n,t)!==!1&&n.store.nextPage()},moveLast:function(){var n=this,t=n.getPageData().pageCount;n.fireEvent("beforechange",n,t)!==!1&&n.store.loadPage(t)},doRefresh:function(){var n=this,t=n.store.currentPage;n.fireEvent("beforechange",n,t)!==!1&&n.store.loadPage(t)},getStoreListeners:function(){return{beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},unbind:function(){this.bindStore(null)},bind:function(n){this.bindStore(n)},onDestroy:function(){this.unbind();this.callParent()}})