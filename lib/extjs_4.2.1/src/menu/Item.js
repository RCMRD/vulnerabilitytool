Ext.define("Ext.menu.Item",{extend:"Ext.Component",alias:"widget.menuitem",alternateClassName:"Ext.menu.TextItem",mixins:{queryable:"Ext.Queryable"},activeCls:Ext.baseCSSPrefix+"menu-item-active",ariaRole:"menuitem",canActivate:!0,clickHideDelay:0,destroyMenu:!0,disabledCls:Ext.baseCSSPrefix+"menu-item-disabled",hideOnClick:!0,isMenuItem:!0,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",arrowCls:Ext.baseCSSPrefix+"menu-item-arrow",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:['<tpl if="plain">',"{text}","<tpl else>",'<a id="{id}-itemEl"',' class="'+Ext.baseCSSPrefix+'menu-item-link{childElCls}"',' href="{href}"','<tpl if="hrefTarget"> target="{hrefTarget}"<\/tpl>',' hidefocus="true"',' unselectable="on"','<tpl if="tabIndex">',' tabIndex="{tabIndex}"',"<\/tpl>",">",'<div role="img" id="{id}-iconEl" class="'+Ext.baseCSSPrefix+"menu-item-icon {iconCls}",'{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});<\/tpl>','<tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};<\/tpl>">','<tpl if="glyph">&#{glyph};<\/tpl>',"<\/div>",'<span id="{id}-textEl" class="'+Ext.baseCSSPrefix+'menu-item-text" unselectable="on">{text}<\/span>','<img id="{id}-arrowEl" src="{blank}" class="{arrowCls}','{childElCls}"/>',"<\/a>","<\/tpl>"],maskOnDisable:!1,activate:function(){var n=this;!n.activated&&n.canActivate&&n.rendered&&!n.isDisabled()&&n.isVisible()&&(n.el.addCls(n.activeCls),n.focus(),n.activated=!0,n.fireEvent("activate",n))},getFocusEl:function(){return this.itemEl},deactivate:function(){var n=this;n.activated&&(n.el.removeCls(n.activeCls),n.blur(),n.hideMenu(),n.activated=!1,n.fireEvent("deactivate",n))},deferHideMenu:function(){this.menu.isVisible()&&this.menu.hide()},cancelDeferHide:function(){clearTimeout(this.hideMenuTimer)},deferHideParentMenus:function(){var n;Ext.menu.Manager.hideAll();Ext.Element.getActiveElement()||(n=this.up(":not([hidden])"),n&&n.focus())},expandMenu:function(n){var t=this;t.menu&&(t.cancelDeferHide(),n===0?t.doExpandMenu():(clearTimeout(t.expandMenuTimer),t.expandMenuTimer=Ext.defer(t.doExpandMenu,Ext.isNumber(n)?n:t.menuExpandDelay,t)))},doExpandMenu:function(){var n=this,t=n.menu;!n.activated||t.rendered&&t.isVisible()||(n.parentMenu.activeChild=t,t.parentItem=n,t.parentMenu=n.parentMenu,t.showBy(n,n.menuAlign))},getRefItems:function(n){var t=this.menu,i;return t&&(i=t.getRefItems(n),i.unshift(t)),i||[]},hideMenu:function(n){var t=this;t.menu&&(clearTimeout(t.expandMenuTimer),t.hideMenuTimer=Ext.defer(t.deferHideMenu,Ext.isNumber(n)?n:t.menuHideDelay,t))},initComponent:function(){var n=this,i=Ext.baseCSSPrefix,t=[i+"menu-item"],r;n.addEvents("activate","click","deactivate","textchange","iconchange");n.plain&&t.push(i+"menu-item-plain");n.cls&&t.push(n.cls);n.cls=t.join(" ");n.menu&&(r=n.menu,delete n.menu,n.setMenu(r));n.callParent(arguments)},onClick:function(n){var t=this,i=t.clickHideDelay;(t.href||n.stopEvent(),t.disabled)||(t.hideOnClick&&(i?t.deferHideParentMenusTimer=Ext.defer(t.deferHideParentMenus,i,t):t.deferHideParentMenus()),Ext.callback(t.handler,t.scope||t,[t,n]),t.fireEvent("click",t,n),t.hideOnClick||t.focus())},onRemoved:function(){var n=this;n.activated&&n.parentMenu.activeItem===n&&n.parentMenu.deactivateActiveItem();n.callParent(arguments);n.parentMenu=n.ownerButton=null},beforeDestroy:function(){var n=this;n.rendered&&n.clearTip();n.callParent()},onDestroy:function(){var n=this;clearTimeout(n.expandMenuTimer);n.cancelDeferHide();clearTimeout(n.deferHideParentMenusTimer);n.setMenu(null);n.callParent(arguments)},beforeRender:function(){var n=this,e=Ext.BLANK_IMAGE_URL,t=n.glyph,f=Ext._glyphFontFamily,i,r,u;n.callParent();n.iconAlign==="right"?(r=n.checkChangeDisabled?n.disabledCls:"",u=Ext.baseCSSPrefix+"menu-item-icon-right "+n.iconCls):(r=(n.iconCls||"")+(n.checkChangeDisabled?" "+n.disabledCls:""),u=n.menu?n.arrowCls:"");typeof t=="string"&&(i=t.split("@"),t=i[0],f=i[1]);Ext.applyIf(n.renderData,{href:n.href||"#",hrefTarget:n.hrefTarget,icon:n.icon,iconCls:r,glyph:t,glyphCls:t?Ext.baseCSSPrefix+"menu-item-glyph":undefined,glyphFontFamily:f,hasIcon:!!(n.icon||n.iconCls||t),iconAlign:n.iconAlign,plain:n.plain,text:n.text,arrowCls:u,blank:e,tabIndex:n.tabIndex})},onRender:function(){var n=this;n.callParent(arguments);n.tooltip&&n.setTooltip(n.tooltip,!0)},setMenu:function(n,t){var i=this,r=i.menu,u=i.arrowEl;r&&(delete r.parentItem,delete r.parentMenu,delete r.ownerItem,(t===!0||t!==!1&&i.destroyMenu)&&Ext.destroy(r));n?(i.menu=Ext.menu.Manager.get(n),i.menu.ownerItem=i):i.menu=null;i.rendered&&!i.destroying&&u&&u[i.menu?"addCls":"removeCls"](i.arrowCls)},setHandler:function(n,t){this.handler=n||null;this.scope=t},setIcon:function(n){var t=this.iconEl,i=this.icon;t&&(t.src=n||Ext.BLANK_IMAGE_URL);this.icon=n;this.fireEvent("iconchange",this,i,n)},setIconCls:function(n){var t=this,i=t.iconEl,r=t.iconCls;i&&(t.iconCls&&i.removeCls(t.iconCls),n&&i.addCls(n));t.iconCls=n;t.fireEvent("iconchange",t,r,n)},setText:function(n){var t=this,i=t.textEl||t.el,r=t.text;t.text=n;t.rendered&&(i.update(n||""),t.ownerCt.updateLayout());t.fireEvent("textchange",t,r,n)},getTipAttr:function(){return this.tooltipType=="qtip"?"data-qtip":"title"},clearTip:function(){Ext.quickTipsActive&&Ext.isObject(this.tooltip)&&Ext.tip.QuickTipManager.unregister(this.itemEl)},setTooltip:function(n,t){var i=this;return i.rendered?(t||i.clearTip(),Ext.quickTipsActive&&Ext.isObject(n)?(Ext.tip.QuickTipManager.register(Ext.apply({target:i.itemEl.id},n)),i.tooltip=n):i.itemEl.dom.setAttribute(i.getTipAttr(),n)):i.tooltip=n,i}})