Ext.define("Ext.app.Controller",{requires:["Ext.app.EventBus","Ext.ModelManager","Ext.data.StoreManager","Ext.ComponentManager","Ext.app.domain.Global","Ext.app.domain.Component","Ext.app.domain.Store"],uses:["Ext.app.domain.Controller"],mixins:{observable:"Ext.util.Observable"},statics:{strings:{model:{getter:"getModel",upper:"Model"},view:{getter:"getView",upper:"View"},controller:{getter:"getController",upper:"Controller"},store:{getter:"getStore",upper:"Store"}},controllerRegex:/^(.*)\.controller\./,createGetter:function(n,t){return function(){return this[n](t)}},getGetterName:function(n,t){for(var r="get",u=n.split("."),f=u.length,i=0;i<f;i++)r+=Ext.String.capitalize(u[i]);return r+t},processDependencies:function(n,t,i,r,u){if(u&&u.length){var f=this,h=f.strings[r],o,c,l,s,e,a,v,y;for(Ext.isArray(u)||(u=[u]),e=0,a=u.length;e<a;e++)s=u[e],o=f.getFullName(s,r,i),c=o.absoluteName,l=o.shortName,t.push(c),v=f.getGetterName(l,h.upper),n[v]=y=f.createGetter(h.getter,s),r!=="controller"&&(y["Ext.app.getter"]=!0)}},getFullName:function(n,t,i){var u=n,f,r;return(f=n.indexOf("@"))>0?(u=n.substring(0,f),r=n.substring(f+1)+"."+u):n.indexOf(".")>0&&(Ext.ClassManager.isCreated(n)||Ext.Loader.isAClassNameWithAKnownPrefix(n))?r=n:(i||Ext.log.warn("Cannot find namespace for "+t+" "+n+", assuming it is fully qualified class name"),i?(r=i+"."+t+"."+n,u=n):r=n),{absoluteName:r,shortName:u}}},application:null,onClassExtended:function(n,t,i){var r=i.onBeforeCreated;i.onBeforeCreated=function(n,t){var f=Ext.app.Controller,h=f.controllerRegex,e=[],o,i,u,s;u=n.prototype;o=Ext.getClassName(n);i=t.$namespace||Ext.app.getNamespace(o)||(s=h.exec(o))&&s[1];i?u.$namespace=i:Ext.log.warn("Missing namespace for "+o+", please define it in namespaces property of your Application class.");f.processDependencies(u,e,i,"model",t.models);f.processDependencies(u,e,i,"view",t.views);f.processDependencies(u,e,i,"store",t.stores);f.processDependencies(u,e,i,"controller",t.controllers);Ext.require(e,Ext.Function.pass(r,arguments,this))}},constructor:function(n){var t=this;t.mixins.observable.constructor.call(t,n);t.refs&&t.ref(t.refs);t.eventbus=Ext.app.EventBus;t.initAutoGetters()},initAutoGetters:function(){var t=this.self.prototype,i,n;for(i in t)n=t[i],n&&n["Ext.app.getter"]&&n.call(this)},doInit:function(n){var t=this;t._initialized||(t.init(n),t._initialized=!0)},finishInit:function(n){var r=this,t=r.controllers,u,i,f;if(r._initialized&&t&&t.length)for(i=0,f=t.length;i<f;i++)u=r.getController(t[i]),u.finishInit(n)},init:Ext.emptyFn,onLaunch:Ext.emptyFn,ref:function(n){var t=this,r=0,e=n.length,u,i,f;for(n=Ext.Array.from(n),t.references=t.references||[];r<e;r++)u=n[r],i=u.ref,f="get"+Ext.String.capitalize(i),t[f]||(t[f]=Ext.Function.pass(t.getRef,[i,u],t)),t.references.push(i.toLowerCase())},addRef:function(n){this.ref(n)},getRef:function(n,t,i){var f=this,u=f.refCache||(f.refCache={}),r=u[n];if(t=t||{},i=i||{},Ext.apply(t,i),t.forceCreate)return Ext.ComponentManager.create(t,"component");if(!r&&(t.selector&&(u[n]=r=Ext.ComponentQuery.query(t.selector)[0]),!r&&t.autoCreate&&(u[n]=r=Ext.ComponentManager.create(t,"component")),r))r.on("beforedestroy",function(){u[n]=null});return r},hasRef:function(n){var t=this.references;return t&&Ext.Array.indexOf(t,n.toLowerCase())!==-1},control:function(n,t,i){var u=this,f=i,r;Ext.isString(n)?(r={},r[n]=t):(r=n,f=t);u.eventbus.control(r,f||u)},listen:function(n,t){this.eventbus.listen(n,t||this)},getController:function(n){var t=this,i=t.application;return n===t.id?t:i&&i.getController(n)},getStore:function(n){var i,t;return i=n.indexOf("@")==-1?n:n.split("@")[0],t=Ext.StoreManager.get(i),t||(n=Ext.app.Controller.getFullName(n,"store",this.$namespace),n&&(t=Ext.create(n.absoluteName,{storeId:i}))),t},getModel:function(n){var t=Ext.app.Controller.getFullName(n,"model",this.$namespace);return t&&Ext.ModelManager.getModel(t.absoluteName)},getView:function(n){var t=Ext.app.Controller.getFullName(n,"view",this.$namespace);return t&&Ext.ClassManager.get(t.absoluteName)},getApplication:function(){return this.application}})