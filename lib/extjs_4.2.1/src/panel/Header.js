Ext.define("Ext.panel.Header",{extend:"Ext.container.Container",uses:["Ext.panel.Tool","Ext.util.CSS","Ext.layout.component.Body","Ext.Img"],alias:"widget.header",isHeader:!0,defaultType:"tool",indicateDrag:!1,weight:-1,componentLayout:"body",childEls:["body"],renderTpl:['<div id="{id}-body" class="{headerCls}-body {baseCls}-body {bodyCls} {bodyTargetCls}','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}<\/tpl>"','<tpl if="bodyStyle"> style="{bodyStyle}"<\/tpl>>',"{%this.renderContainer(out,values)%}","<\/div>"],headingTpl:['<span id="{id}-textEl" class="{headerCls}-text {cls}-text {cls}-text-{ui}" unselectable="on">{title}<\/span>'],shrinkWrap:3,titlePosition:0,headerCls:Ext.baseCSSPrefix+"header",initComponent:function(){var n=this,u=n.hasOwnProperty("titlePosition"),t=n.items,i=u?n.titlePosition:t?t.length:0,f=[n.orientation,n.getDockName()],r=n.ownerCt;n.addEvents("click","dblclick");n.indicateDragCls=n.headerCls+"-draggable";n.title=n.title||"&#160;";n.tools=n.tools||[];t=n.items=t?Ext.Array.slice(t):[];n.orientation=n.orientation||"horizontal";n.dock=n.dock?n.dock:n.orientation=="horizontal"?"top":"left";(r?r.border||r.frame:n.border)||f.push(n.orientation+"-noborder");n.addClsWithUI(f);n.addCls([n.headerCls,n.headerCls+"-"+n.orientation]);n.indicateDrag&&n.addCls(n.indicateDragCls);(n.iconCls||n.icon||n.glyph)&&(n.initIconCmp(),u||t.length||++i,t.push(n.iconCmp));n.titleCmp=new Ext.Component({ariaRole:"heading",focusable:!1,noWrap:!0,flex:1,rtl:n.rtl,id:n.id+"_hd",style:n.titleAlign?"text-align:"+n.titleAlign:"",cls:n.headerCls+"-text-container "+n.baseCls+"-text-container "+n.baseCls+"-text-container-"+n.ui,renderTpl:n.getTpl("headingTpl"),renderData:{title:n.title,cls:n.baseCls,headerCls:n.headerCls,ui:n.ui},childEls:["textEl"],autoEl:{unselectable:"on"},listeners:{render:n.onTitleRender,scope:n}});n.layout=n.orientation=="vertical"?{type:"vbox",align:"center",alignRoundingMethod:"ceil"}:{type:"hbox",align:"middle",alignRoundingMethod:"floor"};Ext.Array.push(t,n.tools);n.tools.length=0;n.callParent();t.length<i&&(i=t.length);n.titlePosition=i;n.insert(i,n.titleCmp);n.on({dblclick:n.onDblClick,click:n.onClick,element:"el",scope:n})},initIconCmp:function(){var n=this,i=[n.headerCls+"-icon",n.baseCls+"-icon",n.iconCls],t;n.glyph&&i.push(n.baseCls+"-glyph");t={focusable:!1,src:Ext.BLANK_IMAGE_URL,cls:i,baseCls:n.baseCls+"-icon",id:n.id+"-iconEl",iconCls:n.iconCls,glyph:n.glyph};Ext.isEmpty(n.icon)||(delete t.iconCls,t.src=n.icon);n.iconCmp=new Ext.Img(t)},beforeRender:function(){this.protoEl.unselectable();this.callParent()},afterLayout:function(){var n=this,u,t,i,r;n.orientation==="vertical"&&(n.adjustTitlePosition(),t=n.frameTR,t&&(u=n.frameBR,i=n.frameTL,r=n.getWidth()-t.getPadding("r")-(i?i.getPadding("l"):n.el.getBorderWidth("l"))+"px",u.setStyle("background-position-x",r),t.setStyle("background-position-x",r)),Ext.isIE7&&Ext.isStrict&&n.frame&&n.el.repaint())},beforeLayout:function(){this.callParent();this.syncBeforeAfterTitleClasses()},adjustTitlePosition:function(){var t=this.titleCmp,n;!Ext.isIE9m&&t&&(n=t.el,n.setStyle("left",n.getWidth()+"px"))},onTitleRender:function(){this.orientation==="vertical"&&this.titleCmp.el.setVertical(90)},addUIClsToElement:function(n){var t=this,f=t.callParent(arguments),r=[t.baseCls+"-body-"+n,t.baseCls+"-body-"+t.ui+"-"+n],u,i;if(t.bodyCls){for(u=t.bodyCls.split(" "),i=0;i<r.length;i++)Ext.Array.contains(u,r[i])||u.push(r[i]);t.bodyCls=u.join(" ")}else t.bodyCls=r.join(" ");return f},removeUIClsFromElement:function(n){var t=this,f=t.callParent(arguments),u=[t.baseCls+"-body-"+n,t.baseCls+"-body-"+t.ui+"-"+n],r,i;if(t.bodyCls){for(r=t.bodyCls.split(" "),i=0;i<u.length;i++)Ext.Array.remove(r,u[i]);t.bodyCls=r.join(" ")}return f},addUIToElement:function(){var n=this,i,t;n.callParent(arguments);t=n.baseCls+"-body-"+n.ui;n.rendered?n.bodyCls?n.body.addCls(n.bodyCls):n.body.addCls(t):n.bodyCls?(i=n.bodyCls.split(" "),Ext.Array.contains(i,t)||i.push(t),n.bodyCls=i.join(" ")):n.bodyCls=t;n.titleCmp&&n.titleCmp.rendered&&n.titleCmp.addCls(n.baseCls+"-text-container-"+n.ui)},removeUIFromElement:function(){var n=this,i,t;n.callParent(arguments);t=n.baseCls+"-body-"+n.ui;n.rendered?n.bodyCls?n.body.removeCls(n.bodyCls):n.body.removeCls(t):n.bodyCls?(i=n.bodyCls.split(" "),Ext.Array.remove(i,t),n.bodyCls=i.join(" ")):n.bodyCls=t;n.titleCmp&&n.titleCmp.rendered&&n.titleCmp.removeCls(n.baseCls+"-text-container-"+n.ui)},onClick:function(n){this.fireClickEvent("click",n)},onDblClick:function(n){this.fireClickEvent("dblclick",n)},fireClickEvent:function(n,t){var i="."+Ext.panel.Tool.prototype.baseCls;t.getTarget(i)||this.fireEvent(n,this,t)},getFocusEl:function(){return this.el},getTargetEl:function(){return this.body||this.frameBody||this.el},applyTargetCls:function(n){this.bodyTargetCls=n},setTitle:function(n){var t=this,i=t.titleCmp;if(t.title=n,i.rendered)i.textEl.update(t.title||"&#160;"),i.updateLayout();else t.titleCmp.on({render:function(){t.setTitle(n)},single:!0})},getMinWidth:function(){var t=this,u=t.titleCmp.textEl.dom,i,r=t.tools,f,n;if(u.style.display="inline",i=u.offsetWidth,u.style.display="",r&&(f=r.length))for(n=0;n<f;n++)r[n].el&&(i+=r[n].el.dom.offsetWidth);return t.iconCmp&&(i+=t.iconCmp.el.dom.offsetWidth),i+10},setIconCls:function(n){var t=this,r=!n||!n.length,i=t.iconCmp;t.iconCls=n;t.iconCmp||r?i&&(r?(t.iconCmp.destroy(),delete t.iconCmp):(i.removeCls(i.iconCls),i.addCls(n),i.iconCls=n)):(t.initIconCmp(),t.insert(0,t.iconCmp))},setIcon:function(n){var t=this,i=!n||!n.length,r=t.iconCmp;t.icon=n;t.iconCmp||i?r&&(i?(t.iconCmp.destroy(),delete t.iconCmp):r.setSrc(t.icon)):(t.initIconCmp(),t.insert(0,t.iconCmp))},setGlyph:function(n){var t=this,i=t.iconCmp;t.iconCmp?i&&(n?t.iconCmp.setGlyph(n):(t.iconCmp.destroy(),delete t.iconCmp)):(t.initIconCmp(),t.insert(0,t.iconCmp))},getTools:function(){return this.tools.slice()},addTool:function(n){this.add(Ext.ComponentManager.create(n,"tool"))},syncBeforeAfterTitleClasses:function(){var i=this,e=i.items,o=e.items,s=i.titlePosition,c=o.length,h=e.generation,r=i.syncBeforeAfterGen,u,f,t,n;if(r!==h)for(i.syncBeforeAfterGen=h,t=0;t<c;++t)n=o[t],u=n.afterTitleCls||(n.afterTitleCls=n.baseCls+"-after-title"),f=n.beforeTitleCls||(n.beforeTitleCls=n.baseCls+"-before-title"),!i.title||t<s?(r&&n.removeCls(u),n.addCls(f)):t>s&&(r&&n.removeCls(f),n.addCls(u))},onAdd:function(n){var t=this.tools;this.callParent(arguments);n.isTool&&(t.push(n),t[n.type]=n)},initRenderData:function(){return Ext.applyIf(this.callParent(),{bodyCls:this.bodyCls,bodyTargetCls:this.bodyTargetCls,headerCls:this.headerCls})},getDockName:function(){return this.dock},getFramingInfoCls:function(){var n=this,i=n.callParent(),t=n.ownerCt;return(!n.expanding&&t&&t.collapsed||n.isCollapsedExpander)&&(i+="-"+t.collapsedCls),i+"-"+n.dock}})