Ext.define("Ext.util.ComponentDragger",{extend:"Ext.dd.DragTracker",autoStart:500,constructor:function(n,t){this.comp=n;this.initialConstrainTo=t.constrainTo;this.callParent([t])},onStart:function(){var n=this,t=n.comp;n.startPosition=t.getXY();t.ghost&&!t.liveDrag&&(n.proxy=t.ghost(),n.dragTarget=n.proxy.header.el);(n.constrain||n.constrainDelegate)&&(n.constrainTo=n.calculateConstrainRegion());t.beginDrag&&t.beginDrag()},calculateConstrainRegion:function(){var i=this,o=i.comp,n=i.initialConstrainTo,t=o.constraintInsets,s,r,u,e=i.proxy?i.proxy.el:o.el,f=!i.constrainDelegate&&e.shadow&&o.constrainShadow&&!e.shadowDisabled?e.shadow.getShadowSize():0;return n instanceof Ext.util.Region?n=n.copy():(s=Ext.fly(n),n=s.getViewRegion(),n.right=n.left+s.dom.clientWidth),t&&(t=Ext.isObject(t)?t:Ext.Element.parseBox(t),n.adjust(t.top,t.right,t.bottom,t.length)),f&&n.adjust(f[0],-f[1],-f[2],f[3]),i.constrainDelegate||(r=Ext.fly(i.dragTarget).getRegion(),u=e.getRegion(),n.adjust(r.top-u.top,r.right-u.right,r.bottom-u.bottom,r.left-u.left)),n},onDrag:function(){var n=this,i=n.proxy&&!n.comp.liveDrag?n.proxy:n.comp,t=n.getOffset(n.constrain||n.constrainDelegate?"dragTarget":null);i.setPagePosition(n.startPosition[0]+t[0],n.startPosition[1]+t[1])},onEnd:function(){var n=this.comp;n.isDestroyed||n.destroying||(this.proxy&&!n.liveDrag&&n.unghost(),n.endDrag&&n.endDrag())}})