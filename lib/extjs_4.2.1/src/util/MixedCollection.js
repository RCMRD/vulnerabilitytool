Ext.define("Ext.util.MixedCollection",{extend:"Ext.util.AbstractMixedCollection",mixins:{sortable:"Ext.util.Sortable"},constructor:function(){var n=this;n.callParent(arguments);n.addEvents("sort");n.mixins.sortable.initSortable.call(n)},doSort:function(n){this.sortBy(n)},_sort:function(n,t,i){var u=this,r,e,c=String(t).toUpperCase()=="DESC"?-1:1,f=[],h=u.keys,s=u.items,o;for(i=i||function(n,t){return n-t},r=0,e=s.length;r<e;r++)f[f.length]={key:h[r],value:s[r],index:r};for(Ext.Array.sort(f,function(t,r){return i(t[n],r[n])*c||(t.index<r.index?-1:1)}),r=0,e=f.length;r<e;r++)o=f[r],s[r]=o.value,h[r]=o.key,u.indexMap[o.key]=r;u.generation++;u.indexGeneration=u.generation;u.fireEvent("sort",u)},sortBy:function(n){for(var i=this,r=i.items,f,e=i.keys,u,o=r.length,t=0;t<o;t++)r[t].$extCollectionIndex=t;for(Ext.Array.sort(r,function(t,i){return n(t,i)||(t.$extCollectionIndex<i.$extCollectionIndex?-1:1)}),t=0;t<o;t++)f=r[t],u=i.getKey(f),e[t]=u,i.indexMap[u]=t,delete r.$extCollectionIndex;i.generation++;i.indexGeneration=i.generation;i.fireEvent("sort",i,r,e)},findInsertionIndex:function(n,t){var e=this,o=e.items,i=0,u=o.length-1,r,f;for(t||(t=e.generateComparator());i<=u;)r=i+u>>1,f=t(n,o[r]),f>=0?i=r+1:f<0&&(u=r-1);return i},reorder:function(n){var i=this,u=i.items,t=0,e=u.length,r=[],o=[],f;i.suspendEvents();for(f in n)r[n[f]]=u[f];for(t=0;t<e;t++)n[t]==undefined&&o.push(u[t]);for(t=0;t<e;t++)r[t]==undefined&&(r[t]=o.shift());i.clear();i.addAll(r);i.resumeEvents();i.fireEvent("sort",i)},sortByKey:function(n,t){this._sort("key",n,t||function(n,t){var i=String(n).toUpperCase(),r=String(t).toUpperCase();return i>r?1:i<r?-1:0})}})