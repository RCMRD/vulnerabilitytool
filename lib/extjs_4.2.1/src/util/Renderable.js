Ext.define("Ext.util.Renderable",{requires:["Ext.dom.Element"],frameCls:Ext.baseCSSPrefix+"frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR"],frameTpl:["{%this.renderDockedItems(out,values,0);%}",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl<\/tpl>{frameElCls}" role="presentation"><\/tpl>','<tpl if="right"><div id="{fgid}TR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr<\/tpl>{frameElCls}" role="presentation"><\/tpl>','<div id="{fgid}TC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc<\/tpl>{frameElCls}" role="presentation"><\/div>','<tpl if="right"><\/div><\/tpl>','<tpl if="left"><\/div><\/tpl>',"<\/tpl>",'<tpl if="left"><div id="{fgid}ML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml<\/tpl>{frameElCls}" role="presentation"><\/tpl>','<tpl if="right"><div id="{fgid}MR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr<\/tpl>{frameElCls}" role="presentation"><\/tpl>','<div id="{fgid}MC" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc<\/tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","<\/div>",'<tpl if="right"><\/div><\/tpl>','<tpl if="left"><\/div><\/tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl<\/tpl>{frameElCls}" role="presentation"><\/tpl>','<tpl if="right"><div id="{fgid}BR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br<\/tpl>{frameElCls}" role="presentation"><\/tpl>','<div id="{fgid}BC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc<\/tpl>{frameElCls}" role="presentation"><\/div>','<tpl if="right"><\/div><\/tpl>','<tpl if="left"><\/div><\/tpl>',"<\/tpl>","{%this.renderDockedItems(out,values,1);%}"],frameTableTpl:["{%this.renderDockedItems(out,values,0);%}",'<table class="',Ext.plainTableCls,'" cellpadding="0"><tbody>','<tpl if="top">',"<tr>",'<tpl if="left"><td id="{fgid}TL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl<\/tpl>{frameElCls}" role="presentation"><\/td><\/tpl>','<td id="{fgid}TC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc<\/tpl>{frameElCls}" role="presentation"><\/td>','<tpl if="right"><td id="{fgid}TR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr<\/tpl>{frameElCls}" role="presentation"><\/td><\/tpl>',"<\/tr>","<\/tpl>","<tr>",'<tpl if="left"><td id="{fgid}ML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml<\/tpl>{frameElCls}" role="presentation"><\/td><\/tpl>','<td id="{fgid}MC" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc<\/tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","<\/td>",'<tpl if="right"><td id="{fgid}MR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr<\/tpl>{frameElCls}" role="presentation"><\/td><\/tpl>',"<\/tr>",'<tpl if="bottom">',"<tr>",'<tpl if="left"><td id="{fgid}BL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl<\/tpl>{frameElCls}" role="presentation"><\/td><\/tpl>','<td id="{fgid}BC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc<\/tpl>{frameElCls}" role="presentation"><\/td>','<tpl if="right"><td id="{fgid}BR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br<\/tpl>{frameElCls}" role="presentation"><\/td><\/tpl>',"<\/tr>","<\/tpl>","<\/tbody><\/table>","{%this.renderDockedItems(out,values,1);%}"],afterRender:function(){var n=this,i={},o=n.protoEl,u=n.el,t,f,r,e;n.finishRenderChildren();n.contentEl&&(f=Ext.baseCSSPrefix,r=f+"hide-",e=Ext.get(n.contentEl),e.removeCls([f+"hidden",r+"display",r+"offsets",r+"nosize"]),n.getContentTarget().appendChild(e.dom));o.writeTo(i);t=i.removed;t&&u.removeCls(t);t=i.cls;t.length&&u.addCls(t);t=i.style;i.style&&u.setStyle(t);n.protoEl=null;n.ownerCt||n.updateLayout()},afterFirstLayout:function(n,t){var i=this,o=i.x,s=i.y,f,e,r,u;i.ownerLayout||(f=Ext.isDefined(o),e=Ext.isDefined(s));!i.floating||f&&e||(i.floatParent?(r=i.floatParent.getTargetEl().getViewRegion(),u=i.el.getAlignToXY(i.floatParent.getTargetEl(),"c-c"),r.x=u[0]-r.x,r.y=u[1]-r.y):(u=i.el.getAlignToXY(i.container,"c-c"),r=i.container.translateXY(u[0],u[1])),o=f?o:r.x,s=e?s:r.y,f=e=!0);(f||e)&&i.setPosition(o,s);i.onBoxReady(n,t)},applyRenderSelectors:function(){var i=this,n=i.renderSelectors,r=i.el,u=r.dom,t;if(i.applyChildEls(r),n)for(t in n)n.hasOwnProperty(t)&&n[t]&&(i[t]=Ext.get(Ext.DomQuery.selectNode(n[t],u)))},beforeRender:function(){var n=this,u=n.getTargetEl(),t=n.getOverflowEl(),i=n.getComponentLayout(),r=n.getOverflowStyle();n.frame=n.frame||n.alwaysFramed;i.initialized||i.initLayout();t&&(t.setStyle(r),n.overflowStyleSet=!0);n.setUI(n.ui);n.disabled&&n.disable(!0)},doApplyRenderTpl:function(n,t){var i=t.$comp,r;i.rendered||(r=i.initRenderTpl(),r.applyOut(t.renderData,n))},doAutoRender:function(){var n=this;n.rendered||(n.floating?n.render(document.body):n.render(Ext.isBoolean(n.autoRender)?Ext.getBody():n.autoRender))},doRenderContent:function(n,t){var i=t.$comp;i.html&&(Ext.DomHelper.generateMarkup(i.html,n),delete i.html);i.tpl&&(i.tpl.isTemplate||(i.tpl=new Ext.XTemplate(i.tpl)),i.data&&(i.tpl.applyOut(i.data,n),delete i.data))},doRenderFramingDockedItems:function(n,t,i){var r=t.$comp;!r.rendered&&r.doRenderDockedItems&&(t.renderData.$skipDockedItems=!0,r.doRenderDockedItems.call(this,n,t,i))},finishRender:function(n){var t=this,r,u,i;!t.el||t.$pid?(i=t.container?t.container.getById(t.id,!0):Ext.getDom(t.id),t.el?(delete t.$pid,t.el.dom||t.wrapPrimaryEl(t.el),i.parentNode.insertBefore(t.el.dom,i),Ext.removeNode(i)):t.wrapPrimaryEl(i)):t.rendering||(r=t.initRenderTpl(),r&&(u=t.initRenderData(),r.insertFirst(t.getTargetEl(),u)));t.container||(t.container=Ext.get(t.el.dom.parentNode));t.ctCls&&t.container.addCls(t.ctCls);t.onRender(t.container,n);t.overflowStyleSet||t.getOverflowEl().setStyle(t.getOverflowStyle());t.el.setVisibilityMode(Ext.Element[t.hideMode.toUpperCase()]);t.overCls&&t.el.hover(t.addOverCls,t.removeOverCls,t);t.hasListeners.render&&t.fireEvent("render",t);t.afterRender();t.hasListeners.afterrender&&t.fireEvent("afterrender",t);t.initEvents();t.hidden&&t.el.hide()},finishRenderChildren:function(){var n=this.getComponentLayout();n.finishRender()},getElConfig:function(){var n=this,r=n.autoEl,u=n.getFrameInfo(),t={tag:"div",tpl:u?n.initFramingTpl(u.table):n.initRenderTpl()},f=n.protoEl,i,e,c,o,s,h;if(n.initStyles(f),f.writeTo(t),f.flush(),Ext.isString(r)?t.tag=r:Ext.apply(t,r),t.id=n.id,t.tpl)if(u){for(e=n.frameElNames,c=e.length,t.tplData=h=n.getFrameRenderData(),h.renderData=n.initRenderData(),s=h.fgid,i=0;i<c;i++)o=e[i],n.addChildEls({name:"frame"+o,id:s+o});n.addChildEls({name:"frameBody",id:s+"MC"})}else t.tplData=n.initRenderData();return t},initFramingTpl:function(n){var t=this.getFrameTpl(n);return t&&!t.applyRenderTpl&&this.setupFramingTpl(t),t},setupFramingTpl:function(n){n.applyRenderTpl=this.doApplyRenderTpl;n.renderDockedItems=this.doRenderFramingDockedItems},getInsertPosition:function(n){return n!==undefined&&(n=Ext.isNumber(n)?this.container.dom.childNodes[n]:Ext.getDom(n)),n},getRenderTree:function(){var n=this;return!n.hasListeners.beforerender||n.fireEvent("beforerender",n)!==!1?(n.beforeRender(),n.rendering=!0,n.el)?{tag:"div",id:n.$pid=Ext.id()}:n.getElConfig():null},initContainer:function(n){var t=this;return!n&&t.el&&(n=t.el.dom.parentNode,t.allowDomMove=!1),t.container=n.dom?n:Ext.get(n),t.container},initRenderData:function(){var n=this;return Ext.apply({$comp:n,id:n.id,ui:n.ui,uiCls:n.uiCls,baseCls:n.baseCls,componentCls:n.componentCls,frame:n.frame,childElCls:""},n.renderData)},initRenderTpl:function(){var n=this.getTpl("renderTpl");return n&&!n.renderContent&&this.setupRenderTpl(n),n},onRender:function(){var n=this,u=n.x,f=n.y,t=null,i,r,e=n.el;n.applyRenderSelectors();n.rendering=null;n.rendered=!0;u!=null&&(t={x:u});f!=null&&((t=t||{}).y=f);!n.getFrameInfo()&&Ext.isBorderBox&&(i=n.width,r=n.height,typeof i=="number"&&(t=t||{},t.width=i),typeof r=="number"&&(t=t||{},t.height=r));n.lastBox=e.lastBox=t},render:function(n,t){var i=this,r=i.el&&(i.el=Ext.get(i.el)),e,u,f;Ext.suspendLayouts();n=i.initContainer(n);f=i.getInsertPosition(t);r?i.hasListeners.beforerender&&i.fireEvent("beforerender",i)===!1?e=!0:(i.beforeRender(),i.initStyles(r),i.allowDomMove!==!1&&(f?n.dom.insertBefore(r.dom,f):n.dom.appendChild(r.dom))):(u=i.getRenderTree(),i.ownerLayout&&i.ownerLayout.transformItemRenderTree&&(u=i.ownerLayout.transformItemRenderTree(u)),u&&(r=f?Ext.DomHelper.insertBefore(f,u):Ext.DomHelper.append(n,u),i.wrapPrimaryEl(r)));r&&!e&&i.finishRender(t);Ext.resumeLayouts(!i.hidden&&!n.isDetachedBody)},ensureAttachedToBody:function(n){for(var t=this,i;t.ownerCt;)t=t.ownerCt;t.container.isDetachedBody&&(t.container=i=Ext.getBody(),i.appendChild(t.el.dom),n&&t.updateLayout(),(typeof t.x=="number"||typeof t.y=="number")&&t.setPosition(t.x,t.y))},setupRenderTpl:function(n){n.renderBody=n.renderContent=this.doRenderContent},wrapPrimaryEl:function(n){this.el=Ext.get(n,!0)},initFrame:function(){if(!Ext.supports.CSS3BorderRadius&&this.frame){var n=this,u=n.getFrameInfo(),f,e,o=n.frameElNames,s=o.length,t,i,r;if(u)for(f=n.getFrameTpl(u.table),i=n.getFrameRenderData(),e=i.fgid,f.insertFirst(n.el,i),n.frameBody=n.el.down("."+n.frameCls+"-mc"),n.removeChildEls(function(t){return t.id&&n.frameIdRegex.test(t.id)}),t=0;t<s;t++)r=o[t],n["frame"+r]=n.el.getById(e+r)}},getFrameRenderData:function(){var n=this,t=n.frameSize,i=(n.frameGenId||0)+1;return n.frameGenId=i,{$comp:n,fgid:n.id+"-frame"+i,ui:n.ui,uiCls:n.uiCls,frameCls:n.frameCls,baseCls:n.baseCls,top:!!t.top,left:!!t.left,right:!!t.right,bottom:!!t.bottom,frameElCls:""}},updateFrame:function(){if(!Ext.supports.CSS3BorderRadius&&this.frame){var n=this,e=n.frameSize&&n.frameSize.table,i=n.frameTL,r=n.frameBL,u=n.frameML,t=n.frameMC,f;n.initFrame();t?n.frame&&(f=n.frameMC.dom.className,t.insertAfter(n.frameMC),n.frameMC.remove(),n.frameBody=n.frameMC=t,t.dom.className=f,e?n.el.query("> table")[1].remove():(i&&i.remove(),r&&r.remove(),u&&u.remove())):n.frame&&n.applyRenderSelectors()}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame)return!1;var r=this,nt=r.frameInfoCache,w=r.getFramingInfoCls()+"-frameInfo",i=nt[w],t=Math.max,tt,n,u,f,e,o,s,h,c,l,b,k,d,g,a,v,y,p;return i==null&&(tt=Ext.fly(r.getStyleProxy(w),"frame-style-el"),n=tt.getStyle("font-family"),n?(n=n.split("-"),a=parseInt(n[1],10),v=parseInt(n[2],10),y=parseInt(n[3],10),p=parseInt(n[4],10),s=parseInt(n[5],10),h=parseInt(n[6],10),c=parseInt(n[7],10),l=parseInt(n[8],10),b=parseInt(n[9],10),k=parseInt(n[10],10),d=parseInt(n[11],10),g=parseInt(n[12],10),u=t(s,t(a,v)),f=t(h,t(v,y)),e=t(c,t(p,y)),o=t(l,t(a,p)),i={table:n[0].charAt(0)==="t",vertical:n[0].charAt(1)==="v",top:u,right:f,bottom:e,left:o,width:o+f,height:u+e,maxWidth:t(u,f,e,o),border:{top:s,right:h,bottom:c,left:l,width:l+h,height:s+c},padding:{top:b,right:k,bottom:d,left:g,width:g+k,height:b+d},radius:{tl:a,tr:v,br:y,bl:p}}):i=!1,r.frame!==!0||i||Ext.log.error("You have set frame: true explicity on this component ("+r.getXType()+") and it does not have any framing defined in the CSS template. In this case IE cannot figure out what sizes to use and thus framing on this component will be disabled."),nt[w]=i),r.frame=!!i,r.frameSize=i,i},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(n){var t=this.styleProxyEl||(Ext.AbstractComponent.prototype.styleProxyEl=Ext.getBody().createChild({style:{position:"absolute",top:"-10000px"}},null,!0));return t.className=n,t},getFrameTpl:function(n){return this.getTpl(n?"frameTableTpl":"frameTpl")},frameInfoCache:{}})