Ext.define("Ext.tip.ToolTip",{extend:"Ext.tip.Tip",alias:"widget.tooltip",alternateClassName:"Ext.ToolTip",autoHide:!0,showDelay:500,hideDelay:200,dismissDelay:5e3,trackMouse:!1,anchorToTarget:!0,anchorOffset:0,targetCounter:0,quickShowInterval:250,initComponent:function(){var n=this;n.callParent(arguments);n.lastActive=new Date;n.setTarget(n.target);n.origAnchor=n.anchor},onRender:function(){var n=this;n.callParent(arguments);n.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+n.getAnchorPosition();n.anchorEl=n.el.createChild({cls:Ext.baseCSSPrefix+"tip-anchor "+n.anchorCls})},setTarget:function(n){var t=this,r=Ext.get(n),i;t.target&&(i=Ext.get(t.target),t.mun(i,"mouseover",t.onTargetOver,t),t.mun(i,"mouseout",t.onTargetOut,t),t.mun(i,"mousemove",t.onMouseMove,t));t.target=r;r&&t.mon(r,{freezeEvent:!0,mouseover:t.onTargetOver,mouseout:t.onTargetOut,mousemove:t.onMouseMove,scope:t});t.anchor&&(t.anchorTarget=t.target)},onMouseMove:function(n){var t=this,r=t.delegate?n.getTarget(t.delegate):t.triggerElement=!0,i;if(r)if(t.targetXY=n.getXY(),r===t.triggerElement)!t.hidden&&t.trackMouse&&(i=t.getTargetXY(),t.constrainPosition&&(i=t.el.adjustForConstraints(i,t.el.parent())),t.setPagePosition(i));else{t.hide();t.lastActive=new Date(0);t.onTargetOver(n)}else!t.closable&&t.isVisible()&&t.autoHide!==!1&&t.hide()},getTargetXY:function(){var n=this,i,r,u,s,h,f,e,c,l,t,o,a;if(n.delegate&&(n.anchorTarget=n.triggerElement),n.anchor){if(n.targetCounter++,r=n.getOffsets(),u=n.anchorToTarget&&!n.trackMouse?n.getAlignToXY(n.anchorTarget,n.getAnchorAlign()):n.targetXY,s=Ext.Element.getViewWidth()-5,h=Ext.Element.getViewHeight()-5,f=document.documentElement,e=document.body,c=(f.scrollLeft||e.scrollLeft||0)+5,l=(f.scrollTop||e.scrollTop||0)+5,t=[u[0]+r[0],u[1]+r[1]],o=n.getSize(),a=n.constrainPosition,n.anchorEl.removeCls(n.anchorCls),n.targetCounter<2&&a){if(t[0]<c)return n.anchorToTarget&&(n.defaultAlign="l-r",n.mouseOffset&&(n.mouseOffset[0]*=-1)),n.anchor="left",n.getTargetXY();if(t[0]+o.width>s)return n.anchorToTarget&&(n.defaultAlign="r-l",n.mouseOffset&&(n.mouseOffset[0]*=-1)),n.anchor="right",n.getTargetXY();if(t[1]<l)return n.anchorToTarget&&(n.defaultAlign="t-b",n.mouseOffset&&(n.mouseOffset[1]*=-1)),n.anchor="top",n.getTargetXY();if(t[1]+o.height>h)return n.anchorToTarget&&(n.defaultAlign="b-t",n.mouseOffset&&(n.mouseOffset[1]*=-1)),n.anchor="bottom",n.getTargetXY()}return n.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+n.getAnchorPosition(),n.anchorEl.addCls(n.anchorCls),n.targetCounter=0,t}return i=n.getMouseOffset(),n.targetXY?[n.targetXY[0]+i[0],n.targetXY[1]+i[1]]:i},getMouseOffset:function(){var n=this,t=n.anchor?[0,0]:[15,18];return n.mouseOffset&&(t[0]+=n.mouseOffset[0],t[1]+=n.mouseOffset[1]),t},getAnchorPosition:function(){var n=this,t;n.anchor?n.tipAnchor=n.anchor.charAt(0):(t=n.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/),t||Ext.Error.raise('The AnchorTip.defaultAlign value "'+n.defaultAlign+'" is invalid.'),n.tipAnchor=t[1].charAt(0));switch(n.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var t=this,i,n,r=t.getAnchorPosition().charAt(0);if(t.anchorToTarget&&!t.trackMouse)switch(r){case"t":n=[0,9];break;case"b":n=[0,-13];break;case"r":n=[-13,0];break;default:n=[9,0]}else switch(r){case"t":n=[-15-t.anchorOffset,30];break;case"b":n=[-19-t.anchorOffset,-13-t.el.dom.offsetHeight];break;case"r":n=[-15-t.el.dom.offsetWidth,-13-t.anchorOffset];break;default:n=[25,-13-t.anchorOffset]}return i=t.getMouseOffset(),n[0]+=i[0],n[1]+=i[1],n},onTargetOver:function(n){var t=this,r=t.delegate,i;t.disabled||n.within(t.target.dom,!0)||(i=r?n.getTarget(r):!0,i&&(t.triggerElement=i,t.triggerEvent=n,t.clearTimer("hide"),t.targetXY=n.getXY(),t.delayShow()))},delayShow:function(){var n=this;n.hidden&&!n.showTimer?Ext.Date.getElapsed(n.lastActive)<n.quickShowInterval?n.show():n.showTimer=Ext.defer(n.showFromDelay,n.showDelay,n):n.hidden||n.autoHide===!1||n.show()},showFromDelay:function(){this.fromDelayShow=!0;this.show();delete this.fromDelayShow},onShowVeto:function(){this.callParent();delete this.triggerElement;this.clearTimer("show")},onTargetOut:function(n){var t=this,i=t.triggerElement,r=i===!0?t.target:i;t.disabled||!i||n.within(r,!0)||(t.showTimer&&(t.clearTimer("show"),t.triggerElement=null),t.autoHide!==!1&&t.delayHide())},delayHide:function(){var n=this;n.hidden||n.hideTimer||(n.hideTimer=Ext.defer(n.hide,n.hideDelay,n))},hide:function(){var n=this;n.clearTimer("dismiss");n.lastActive=new Date;n.anchorEl&&n.anchorEl.hide();n.callParent(arguments);delete n.triggerElement},show:function(){var n=this;this.callParent();this.hidden===!1&&(n.setPagePosition(-1e4,-1e4),n.anchor&&(n.anchor=n.origAnchor),n.calledFromShowAt||n.showAt(n.getTargetXY()),n.anchor?(n.syncAnchor(),n.anchorEl.show()):n.anchorEl.hide())},showAt:function(n){var t=this;t.lastActive=new Date;t.clearTimers();t.calledFromShowAt=!0;t.isVisible()||this.callParent(arguments);t.isVisible()&&(t.setPagePosition(n[0],n[1]),(t.constrainPosition||t.constrain)&&t.doConstrain(),t.toFront(!0),t.el.sync(!0),t.dismissDelay&&t.autoHide!==!1&&(t.dismissTimer=Ext.defer(t.hide,t.dismissDelay,t)),t.anchor?(t.syncAnchor(),t.anchorEl.isVisible()||t.anchorEl.show()):t.anchorEl.hide());delete t.calledFromShowAt},syncAnchor:function(){var n=this,t,i,r;switch(n.tipAnchor.charAt(0)){case"t":t="b";i="tl";r=[20+n.anchorOffset,1];break;case"r":t="l";i="tr";r=[-1,12+n.anchorOffset];break;case"b":t="t";i="bl";r=[20+n.anchorOffset,-1];break;default:t="r";i="tl";r=[1,12+n.anchorOffset]}n.anchorEl.alignTo(n.el,t+"-"+i,r);n.anchorEl.setStyle("z-index",parseInt(n.el.getZIndex(),10)||1).setVisibilityMode(Ext.Element.DISPLAY)},setPagePosition:function(){var n=this;n.callParent(arguments);n.anchor&&n.syncAnchor()},_timerNames:{},clearTimer:function(n){var t=this,i=t._timerNames,r=i[n]||(i[n]=n+"Timer"),u=t[r];u&&(clearTimeout(u),t[r]=null)},clearTimers:function(){var n=this;n.clearTimer("show");n.clearTimer("dismiss");n.clearTimer("hide")},onShow:function(){var n=this;n.callParent();n.mon(Ext.getDoc(),"mousedown",n.onDocMouseDown,n)},onHide:function(){var n=this;n.callParent();n.mun(Ext.getDoc(),"mousedown",n.onDocMouseDown,n)},onDocMouseDown:function(n){var t=this;t.closable||n.within(t.el.dom)||(t.disable(),Ext.defer(t.doEnable,100,t))},doEnable:function(){this.isDestroyed||this.enable()},onDisable:function(){this.callParent();this.clearTimers();this.hide()},beforeDestroy:function(){var n=this;n.clearTimers();Ext.destroy(n.anchorEl);delete n.anchorEl;delete n.target;delete n.anchorTarget;delete n.triggerElement;n.callParent()},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);this.callParent()}})