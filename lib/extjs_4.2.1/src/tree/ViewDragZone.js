Ext.define("Ext.tree.ViewDragZone",{extend:"Ext.view.DragZone",isPreventDrag:function(n,t){return t.get("allowDrag")===!1||!!n.getTarget(this.view.expanderSelector)},getDragText:function(){var t=this.dragData.records,i=t.length,n=t[0].get(this.displayField),r="s";return i===1&&n?n:(n||(r=""),Ext.String.format(this.dragText,i,r))},afterRepair:function(){var t=this,i=t.view,f=i.selectedItemCls,e=t.dragData.records,r,o=e.length,u=Ext.fly,n;if(Ext.enableFx&&t.repairHighlight)for(r=0;r<o;r++)n=i.getNode(e[r]),u(n.firstChild).highlight(t.repairHighlightColor,{listeners:{beforeanimate:function(){i.isSelected(n)&&u(n).removeCls(f)},afteranimate:function(){i.isSelected(n)&&u(n).addCls(f)}}});t.dragging=!1}})