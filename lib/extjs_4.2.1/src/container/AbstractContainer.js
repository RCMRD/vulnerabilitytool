Ext.define("Ext.container.AbstractContainer",{extend:"Ext.Component",requires:["Ext.util.MixedCollection","Ext.layout.container.Auto","Ext.ZIndexManager"],mixins:{queryable:"Ext.Queryable"},renderTpl:"{%this.renderContainer(out,values)%}",suspendLayout:!1,autoDestroy:!0,defaultType:"panel",detachOnRemove:!0,isContainer:!0,layoutCounter:0,baseCls:Ext.baseCSSPrefix+"container",defaultLayoutType:"auto",initComponent:function(){var n=this;n.addEvents("afterlayout","beforeadd","beforeremove","add","remove");n.callParent();n.getLayout();n.initItems()},initItems:function(){var n=this,t=n.items;n.items=new Ext.util.AbstractMixedCollection(!1,n.getComponentId);n.floatingItems=new Ext.util.MixedCollection(!1,n.getComponentId);t&&(Ext.isArray(t)||(t=[t]),n.add(t))},getFocusEl:function(){return this.getTargetEl()},finishRenderChildren:function(){this.callParent();var n=this.getLayout();n&&n.finishRender()},beforeRender:function(){var n=this,t=n.getLayout(),i;n.callParent();t.initialized||t.initLayout();i=t.targetCls;i&&n.applyTargetCls(i)},applyTargetCls:function(n){this.addCls(n)},afterComponentLayout:function(){var i=this.floatingItems.items,r=i.length,n,t;for(this.callParent(arguments),n=0;n<r;n++)t=i[n],!t.rendered&&t.autoShow&&t.show()},onPosition:function(){this.callParent(arguments);this.repositionFloatingItems()},onResize:function(){this.callParent(arguments);this.repositionFloatingItems()},repositionFloatingItems:function(){for(var i=this.floatingItems.items,r=i.length,n,t=0;t<r;t++)n=i[t],n.el&&!n.hidden&&n.setPosition(n.x,n.y)},setupRenderTpl:function(n){this.callParent(arguments);this.getLayout().setupRenderTpl(n)},getDefaultContentTarget:function(){return this.el},getContentTarget:function(){return this.getLayout().getContentTarget()},setLayout:function(n){var t=this.layout;t&&t.isLayout&&t!=n&&t.setOwner(null);this.layout=n;n.setOwner(this)},getLayout:function(){var n=this;return n.layout&&n.layout.isLayout||n.setLayout(Ext.layout.Layout.create(n.layout,n.self.prototype.layout||n.defaultLayoutType)),n.layout},doLayout:function(){return this.updateLayout(),this},afterLayout:function(n){var t=this;++t.layoutCounter;t.hasListeners.afterlayout&&t.fireEvent("afterlayout",t,n)},prepareItems:function(n,t){n=Ext.isArray(n)?n.slice():[n];for(var u=this,i=0,f=n.length,r;i<f;i++)r=n[i],r==null?(Ext.Array.erase(n,i,1),--i,--f):(t&&(r=this.applyDefaults(r)),r.isContained=u,n[i]=u.lookupComponent(r),delete r.isContained,delete n[i].isContained);return n},applyDefaults:function(n){var t=this.defaults;return t&&(Ext.isFunction(t)&&(t=t.call(this,n)),Ext.isString(n)&&(n=Ext.ComponentManager.get(n)),Ext.applyIf(n,t)),n},lookupComponent:function(n){return typeof n=="string"?Ext.ComponentManager.get(n):Ext.ComponentManager.create(n,this.defaultType)},getComponentId:function(n){return n.getItemId&&n.getItemId()},add:function(){var n=this,u=Ext.Array.slice(arguments),s=typeof u[0]=="number"?u.shift():-1,c=n.getLayout(),h,r,f,e,t,i,o;for(u.length==1&&Ext.isArray(u[0])?(r=u[0],h=!0):r=u,n.rendered&&Ext.suspendLayouts(),o=r=n.prepareItems(r,!0),e=r.length,h||e!=1||(o=r[0]),f=0;f<e;f++)if(t=r[f],t||Ext.Error.raise("Cannot add null item to Container with itemId/id: "+n.getItemId()),i=s<0?n.items.length:s+f,t.floating){n.floatingItems.add(t);t.onAdded(n,i);n.hasListeners.add&&n.fireEvent("add",n,t,i)}else if((!n.hasListeners.beforeadd||n.fireEvent("beforeadd",n,t,i)!==!1)&&n.onBeforeAdd(t)!==!1){n.items.insert(i,t);t.onAdded(n,i);n.onAdd(t,i);c.onAdd(t,i);n.hasListeners.add&&n.fireEvent("add",n,t,i)}return n.updateLayout(),n.rendered&&Ext.resumeLayouts(!0),o},onAdd:Ext.emptyFn,onRemove:Ext.emptyFn,insert:function(n,t){var i;return t&&t.isComponent&&(i=this.items.indexOf(t),i!==-1)?this.move(i,n):this.add(n,t)},move:function(n,t){var r=this.items,i;if(n.isComponent&&(n=r.indexOf(n)),i=r.removeAt(n),i===!1)return!1;r.insert(t,i);this.onMove(i,n,t);return this.updateLayout(),i},onMove:Ext.emptyFn,onBeforeAdd:function(n){n.ownerCt&&n.ownerCt!==this&&n.ownerCt.remove(n,!1)},remove:function(n,t){var i=this,r=i.getComponent(n);return Ext.isDefined(Ext.global.console)&&!r&&Ext.global.console.warn("Attempted to remove a component that does not exist. Ext.container.Container: remove takes an argument of the component to remove. cmp.remove() is incorrect usage."),r&&(!i.hasListeners.beforeremove||i.fireEvent("beforeremove",i,r)!==!1)&&(i.doRemove(r,t),i.hasListeners.remove&&i.fireEvent("remove",i,r),i.destroying||r.floating||i.updateLayout()),r},doRemove:function(n,t){t=t===!0||t!==!1&&this.autoDestroy;var i=this,r=i.layout,e=r&&i.rendered,u=n.destroying||t,f=n.floating;if(f?i.floatingItems.remove(n):i.items.remove(n),e&&!f){r.running&&Ext.AbstractComponent.cancelLayout(n,u);r.onRemove(n,u)}n.onRemoved(u);i.onRemove(n,u);t?n.destroy():(e&&!f&&r.afterRemove(n),i.detachOnRemove&&n.rendered&&i.detachComponent(n))},detachComponent:function(n){Ext.getDetachedBody().appendChild(n.getEl())},removeAll:function(n){var t=this,u=t.items.items.slice().concat(t.floatingItems.items),f=[],r=0,e=u.length,i;for(t.suspendLayouts();r<e;r++)i=u[r],t.remove(i,n),i.ownerCt!==t&&f.push(i);return t.resumeLayouts(!!e),f},getRefItems:function(n){for(var e=this,u=e.items.items,f=u.length,r=0,i,t=[];r<f;r++)i=u[r],t[t.length]=i,n&&i.getRefItems&&t.push.apply(t,i.getRefItems(!0));for(u=e.floatingItems.items,f=u.length,r=0;r<f;r++)i=u[r],t[t.length]=i,n&&i.getRefItems&&t.push.apply(t,i.getRefItems(!0));return t},cascade:function(n,t,i){var r=this,e=r.items?r.items.items:[],s=e.length,o=0,u,f=i?i.concat(r):[r],h=f.length-1;if(n.apply(t||r,f)!==!1)for(;o<s;o++)u=e[o],u.cascade?u.cascade(n,t,i):(f[h]=u,n.apply(t||e,f));return this},isAncestor:function(n){while(n){if(n.ownerCt===this)return!0;n=n.ownerCt}},getComponent:function(n){Ext.isObject(n)&&(n=n.getItemId());var t=this.items.get(n);return t||typeof n=="number"||(t=this.floatingItems.get(n)),t},contains:function(n,t){var i=!1;return t?(this.cascade(function(t){if(t.contains&&t.contains(n))return i=!0,!1}),i):this.items.contains(n)||this.floatingItems.contains(n)},nextChild:function(n,t){var i=this,r,u=i.items.indexOf(n);return u!==-1&&(r=t?Ext.ComponentQuery(t,i.items.items.slice(u+1)):i.items.getAt(u+1),!r&&i.ownerCt&&(r=i.ownerCt.nextChild(i,t))),r},prevChild:function(n,t){var i=this,r,u=i.items.indexOf(n);return u!==-1&&(r=t?Ext.ComponentQuery(t,i.items.items.slice(u+1)):i.items.getAt(u+1),!r&&i.ownerCt&&(r=i.ownerCt.nextChild(i,t))),r},enable:function(){this.callParent(arguments);for(var i=this.getChildItemsToDisable(),r=i.length,t,n=0;n<r;n++)t=i[n],t.resetDisable&&t.enable();return this},disable:function(){this.callParent(arguments);for(var i=this.getChildItemsToDisable(),r=i.length,n,t=0;t<r;t++)n=i[t],n.resetDisable===!1||n.disabled||(n.disable(),n.resetDisable=!0);return this},getChildItemsToDisable:function(){return this.query("[isFormField],button")},beforeDestroy:function(){var n=this,i=n.items,r=n.floatingItems,t;if(i)while(t=i.first())n.doRemove(t,!0);if(r)while(t=r.first())n.doRemove(t,!0);Ext.destroy(n.layout);n.callParent()}})