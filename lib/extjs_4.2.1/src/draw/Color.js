Ext.define("Ext.draw.Color",{colorToHexRe:/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbRe:/\s*rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)\s*/,hexRe:/\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\s*/,lightnessFactor:.2,constructor:function(n,t,i){var r=this,u=Ext.Number.constrain;r.r=u(n,0,255);r.g=u(t,0,255);r.b=u(i,0,255)},getRed:function(){return this.r},getGreen:function(){return this.g},getBlue:function(){return this.b},getRGB:function(){var n=this;return[n.r,n.g,n.b]},getHSL:function(){var o=this,i=o.r/255,r=o.g/255,e=o.b/255,n=Math.max(i,r,e),u=Math.min(i,r,e),f=n-u,t,s=0,h=.5*(n+u);return u!=n&&(s=h<.5?f/(n+u):f/(2-n-u),t=i==n?60*(r-e)/f:r==n?120+60*(e-i)/f:240+60*(i-r)/f,t<0&&(t+=360),t>=360&&(t-=360)),[t,s,h]},getLighter:function(n){var t=this.getHSL();return n=n||this.lightnessFactor,t[2]=Ext.Number.constrain(t[2]+n,0,1),this.fromHSL(t[0],t[1],t[2])},getDarker:function(n){return n=n||this.lightnessFactor,this.getLighter(-n)},toString:function(){var r=this,u=Math.round,n=u(r.r).toString(16),t=u(r.g).toString(16),i=u(r.b).toString(16);return n=n.length==1?"0"+n:n,t=t.length==1?"0"+t:t,i=i.length==1?"0"+i:i,["#",n,t,i].join("")},toHex:function(n){if(Ext.isArray(n)&&(n=n[0]),!Ext.isString(n))return"";if(n.substr(0,1)==="#")return n;var t=this.colorToHexRe.exec(n),i,r,u,f;return Ext.isArray(t)?(i=parseInt(t[2],10),r=parseInt(t[3],10),u=parseInt(t[4],10),f=u|r<<8|i<<16,t[1]+"#"+("000000"+f.toString(16)).slice(-6)):n},fromString:function(n){var t,i,r,u,f=parseInt;return(n.length==4||n.length==7)&&n.substr(0,1)==="#"?(t=n.match(this.hexRe),t&&(i=f(t[1],16)>>0,r=f(t[2],16)>>0,u=f(t[3],16)>>0,n.length==4&&(i+=i*16,r+=r*16,u+=u*16))):(t=n.match(this.rgbRe),t&&(i=t[1],r=t[2],u=t[3])),typeof i=="undefined"?undefined:new Ext.draw.Color(i,r,u)},getGrayscale:function(){return this.r*.3+this.g*.59+this.b*.11},fromHSL:function(n,t,i){var u,f,e,r=[],o=Math.abs,s=Math.floor;if(t==0||n==null)r=[i,i,i];else{n/=60;u=t*(1-o(2*i-1));f=u*(1-o(n-2*s(n/2)-1));e=i-u/2;switch(s(n)){case 0:r=[u,f,0];break;case 1:r=[f,u,0];break;case 2:r=[0,u,f];break;case 3:r=[0,f,u];break;case 4:r=[f,0,u];break;case 5:r=[u,0,f]}r=[r[0]+e,r[1]+e,r[2]+e]}return new Ext.draw.Color(r[0]*255,r[1]*255,r[2]*255)}},function(){var n=this.prototype;this.addStatics({fromHSL:function(){return n.fromHSL.apply(n,arguments)},fromString:function(){return n.fromString.apply(n,arguments)},toHex:function(){return n.toHex.apply(n,arguments)}})})