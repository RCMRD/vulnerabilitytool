Ext.define("Ext.draw.engine.SvgExporter",function(){var f=/,/g,e=/(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)\s('*.*'*)/,o=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,s=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,([\d\.]+)\)/g,n,h,i,r,c=function(t){n=t;h=n.length;i=n.width;r=n.height},u={path:function(n){var i=n.attr,r=i.path,e="",o,u,s;if(Ext.isArray(r[0]))for(s=r.length,u=0;u<s;u++)e+=r[u].join(" ");else e=Ext.isArray(r)?r.join(" "):r.replace(f," ");return o=t({d:e,fill:i.fill||"none",stroke:i.stroke,"fill-opacity":i.opacity,"stroke-width":i["stroke-width"],"stroke-opacity":i["stroke-opacity"],"z-index":i.zIndex,transform:n.matrix.toSvg()}),"<path "+o+"/>"},text:function(n){var i=n.attr,r=e.exec(i.font),f=r&&r[1]||"12",s=r&&r[3]||"Arial",h=i.text,c=Ext.isFF3_0||Ext.isFF3_5?2:4,u="",o;return n.getBBox(),u+='<tspan x="'+(i.x||"")+'" dy="',u+=f/c+'">',u+=Ext.htmlEncode(h)+"<\/tspan>",o=t({x:i.x,y:i.y,"font-size":f,"font-family":s,"font-weight":i["font-weight"],"text-anchor":i["text-anchor"],fill:i.fill||"#000","fill-opacity":i.opacity,transform:n.matrix.toSvg()}),"<text "+o+">"+u+"<\/text>"},rect:function(n){var i=n.attr,r=t({x:i.x,y:i.y,rx:i.rx,ry:i.ry,width:i.width,height:i.height,fill:i.fill||"none","fill-opacity":i.opacity,stroke:i.stroke,"stroke-opacity":i["stroke-opacity"],"stroke-width":i["stroke-width"],transform:n.matrix&&n.matrix.toSvg()});return"<rect "+r+"/>"},circle:function(n){var i=n.attr,r=t({cx:i.x,cy:i.y,r:i.radius,fill:i.translation.fill||i.fill||"none","fill-opacity":i.opacity,stroke:i.stroke,"stroke-opacity":i["stroke-opacity"],"stroke-width":i["stroke-width"],transform:n.matrix.toSvg()});return"<circle "+r+" />"},image:function(n){var i=n.attr,r=t({x:i.x-(i.width/2>>0),y:i.y-(i.height/2>>0),width:i.width,height:i.height,"xlink:href":i.src,transform:n.matrix.toSvg()});return"<image "+r+" />"}},l=function(){return'<?xml version="1.0" standalone="yes"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'},a=function(){var l='<svg width="'+i+'px" height="'+r+'px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',e="",a,v,h,it,w,b,k,y,d,rt,c,ut,g,et,t,ft,p,nt,tt,f;if(h=n.items.items,v=h.length,w=function(n){for(var s=n.childNodes,c=s.length,u=0,h,r,t="",i,f,e,o;u<c;u++){for(i=s[u],f=i.attributes,e=i.tagName,t+="<"+e,r=0,h=f.length;r<h;r++)o=f.item(r),t+=" "+o.name+'="'+o.value+'"';t+=">";i.childNodes.length>0&&(t+=w(i));t+="<\/"+e+">"}return t},n.getDefs)e=w(n.getDefs());else for(y=n.gradientsColl,y&&(d=y.keys,rt=y.items,c=0,ut=d.length);c<ut;c++){for(g=d[c],et=rt[c],it=n.gradientsColl.getByKey(g),e+='<linearGradient id="'+g+'" x1="0" y1="0" x2="1" y2="1">',f=it.colors.replace(o,"rgb($1|$2|$3)"),f=f.replace(s,"rgba($1|$2|$3|$4)"),b=f.split(","),t=0,ft=b.length;t<ft;t++)k=b[t].split(" "),f=Ext.draw.Color.fromString(k[1].replace(/\|/g,",")),e+='<stop offset="'+k[0]+'" stop-color="'+f.toString()+'" stop-opacity="1"><\/stop>';e+="<\/linearGradient>"}for(l+="<defs>"+e+"<\/defs>",l+=u.rect({attr:{width:"100%",height:"100%",fill:"#fff",stroke:"none",opacity:"0"}}),p=new Array(v),t=0;t<v;t++)p[t]=t;for(p.sort(function(n,t){return(nt=h[n].attr.zIndex||0,tt=h[t].attr.zIndex||0,nt==tt)?n-t:nt-tt}),t=0;t<v;t++)a=h[p[t]],a.attr.hidden||(l+=u[a.type](a));return l+"<\/svg>"},t=function(n){var i="";for(var t in n)n.hasOwnProperty(t)&&n[t]!=null&&(i+=t+'="'+n[t]+'" ');return i};return{singleton:!0,generate:function(n,t){return t=t||{},c(n),l()+a()}}})