Ext.define("Ext.resizer.Resizer",{mixins:{observable:"Ext.util.Observable"},uses:["Ext.resizer.ResizeTracker","Ext.Component"],alternateClassName:"Ext.Resizable",handleCls:Ext.baseCSSPrefix+"resizable-handle",pinnedCls:Ext.baseCSSPrefix+"resizable-pinned",overCls:Ext.baseCSSPrefix+"resizable-over",wrapCls:Ext.baseCSSPrefix+"resizable-wrap",delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:!0,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:1e4,maxWidth:1e4,pinned:!1,preserveRatio:!1,transparent:!1,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},constructor:function(n){var t=this,i,e,s,f=t.handles,h,o,l,r=0,u,a=[],v,y,p,c,w=Ext.dom.Element.unselectableCls;t.addEvents("beforeresize","resizedrag","resize");(Ext.isString(n)||Ext.isElement(n)||n.dom)&&(i=n,n=arguments[1]||{},n.target=i);t.mixins.observable.constructor.call(t,n);i=t.target;i?i.isComponent?(i.addClsWithUI("resizable"),t.el=i.getEl(),i.minWidth&&(t.minWidth=i.minWidth),i.minHeight&&(t.minHeight=i.minHeight),i.maxWidth&&(t.maxWidth=i.maxWidth),i.maxHeight&&(t.maxHeight=i.maxHeight),i.floating&&(t.hasOwnProperty("handles")||(t.handles="n ne e se s sw w nw"))):t.el=t.target=Ext.get(i):t.target=t.el=Ext.get(t.el);s=t.el.dom.tagName.toUpperCase();(s=="TEXTAREA"||s=="IMG"||s=="TABLE")&&(t.originalTarget=t.target,e=t.el,p=e.getBox(),t.target=t.el=t.el.wrap({cls:t.wrapCls,id:t.el.id+"-rzwrap",style:e.getStyles("margin-top","margin-bottom")}),t.el.setPositioning(e.getPositioning()),e.clearPositioning(),t.el.setBox(p),e.setStyle("position","absolute"));t.el.position();t.pinned&&t.el.addCls(t.pinnedCls);t.resizeTracker=new Ext.resizer.ResizeTracker({disabled:t.disabled,target:t.target,constrainTo:t.constrainTo,overCls:t.overCls,throttle:t.throttle,originalTarget:t.originalTarget,delegate:"."+t.handleCls,dynamic:t.dynamic,preserveRatio:t.preserveRatio,heightIncrement:t.heightIncrement,widthIncrement:t.widthIncrement,minHeight:t.minHeight,maxHeight:t.maxHeight,minWidth:t.minWidth,maxWidth:t.maxWidth});t.resizeTracker.on({mousedown:t.onBeforeResize,drag:t.onResize,dragend:t.onResizeEnd,scope:t});for(t.handles=="all"&&(t.handles="n s e w ne nw se sw"),f=t.handles=t.handles.split(t.delimiterRe),o=t.possiblePositions,l=f.length,h=t.handleCls+" "+t.handleCls+"-{0}",t.target.isComponent&&(c=t.target.baseCls,h+=" "+c+"-handle "+c+"-handle-{0}",Ext.supports.CSS3BorderRadius&&(h+=" "+c+"-handle-{0}-br")),v=Ext.isIE6?' style="height:'+t.el.getHeight()+'px"':"";r<l;r++)f[r]&&o[f[r]]&&(u=o[f[r]],y=u==="east"||u==="west"?v:"",a.push('<div id="',t.el.id,"-",u,'-handle"',' class="',Ext.String.format(h,u)," ",w,'"',' unselectable="on"',y,"><\/div>"));for(Ext.DomHelper.append(t.el,a.join("")),r=0;r<l;r++)f[r]&&o[f[r]]&&(u=o[f[r]],t[u]=t.el.getById(t.el.id+"-"+u+"-handle"),t[u].region=u,t.transparent&&t[u].setOpacity(0));Ext.isNumber(t.width)&&(t.width=Ext.Number.constrain(t.width,t.minWidth,t.maxWidth));Ext.isNumber(t.height)&&(t.height=Ext.Number.constrain(t.height,t.minHeight,t.maxHeight));(t.width!==null||t.height!==null)&&(t.originalTarget&&(t.originalTarget.setWidth(t.width),t.originalTarget.setHeight(t.height)),t.resizeTo(t.width,t.height));t.forceHandlesHeight()},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(n,t){var i=this.el.getBox();return this.fireEvent("beforeresize",this,i.width,i.height,t)},onResize:function(n,t){var i=this,r=i.el.getBox();return i.forceHandlesHeight(),i.fireEvent("resizedrag",i,r.width,r.height,t)},onResizeEnd:function(n,t){var i=this,r=i.el.getBox();return i.forceHandlesHeight(),i.fireEvent("resize",i,r.width,r.height,t)},resizeTo:function(n,t){var i=this;i.target.setSize(n,t);i.fireEvent("resize",i,n,t,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var n=this,t,i=n.handles,u=i.length,f=n.possiblePositions,r;for(n.resizeTracker.destroy(),t=0;t<u;t++)(r=n[f[i[t]]])&&r.remove()},forceHandlesHeight:function(){var t=this,n;Ext.isIE6&&(n=t.east,n&&n.setHeight(t.el.getHeight()),n=t.west,n&&n.setHeight(t.el.getHeight()),t.el.repaint())}})