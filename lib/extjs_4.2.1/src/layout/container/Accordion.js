Ext.define("Ext.layout.container.Accordion",{extend:"Ext.layout.container.VBox",alias:["layout.accordion"],alternateClassName:"Ext.layout.AccordionLayout",targetCls:Ext.baseCSSPrefix+"accordion-layout-ct",itemCls:[Ext.baseCSSPrefix+"box-item",Ext.baseCSSPrefix+"accordion-item"],align:"stretch",fill:!0,titleCollapse:!0,hideCollapseTool:!1,collapseFirst:undefined,animate:!0,activeOnTop:!1,multi:!1,defaultAnimatePolicy:{y:!0,height:!0},constructor:function(){var n=this;n.callParent(arguments);n.animatePolicy=!n.multi&&n.animate?Ext.apply({},n.defaultAnimatePolicy):null},beforeRenderItems:function(n){for(var i=this,o=n.length,f=0,u=i.owner,s=i.collapseFirst,h=Ext.isDefined(s),r=i.getExpanded(!0)[0],e=i.multi,t;f<o;f++)t=n[f],t.rendered||(e&&t.collapsible===!1||(t.collapsible=!0),t.collapsible&&(h&&(t.collapseFirst=s),i.hideCollapseTool?(t.hideCollapseTool=i.hideCollapseTool,t.titleCollapse=!0):i.titleCollapse&&t.titleCollapse===undefined&&(t.titleCollapse=i.titleCollapse)),delete t.hideHeader,delete t.width,t.title=t.title||"&#160;",t.addBodyCls(Ext.baseCSSPrefix+"accordion-body"),e||(r?t.collapsed=r!==t:t.hasOwnProperty("collapsed")&&t.collapsed===!1?r=t:t.collapsed=!0,u.mon(t,{show:i.onComponentShow,beforeexpand:i.onComponentExpand,beforecollapse:i.onComponentCollapse,scope:i})),u.mon(t,"beforecollapse",i.onComponentCollapse,i),t.headerOverCls=Ext.baseCSSPrefix+"accordion-hd-over");e||(r?i.activeOnTop&&(r.collapsed=!1,i.configureItem(r),u.items.indexOf(r)>0&&u.insert(0,r)):o&&(n[0].collapsed=!1))},getItemsRenderTree:function(n){return this.beforeRenderItems(n),this.callParent(arguments)},renderItems:function(n){this.beforeRenderItems(n);this.callParent(arguments)},configureItem:function(n){this.callParent(arguments);n.animCollapse=n.border=!1;this.fill&&(n.flex=1)},beginLayout:function(n){this.callParent(arguments);this.updatePanelClasses(n)},updatePanelClasses:function(n){for(var u=n.visibleItems,f=u.length,e=!0,r,t,i=0;i<f;i++)r=u[i],t=r.header,t.addCls(Ext.baseCSSPrefix+"accordion-hd"),e?t.removeCls(Ext.baseCSSPrefix+"accordion-hd-sibling-expanded"):t.addCls(Ext.baseCSSPrefix+"accordion-hd-sibling-expanded"),i+1==f&&r.collapsed?t.addCls(Ext.baseCSSPrefix+"accordion-hd-last-collapsed"):t.removeCls(Ext.baseCSSPrefix+"accordion-hd-last-collapsed"),e=r.collapsed},onComponentExpand:function(n){var t=this,i=t.owner,f=t.multi,h=t.animate,s=!f&&!t.animate&&t.activeOnTop,u,e,r,o;if(!t.processing){for(t.processing=!0,o=i.deferLayouts,i.deferLayouts=!0,u=f?[]:t.getExpanded(),e=u.length,r=0;r<e;r++)u[r].collapse();s&&(Ext.suspendLayouts(),i.insert(0,n),Ext.resumeLayouts());i.deferLayouts=o;t.processing=!1}},onComponentCollapse:function(n){var t=this,r=t.owner,i,u,f;if(t.owner.items.getCount()===1)return!1;t.processing||(t.processing=!0,f=r.deferLayouts,r.deferLayouts=!0,i=n.next()||n.prev(),t.multi?(u=t.getExpanded(),u.length===1&&i.expand()):i&&i.expand(),r.deferLayouts=f,t.processing=!1)},onComponentShow:function(n){this.onComponentExpand(n)},getExpanded:function(n){for(var r=this.owner.items.items,e=r.length,i=0,u=[],f,t;i<e;++i)t=r[i],f=n?t.hasOwnProperty("collapsed")&&t.collapsed===!1:!t.collapsed,f&&u.push(t);return u}})