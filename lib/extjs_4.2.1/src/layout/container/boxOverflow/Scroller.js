Ext.define("Ext.layout.container.boxOverflow.Scroller",{extend:"Ext.layout.container.boxOverflow.None",requires:["Ext.util.ClickRepeater","Ext.Element"],alternateClassName:"Ext.layout.boxOverflow.Scroller",mixins:{observable:"Ext.util.Observable"},animateScroll:!1,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:Ext.baseCSSPrefix+"box-scroller",constructor:function(n,t){var i=this;i.layout=n;Ext.apply(i,t||{});i.mixins.observable.constructor.call(i);i.addEvents("scroll");i.scrollPosition=0;i.scrollSize=0},getPrefixConfig:function(){var n=this,i=n.layout,r=i.owner,t;return n.initCSSClasses(),t=Ext.layout.container.Box.prototype.innerCls+" "+n.beforeCtCls,r.plain&&(t+=" "+n.scrollerCls+"-plain"),{cls:t,cn:{id:r.id+i.names.beforeScrollerSuffix,cls:n.scrollerCls+" "+n.beforeScrollerCls,style:"display:none"}}},getSuffixConfig:function(){var n=this,t=n.layout,i=t.owner,r=Ext.layout.container.Box.prototype.innerCls+" "+n.afterCtCls;return i.plain&&(r+=" "+n.scrollerCls+"-plain"),{cls:r,cn:{id:i.id+t.names.afterScrollerSuffix,cls:n.scrollerCls+" "+n.afterScrollerCls,style:"display:none"}}},getOverflowCls:function(){return Ext.baseCSSPrefix+this.layout.direction+"-box-overflow-body"},initCSSClasses:function(){var n=this,t=Ext.baseCSSPrefix,i=n.layout,r=i.names,u=r.beforeX,f=r.afterX,e=n.getOwnerType(i.owner);n.beforeCtCls=n.beforeCtCls||t+"box-scroller-"+u;n.afterCtCls=n.afterCtCls||t+"box-scroller-"+f;n.beforeScrollerCls=n.beforeScrollerCls||t+e+"-scroll-"+u;n.afterScrollerCls=n.afterScrollerCls||t+e+"-scroll-"+f},beginLayout:function(n){var t=this.layout;n.innerCtScrollPos=this.getScrollPosition();this.callParent(arguments)},completeLayout:function(n){var t=this,r=n.state.boxPlan,u=t.layout.names,i;r&&r.tooNarrow&&(i=n.childItems[n.childItems.length-1],t.scrollSize=i.props[u.x]+i.props[u.width],t.updateScrollButtons());this.callParent(arguments)},finishedLayout:function(n){var t=this,i=t.layout,r=Math.min(t.getMaxScrollPosition(),n.innerCtScrollPos);i.innerCt[i.names.setScrollLeft](r)},handleOverflow:function(){var n=this,t=n.layout.names.getWidth;return n.showScrollers(),{reservedSpace:n.beforeCt[t]()+n.afterCt[t]()}},captureChildElements:function(){var n=this,o=n.layout.owner.el,t,i,f,r,e,u;n.beforeCt||(u="-hover",r="-pressed",f=n.scrollerCls+u,e=n.scrollerCls+r,t=n.beforeScroller=o.getById(n.layout.owner.id+"-before-scroller"),i=n.afterScroller=o.getById(n.layout.owner.id+"-after-scroller"),n.beforeCt=t.up(""),n.afterCt=i.up(""),n.createWheelListener(),t.addClsOnOver(f),t.addClsOnOver(n.beforeScrollerCls+u),t.addClsOnClick(e),t.addClsOnClick(n.beforeScrollerCls+r),i.addClsOnOver(f),i.addClsOnOver(n.afterScrollerCls+u),i.addClsOnClick(e),i.addClsOnClick(n.afterScrollerCls+r),t.setVisibilityMode(Ext.Element.DISPLAY),i.setVisibilityMode(Ext.Element.DISPLAY),n.beforeRepeater=new Ext.util.ClickRepeater(t,{interval:n.scrollRepeatInterval,handler:n.scrollLeft,scope:n}),n.afterRepeater=new Ext.util.ClickRepeater(i,{interval:n.scrollRepeatInterval,handler:n.scrollRight,scope:n}))},createWheelListener:function(){var n=this;n.layout.innerCt.on({mousewheel:function(t){n.scrollBy(n.getWheelDelta(t)*n.wheelIncrement*-1,!1)},stopEvent:!0})},getWheelDelta:function(n){return n.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){var n=this;n.captureChildElements();n.beforeScroller.show();n.afterScroller.show();n.layout.owner.addClsWithUI(n.layout.direction==="vertical"?"vertical-scroller":"scroller")},hideScrollers:function(){var n=this;n.beforeScroller!==undefined&&(n.beforeScroller.hide(),n.afterScroller.hide(),n.layout.owner.removeClsWithUI(n.layout.direction==="vertical"?"vertical-scroller":"scroller"))},destroy:function(){var n=this;Ext.destroy(n.beforeRepeater,n.afterRepeater,n.beforeScroller,n.afterScroller,n.beforeCt,n.afterCt)},scrollBy:function(n,t){this.scrollTo(this.getScrollPosition()+n,t)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var n=this,r,u,f,e,t,i="-disabled";n.beforeScroller!=null&&n.afterScroller!=null&&(r=n.atExtremeBefore()?"addCls":"removeCls",u=n.atExtremeAfter()?"addCls":"removeCls",t=n.scrollerCls+i,f=[t,n.beforeScrollerCls+i],e=[t,n.afterScrollerCls+i],n.beforeScroller[r](f),n.afterScroller[u](e),n.scrolling=!1)},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,!1)},scrollRight:function(){this.scrollBy(this.scrollIncrement,!1)},getScrollPosition:function(){var n=this,t=n.layout;return isNaN(n.scrollPosition)?t.innerCt[t.names.getScrollLeft]():n.scrollPosition},getMaxScrollPosition:function(){var n=this,t=n.layout,i=n.scrollSize-t.innerCt[t.names.getWidth]();return i<0?0:i},atExtremeBefore:function(){return!this.getScrollPosition()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},scrollTo:function(n,t){var i=this,u=i.layout,f=u.names,e=i.getScrollPosition(),r=Ext.Number.constrain(n,0,i.getMaxScrollPosition());r==e||i.scrolling||(i.scrollPosition=NaN,t===undefined&&(t=i.animateScroll),u.innerCt[f.scrollTo](f.beforeScrollX,r,t?i.getScrollAnim():!1),t?i.scrolling=!0:i.updateScrollButtons(),i.fireEvent("scroll",i,r,t?i.getScrollAnim():!1))},scrollToItem:function(n,t){var i=this,o=i.layout,s=o.owner,u=o.names,f,e,r;n=i.getItem(n);n!==undefined&&(n==s.items.first()?r=0:n===s.items.last()?r=i.getMaxScrollPosition():(f=i.getItemVisibility(n),f.fullyVisible||(e=n.getBox(!1,!0),r=e[u.x],f.hiddenEnd&&(r-=i.layout.innerCt[u.getWidth]()-e[u.width]))),r!==undefined&&i.scrollTo(r,t))},getItemVisibility:function(n){var t=this,f=t.getItem(n).getBox(!0,!0),e=t.layout,i=e.names,r=f[i.x],o=r+f[i.width],u=t.getScrollPosition(),s=u+e.innerCt[i.getWidth]();return{hiddenStart:r<u,hiddenEnd:o>s,fullyVisible:r>u&&o<s}}})