Ext.define("Ext.layout.container.Form",{alias:"layout.form",extend:"Ext.layout.container.Container",alternateClassName:"Ext.layout.FormLayout",tableCls:Ext.baseCSSPrefix+"form-layout-table",type:"form",createsInnerCt:!0,manageOverflow:!0,lastOverflowAdjust:{width:0,height:0},childEls:["formTable"],padRow:'<tr><td class="'+Ext.baseCSSPrefix+'form-item-pad" colspan="3"><\/td><\/tr>',renderTpl:['<table id="{ownerId}-formTable" class="{tableCls}" style="width:100%" cellpadding="0">',"{%this.renderBody(out,values)%}","<\/table>","{%this.renderPadder(out,values)%}"],getRenderData:function(){var n=this.callParent();return n.tableCls=this.tableCls,n},calculate:function(n){var t=this,e=t.getContainerSize(n,!0),u,i,r=0,f,o=n.sizeModel.height.shrinkWrap;if(o&&(n.hasDomProp("containerChildrenSizeDone")?n.setProp("contentHeight",t.formTable.dom.offsetHeight+n.targetContext.getPaddingInfo().height):t.done=!1),e.gotWidth)for(u=t.formTable.dom.offsetWidth,i=n.childItems,f=i.length;r<f;++r)i[r].setWidth(u,!1);else t.done=!1},getRenderTarget:function(){return this.formTable},getRenderTree:function(){for(var i=this,t=i.callParent(arguments),n=0,r=t.length;n<r;n++)t[n]=i.transformItemRenderTree(t[n]);return t},transformItemRenderTree:function(n){return n.tag&&n.tag=="table"?(n.tag="tbody",delete n.cellspacing,delete n.cellpadding,Ext.isIE6&&(n.cn=this.padRow),n):{tag:"tbody",cn:{tag:"tr",cn:{tag:"td",colspan:3,style:"width:100%",cn:n}}}},isValidParent:function(){return!0},isItemShrinkWrap:function(n){return(n.shrinkWrap===!0?3:n.shrinkWrap||0)&2},getItemSizePolicy:function(){return{setsWidth:1,setsHeight:0}},beginLayoutCycle:function(n){var t=this.overflowPadderEl;t&&t.setStyle("display","none");n.state.overflowAdjust||(n.state.overflowAdjust=this.lastOverflowAdjust)},calculateOverflow:function(n,t,i){var r=this,b=n.targetContext,g=r.manageOverflow,e=n.state,s=e.overflowAdjust,l,a,o,f,v,y,p,w,k,d,u,h,c;(!g||e.secondPass||r.reserveScrollbar||(h=r.getOverflowXStyle(n)==="auto",c=r.getOverflowYStyle(n)==="auto",t.gotWidth||(h=!1),t.gotHeight||(c=!1),(h||c)&&(y=Ext.getScrollbarSize(),p=n.peek("contentWidth"),w=n.peek("contentHeight"),f=b.getPaddingInfo(),p-=f.width,w-=f.height,k=t.width,d=t.height,u=r.getScrollbarsNeeded(k,d,p,w),e.overflowState=u,typeof i=="number"&&(u&=~i),s={width:h&&u&2?y.width:0,height:c&&u&1?y.height:0},(s.width!==r.lastOverflowAdjust.width||s.height!==r.lastOverflowAdjust.height)&&(r.done=!1,n.invalidate({state:{overflowAdjust:s,overflowState:e.overflowState,secondPass:!0}})))),r.done)&&(o=n.padElContext||(n.padElContext=n.getEl("overflowPadderEl",r)),o&&(u=e.overflowState,l=n.peek("contentWidth"),a=1,u?(f=b.getPaddingInfo(),v=r.scrollRangeFlags,u&2&&v&1&&(a+=f.bottom),u&1&&v&4&&(l+=f.right),o.setProp("display",""),o.setSize(l,a)):o.setProp("display","none")))},completeLayout:function(n){this.lastOverflowAdjust=n.state.overflowAdjust},doRenderPadder:function(n,t){var i=t.$layout,u=i.owner,r=i.getScrollRangeFlags();i.manageOverflow&&r&5&&(n.push('<div id="',u.id,'-overflowPadderEl" ','style="font-size: 1px; height: 1px; margin-top: -1px; position: relative; z-index: -99999'),n.push('"><\/div>'),i.scrollRangeFlags=r)},getContainerSize:function(n,t,i){var r=n.targetContext,l=r.getFrameInfo(),a=r.getPaddingInfo(),e=0,o=0,s=i?null:n.state.overflowAdjust,h,c,u,f;return n.widthModel.shrinkWrap||(++o,u=t?r.getDomProp("width"):r.getProp("width"),h=typeof u=="number",h&&(++e,u-=l.width+a.width,s&&(u-=s.width))),n.heightModel.shrinkWrap||(++o,f=t?r.getDomProp("height"):r.getProp("height"),c=typeof f=="number",c&&(++e,f-=l.height+a.height,s&&(f-=s.height))),{width:u,height:f,needed:o,got:e,gotAll:e==o,gotWidth:h,gotHeight:c}},getOverflowXStyle:function(n){var t=this;return t.overflowXStyle||(t.overflowXStyle=t.owner.scrollFlags.overflowX||n.targetContext.getStyle("overflow-x"))},getOverflowYStyle:function(n){var t=this;return t.overflowYStyle||(t.overflowYStyle=t.owner.scrollFlags.overflowY||n.targetContext.getStyle("overflow-y"))},getScrollRangeFlags:function(){var n=-1;return function(){if(n<0){var t=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"border-box",style:{width:"100px",height:"100px",padding:"10px",overflow:"auto"},children:[{style:{border:"1px solid red",width:"150px",height:"150px",margin:"0 5px 5px 0"}}]}),i=t.dom.scrollHeight,r=t.dom.scrollWidth;n=({175:0,165:1,170:2,160:3}[i]||0)|({175:0,165:4,170:8,160:12}[r]||0);t.remove()}return n}}(),initLayout:function(){var n=this,t=Ext.getScrollbarSize().width;n.callParent();t&&n.manageOverflow&&!n.hasOwnProperty("lastOverflowAdjust")&&(n.owner.scrollFlags.y||n.reserveScrollbar)&&(n.lastOverflowAdjust={width:t,height:0})},setupRenderTpl:function(n){this.callParent(arguments);n.renderPadder=this.doRenderPadder}})