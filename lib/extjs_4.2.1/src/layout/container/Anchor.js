Ext.define("Ext.layout.container.Anchor",{alias:"layout.anchor",extend:"Ext.layout.container.Auto",alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:!0,beginLayoutCycle:function(n){var e=this,t=0,i,r,f,u,o;for(e.callParent(arguments),f=n.childItems,o=f.length,u=0;u<o;++u)if(r=f[u],i=r.target.anchorSpec,i&&(r.widthModel.calculated&&i.right&&(t|=1),r.heightModel.calculated&&i.bottom&&(t|=2),t==3))break;n.anchorDimensions=t;e.sanityCheck(n)},calculateItems:function(n,t){var h=this,c=n.childItems,v=c.length,l=t.gotHeight,a=t.gotWidth,y=t.height,p=t.width,w=(a?1:0)|(l?2:0),e=n.anchorDimensions,o,i,s,r,u,f;if(!e)return!0;for(u=0;u<v;u++)i=c[u],s=i.getMarginInfo(),o=i.target.anchorSpec,a&&i.widthModel.calculated&&(f=o.right(p)-s.width,f=h.adjustWidthAnchor(f,i),i.setWidth(f)),l&&i.heightModel.calculated&&(r=o.bottom(y)-s.height,r=h.adjustHeightAnchor(r,i),i.setHeight(r));return(w&e)===e},sanityCheck:function(n){for(var o=n.widthModel.shrinkWrap,s=n.heightModel.shrinkWrap,f=n.childItems,t,i,r,u=0,e=f.length;u<e;++u)r=f[u],i=r.target,t=i.anchorSpec,t&&(r.widthModel.calculated&&t.right&&o&&Ext.log({level:"warn",msg:"Right anchor on "+i.id+" in shrinkWrap width container"}),r.heightModel.calculated&&t.bottom&&s&&Ext.log({level:"warn",msg:"Bottom anchor on "+i.id+" in shrinkWrap height container"}))},anchorFactory:{offset:function(n){return function(t){return t+n}},ratio:function(n){return function(t){return Math.floor(t*n)}},standard:function(n){return function(t){return t-n}}},parseAnchor:function(n,t,i){if(n&&n!="none"){var r=this.anchorFactory,u;if(this.parseAnchorRE.test(n))return r.standard(i-t);if(n.indexOf("%")!=-1)return r.ratio(parseFloat(n.replace("%",""))*.01);if(u=parseInt(n,10),!isNaN(u))return r.offset(u)}return null},adjustWidthAnchor:function(n){return n},adjustHeightAnchor:function(n){return n},configureItem:function(n){var i=this,t=i.owner,u=n.anchor,f,r,e;i.callParent(arguments);n.anchor||!n.items||Ext.isNumber(n.width)||Ext.isIE6&&Ext.isStrict||(n.anchor=u=i.defaultAnchor);t.anchorSize?typeof t.anchorSize=="number"?r=t.anchorSize:(r=t.anchorSize.width,e=t.anchorSize.height):(r=t.initialConfig.width,e=t.initialConfig.height);u&&(f=u.split(" "),n.anchorSpec={right:i.parseAnchor(f[0],n.initialConfig.width,r),bottom:i.parseAnchor(f[1],n.initialConfig.height,e)})},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(n){var t=n.anchorSpec,u="$",i=this.sizePolicy,r;return t&&(r=this.owner.getSizeModel(),t.right&&!r.width.shrinkWrap&&(i=i.r),t.bottom&&!r.height.shrinkWrap&&(u="b")),i[u]}})