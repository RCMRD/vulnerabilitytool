Ext.define("Ext.layout.container.Auto",{alias:["layout.auto","layout.autocontainer"],extend:"Ext.layout.container.Container",type:"autocontainer",childEls:["outerCt","innerCt","clearEl"],reserveScrollbar:!1,managePadding:!0,manageOverflow:!1,lastOverflowAdjust:{width:0,height:0},renderTpl:["{% if (!(Ext.isIEQuirks || Ext.isIE7m)) { %}",'<span id="{ownerId}-outerCt" style="display:table;">','<div id="{ownerId}-innerCt" style="display:table-cell;height:100%;','vertical-align:top;{%this.renderPadding(out, values)%}" class="{innerCtCls}">',"{%this.renderBody(out,values)%}","<\/div>","<\/span>","{% } else if (values.shrinkWrapWidth) { %}",'<table id="{ownerId}-outerCt" class="'+Ext.plainTableCls+'">',"<tr>",'<td id="{ownerId}-innerCt" style="vertical-align:top;padding:0;','{%this.renderPadding(out, values)%}" class="{innerCtCls}">',"{%this.renderBody(out,values)%}",'<div id="{ownerId}-clearEl" class="',Ext.baseCSSPrefix,'clear"','role="presentation"><\/div>',"<\/td>","<\/tr>","<\/table>","{% } else { %}",'<div id="{ownerId}-outerCt" style="zoom:1;{%this.renderPadding(out, values)%}">','<div id="{ownerId}-innerCt" style="zoom:1;height:100%;" class="{innerCtCls}">',"{%this.renderBody(out,values)%}",'<div id="{ownerId}-clearEl" class="',Ext.baseCSSPrefix,'clear"','role="presentation"><\/div>',"<\/div>","<\/div>","{% values.$layout.isShrinkWrapTpl = false %}","{% } %}"],tableTpl:['<table id="{ownerId}-outerCt" class="'+Ext.plainTableCls+'">',"<tr>",'<td id="{ownerId}-innerCt" style="vertical-align:top;padding:0;','{%this.renderPadding(out, values)%}" class="{innerCtCls}">',"<\/td>","<\/tr>","<\/table>"],isShrinkWrapTpl:!0,beginLayout:function(n){var t=this,i,r,u,f;t.callParent(arguments);t.initContextItems(n);t.isShrinkWrapTpl||(n.widthModel.shrinkWrap&&(f=!0),Ext.isStrict&&Ext.isIE7&&(u=t.getOverflowXStyle(n),(u==="auto"||u==="scroll")&&n.paddingContext.getPaddingInfo().right&&(f=!0)),f&&t.insertTableCt(n));!t.isShrinkWrapTpl&&Ext.isIE7&&Ext.isStrict&&!t.clearElHasPadding&&(i=n.paddingContext.getPaddingInfo().bottom,r=t.getOverflowYStyle(n),i&&(r==="auto"||r==="scroll")&&(t.clearEl.setStyle("height",i),t.clearElHasPadding=!0))},beforeLayoutCycle:function(n){var t=this.owner,i=t.hierarchyState,r=t.hierarchyStateInner;(!i||i.invalid)&&(i=t.getHierarchyState(),r=t.hierarchyStateInner);n.widthModel.shrinkWrap&&this.isShrinkWrapTpl?r.inShrinkWrapTable=!0:delete r.inShrinkWrapTable},beginLayoutCycle:function(n){var t=this,f=t.outerCt,l=t.lastOuterCtWidth||"",a=t.lastOuterCtHeight||"",v=t.lastOuterCtTableLayout||"",s=n.state,e,o,i,r,u,h,c;t.callParent(arguments);i=r=u="";!n.widthModel.shrinkWrap&&t.isShrinkWrapTpl&&(Ext.isIE7m&&Ext.isStrict&&(o=t.getOverflowYStyle(n),(o==="auto"||o==="scroll")&&(h=!0)),h||(i="100%"),c=t.owner.hierarchyStateInner,e=t.getOverflowXStyle(n),u=c.inShrinkWrapTable||e==="auto"||e==="scroll"?"":"fixed");n.heightModel.shrinkWrap||Ext.supports.PercentageHeightOverflowBug||(r="100%");(i!==l||t.hasOuterCtPxWidth)&&(f.setStyle("width",i),t.lastOuterCtWidth=i,t.hasOuterCtPxWidth=!1);u!==v&&(f.setStyle("table-layout",u),t.lastOuterCtTableLayout=u);(r!==a||t.hasOuterCtPxHeight)&&(f.setStyle("height",r),t.lastOuterCtHeight=r,t.hasOuterCtPxHeight=!1);t.hasInnerCtPxHeight&&(t.innerCt.setStyle("height",""),t.hasInnerCtPxHeight=!1);s.overflowAdjust=s.overflowAdjust||t.lastOverflowAdjust},calculate:function(n){var t=this,r=n.state,i=t.getContainerSize(n,!0),u=r.calculatedItems||(r.calculatedItems=t.calculateItems?t.calculateItems(n,i):!0);if(t.setCtSizeIfNeeded(n,i),u&&n.hasDomProp("containerChildrenSizeDone")&&(t.calculateContentSize(n),i.gotAll)){!t.manageOverflow||n.state.secondPass||t.reserveScrollbar||t.calculateOverflow(n,i);return}t.done=!1},calculateContentSize:function(n){var t=this,f=(n.widthModel.shrinkWrap?1:0)|(n.heightModel.shrinkWrap?2:0),i=f&1||undefined,r=f&2||undefined,u=0,e=n.props;i&&(isNaN(e.contentWidth)?++u:i=undefined);r&&(isNaN(e.contentHeight)?++u:r=undefined);u&&(i&&!n.setContentWidth(t.measureContentWidth(n))&&(t.done=!1),r&&!n.setContentHeight(t.measureContentHeight(n))&&(t.done=!1))},calculateOverflow:function(n){var i=this,u,f,e,t,o,s,r;o=i.getOverflowXStyle(n)==="auto";s=i.getOverflowYStyle(n)==="auto";(o||s)&&(e=Ext.getScrollbarSize(),r=n.overflowContext.el.dom,t=0,r.scrollWidth>r.clientWidth&&(t|=1),r.scrollHeight>r.clientHeight&&(t|=2),u=s&&t&2?e.width:0,f=o&&t&1?e.height:0,(u!==i.lastOverflowAdjust.width||f!==i.lastOverflowAdjust.height)&&(i.done=!1,n.invalidate({state:{overflowAdjust:{width:u,height:f},overflowState:t,secondPass:!0}})))},completeLayout:function(n){this.lastOverflowAdjust=n.state.overflowAdjust},doRenderPadding:function(n,t){var u=t.$layout,i=t.$layout.owner,r=i[i.contentPaddingProperty];u.managePadding&&r&&n.push("padding:",i.unitizeBox(r))},finishedLayout:function(){var n=this.innerCt;this.callParent(arguments);(Ext.isIEQuirks||Ext.isIE8m)&&n.repaint();Ext.isOpera&&(n.setStyle("position","relative"),n.dom.scrollWidth,n.setStyle("position",""))},getContainerSize:function(n){var t=this.callParent(arguments),i=n.state.overflowAdjust;return i&&(t.width-=i.width,t.height-=i.height),t},getRenderData:function(){var n=this.owner,t=this.callParent();return(Ext.isIEQuirks||Ext.isIE7m)&&(n.shrinkWrap&1||n.floating&&!n.width)&&(t.shrinkWrapWidth=!0),t},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(n){return n.overflowXStyle||(n.overflowXStyle=this.owner.scrollFlags.overflowX||n.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(n){return n.overflowYStyle||(n.overflowYStyle=this.owner.scrollFlags.overflowY||n.overflowContext.getStyle("overflow-y"))},initContextItems:function(n){var t=this,i=n.target,r=t.owner.customOverflowEl;n.outerCtContext=n.getEl("outerCt",t);n.innerCtContext=n.getEl("innerCt",t);n.overflowContext=r?n.getEl(r):n.targetContext;i[i.contentPaddingProperty]!==undefined&&(n.paddingContext=t.isShrinkWrapTpl?n.innerCtContext:n.outerCtContext)},initLayout:function(){var n=this,t=Ext.getScrollbarSize().width,i=n.owner;n.callParent();t&&n.manageOverflow&&!n.hasOwnProperty("lastOverflowAdjust")&&(i.autoScroll||n.reserveScrollbar)&&(n.lastOverflowAdjust={width:t,height:0})},insertTableCt:function(n){var t=this,e=t.owner,o=0,i,r,u,s,f;for(i=Ext.XTemplate.getTpl(this,"tableTpl"),i.renderPadding=t.doRenderPadding,t.outerCt.dom.removeChild(t.innerCt.dom),r=document.createDocumentFragment(),u=t.innerCt.dom.childNodes,s=u.length;o<s;o++)r.appendChild(u[0]);f=t.getTarget();f.dom.innerHTML=i.apply({$layout:t,ownerId:t.owner.id});f.down("td").dom.appendChild(r);t.applyChildEls(e.el,e.id);t.isShrinkWrapTpl=!0;n.removeEl(t.outerCt);n.removeEl(t.innerCt);t.initContextItems(n)},measureContentHeight:function(n){var t=this.outerCt.getHeight(),i=n.target;return this.managePadding&&i[i.contentPaddingProperty]===undefined&&(t+=n.targetContext.getPaddingInfo().height),t},measureContentWidth:function(n){var i,t,r,u,f;return this.chromeCellMeasureBug&&(i=this.innerCt.dom,t=i.style,r=t.display,r=="table-cell"&&(t.display="",i.offsetWidth,t.display=r)),u=this.outerCt.getWidth(),f=n.target,this.managePadding&&f[f.contentPaddingProperty]===undefined&&(u+=n.targetContext.getPaddingInfo().width),u},setCtSizeIfNeeded:function(n,t){var i=this,e=t.width,r=t.height,o=n.paddingContext.getPaddingInfo(),u=i.getTarget(),s=i.getOverflowXStyle(n),h=i.getOverflowYStyle(n),v=s==="auto"||s==="scroll",y=h==="auto"||h==="scroll",p=Ext.getScrollbarSize(),f=i.isShrinkWrapTpl,b=i.manageOverflow,c,l,a,w;e&&!n.widthModel.shrinkWrap&&(Ext.isIE7m&&Ext.isStrict&&f&&y||Ext.isIEQuirks&&!f&&!v)&&(b||y&&u.dom.scrollHeight>u.dom.clientHeight&&(e-=p.width),n.outerCtContext.setProp("width",e+o.width),i.hasOuterCtPxWidth=!0);r&&!n.heightModel.shrinkWrap&&(Ext.supports.PercentageHeightOverflowBug&&(l=!0),(Ext.isIE8&&Ext.isStrict||Ext.isIE7m&&Ext.isStrict&&f)&&(a=!0,w=!Ext.isIE8),(l||a)&&v&&u.dom.scrollWidth>u.dom.clientWidth&&(r=Math.max(r-p.height,0)),l&&(n.outerCtContext.setProp("height",r+o.height),i.hasOuterCtPxHeight=!0),a&&(w&&(r+=o.height),n.innerCtContext.setProp("height",r),i.hasInnerCtPxHeight=!0));Ext.isIE7&&Ext.isStrict&&!f&&h==="auto"&&(c=s==="auto"?"overflow-x":"overflow-y",u.setStyle(c,"hidden"),u.setStyle(c,"auto"))},setupRenderTpl:function(n){this.callParent(arguments);n.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt}},function(){this.prototype.chromeCellMeasureBug=Ext.isChrome&&Ext.chromeVersion>=26})