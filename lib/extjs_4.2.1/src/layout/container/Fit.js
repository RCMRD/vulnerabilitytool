Ext.define("Ext.layout.container.Fit",{extend:"Ext.layout.container.Container",alternateClassName:"Ext.layout.FitLayout",alias:"layout.fit",itemCls:Ext.baseCSSPrefix+"fit-item",targetCls:Ext.baseCSSPrefix+"layout-fit",type:"fit",defaultMargins:{top:0,right:0,bottom:0,left:0},manageMargins:!0,sizePolicies:{0:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},1:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},2:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},3:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(n,t){var i=t||this.owner.getSizeModel(),r=(i.width.shrinkWrap?0:1)|(i.height.shrinkWrap?0:2);return this.sizePolicies[r]},beginLayoutCycle:function(n,t){var r=this,s=r.lastHeightModel&&r.lastHeightModel.calculated,h=r.lastWidthModel&&r.lastWidthModel.calculated,c=h||s,l=0,a=0,i,v,o,u,w,y,f,e,p,b;for(r.callParent(arguments),c&&n.targetContext.el.dom.tagName.toUpperCase()!="TD"&&(c=h=s=!1),v=n.childItems,w=v.length,o=0;o<w;++o)u=v[o],t&&(i=u.target,f=i.minHeight,e=i.minWidth,(e||f)&&(y=u.marginInfo||u.getMarginInfo(),f+=y.height,e+=y.height,l<f&&(l=f),a<e&&(a=e))),c&&(p=u.el.dom.style,s&&(p.height=""),h&&(p.width=""));t&&(n.maxChildMinHeight=l,n.maxChildMinWidth=a);i=n.target;n.overflowX=!n.widthModel.shrinkWrap&&n.maxChildMinWidth&&i.scrollFlags.x||b;n.overflowY=!n.heightModel.shrinkWrap&&n.maxChildMinHeight&&i.scrollFlags.y||b},calculate:function(n){var t=this,a=n.childItems,v=a.length,i=t.getContainerSize(n),e={length:v,ownerContext:n,targetSize:i},y=n.widthModel.shrinkWrap,p=n.heightModel.shrinkWrap,o=n.overflowX,s=n.overflowY,r,u,h,f,c,l;for((o||s)&&(r=t.getScrollbarsNeeded(o&&i.width,s&&i.height,n.maxChildMinWidth,n.maxChildMinHeight),r&&(u=Ext.getScrollbarSize(),r&1&&(i.height-=u.height),r&2&&(i.width-=u.width))),f=0;f<v;++f)e.index=f,t.fitItem(a[f],e);(p||y)&&(h=n.targetContext.getPaddingInfo(),y&&(s&&!i.gotHeight?t.done=!1:(c=e.contentWidth+h.width,r&2&&(c+=u.width),n.setContentWidth(c)||(t.done=!1))),p&&(o&&!i.gotWidth?t.done=!1:(l=e.contentHeight+h.height,r&1&&(l+=u.height),n.setContentHeight(l)||(t.done=!1))))},fitItem:function(n,t){var i=this;if(n.invalid){i.done=!1;return}t.margins=n.getMarginInfo();t.needed=t.got=0;i.fitItemWidth(n,t);i.fitItemHeight(n,t);t.got!=t.needed&&(i.done=!1)},fitItemWidth:function(n,t){var i,r;t.ownerContext.widthModel.shrinkWrap?(r=n.getProp("width")+t.margins.width,i=t.contentWidth,t.contentWidth=i===undefined?r:Math.max(i,r)):n.widthModel.calculated&&(++t.needed,t.targetSize.gotWidth&&(++t.got,this.setItemWidth(n,t)));this.positionItemX(n,t)},fitItemHeight:function(n,t){var i,r;t.ownerContext.heightModel.shrinkWrap?(r=n.getProp("height")+t.margins.height,i=t.contentHeight,t.contentHeight=i===undefined?r:Math.max(i,r)):n.heightModel.calculated&&(++t.needed,t.targetSize.gotHeight&&(++t.got,this.setItemHeight(n,t)));this.positionItemY(n,t)},positionItemX:function(n,t){var i=t.margins;(t.index||i.left)&&n.setProp("x",i.left);i.width&&n.setProp("margin-right",i.width)},positionItemY:function(n,t){var i=t.margins;(t.index||i.top)&&n.setProp("y",i.top);i.height&&n.setProp("margin-bottom",i.height)},setItemHeight:function(n,t){n.setHeight(t.targetSize.height-t.margins.height)},setItemWidth:function(n,t){n.setWidth(t.targetSize.width-t.margins.width)}})