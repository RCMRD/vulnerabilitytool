Ext.define("Ext.layout.component.field.Field",{extend:"Ext.layout.component.Auto",alias:"layout.field",uses:["Ext.tip.QuickTip","Ext.util.TextMetrics","Ext.util.CSS"],type:"field",naturalSizingProp:"size",beginLayout:function(n){var t=this,i=t.owner;t.callParent(arguments);n.labelStrategy=t.getLabelStrategy();n.errorStrategy=t.getErrorStrategy();n.labelContext=n.getEl("labelEl");n.bodyCellContext=n.getEl("bodyEl");n.inputContext=n.getEl("inputEl");n.errorContext=n.getEl("errorEl");Ext.isIE7m&&Ext.isStrict&&n.inputContext&&(t.ieInputWidthAdjustment=n.inputContext.getPaddingInfo().width+n.inputContext.getBorderInfo().width);n.labelStrategy.prepare(n,i);n.errorStrategy.prepare(n,i)},beginLayoutCycle:function(n){var t=this,i=t.owner,r=n.widthModel,u=i[t.naturalSizingProp],f;t.callParent(arguments);r.shrinkWrap?t.beginLayoutShrinkWrap(n):r.natural?(typeof u!="number"||i.inputWidth?t.beginLayoutShrinkWrap(n):t.beginLayoutFixed(n,f=u*6.5+20,"px"),n.setWidth(f,!1)):t.beginLayoutFixed(n,"100","%")},beginLayoutFixed:function(n,t,i){var r=n.target,u=r.inputEl,f=r.inputWidth;r.el.setStyle("table-layout","fixed");r.bodyEl.setStyle("width",t+i);u&&(f?u.setStyle("width",f+"px"):u.setStyle("width",r.stretchInputElFixed?"100%":""));n.isFixed=!0},beginLayoutShrinkWrap:function(n){var i=n.target,t=i.inputEl,r=i.inputWidth;t&&t.dom&&(t.dom.removeAttribute("size"),r?t.setStyle("width",r+"px"):t.setStyle("width",""));i.el.setStyle("table-layout","auto");i.bodyEl.setStyle("width","")},finishedLayout:function(n){var t=this.owner;this.callParent(arguments);n.labelStrategy.finishedLayout(n,t);n.errorStrategy.finishedLayout(n,t)},calculateOwnerHeightFromContentHeight:function(n,t){return t},measureContentHeight:function(n){return n.el.getHeight()},measureContentWidth:function(n){return n.el.getWidth()},measureLabelErrorHeight:function(n){return n.labelStrategy.getHeight(n)+n.errorStrategy.getHeight(n)},onFocus:function(){this.getErrorStrategy().onFocus(this.owner)},getLabelStrategy:function(){var n=this,t=n.labelStrategies,i=n.owner.labelAlign;return t[i]||t.base},getErrorStrategy:function(){var t=this,i=t.owner,n=t.errorStrategies,r=i.msgTarget;return!i.preventMark&&Ext.isString(r)?n[r]||n.elementId:n.none},labelStrategies:function(){var n={prepare:function(n,t){var r=t.labelCls+"-"+t.labelAlign,i=t.labelEl;i&&i.addCls(r)},getHeight:function(){return 0},finishedLayout:Ext.emptyFn};return{base:n,top:Ext.applyIf({getHeight:function(n){var i=n.labelContext,r=i.props,t=r.height;return t===undefined&&(r.height=t=i.el.getHeight()),t}},n),left:n,right:n}}(),errorStrategies:function(){function i(n){var t=Ext.layout.component.field.Field.tip,i;t&&t.isVisible()&&(i=t.activeTarget,i&&i.el===n.getActionEl().dom&&t.toFront(!0))}var t=Ext.applyIf,r=Ext.emptyFn,u=Ext.baseCSSPrefix+"form-invalid-icon",f,n={prepare:function(n,t){var i=t.errorEl;i&&i.setDisplayed(!1)},getHeight:function(){return 0},onFocus:r,finishedLayout:r};return{none:n,side:t({prepare:function(n,t){var i=t.errorEl,e=t.sideErrorCell,r=t.hasActiveError(),o;f||(f=(o=Ext.getBody().createChild({style:"position:absolute",cls:u})).getWidth(),o.remove());i.addCls(u);i.set({"data-errorqtip":t.getActiveError()||""});t.autoFitErrors?i.setDisplayed(r):i.setVisible(r);e&&t.autoFitErrors&&e.setDisplayed(r);t.bodyEl.dom.colSpan=t.getBodyColspan();Ext.layout.component.field.Field.initTip()},onFocus:i},n),under:t({prepare:function(n,t){var i=t.errorEl,r=Ext.baseCSSPrefix+"form-invalid-under";i.addCls(r);i.setDisplayed(t.hasActiveError())},getHeight:function(n){var t=0,i,r;return n.target.hasActiveError()&&(i=n.errorContext,r=i.props,t=r.height,t===undefined&&(r.height=t=i.el.getHeight())),t}},n),qtip:t({prepare:function(n,t){Ext.layout.component.field.Field.initTip();t.getActionEl().dom.setAttribute("data-errorqtip",t.getActiveError()||"")},onFocus:i},n),title:t({prepare:function(n,t){t.getActionEl().dom.setAttribute("title",t.getActiveError()||"")}},n),elementId:t({prepare:function(n,t){var i=Ext.fly(t.msgTarget);i&&(i.dom.innerHTML=t.getActiveError()||"",i.setDisplayed(t.hasActiveError()))}},n)}}(),statics:{initTip:function(){var n=this.tip;n||(n=this.tip=Ext.create("Ext.tip.QuickTip",{ui:"form-invalid"}),n.tagConfig=Ext.apply({},{attribute:"errorqtip"},n.tagConfig))},destroyTip:function(){var n=this.tip;n&&(n.destroy(),delete this.tip)}}})