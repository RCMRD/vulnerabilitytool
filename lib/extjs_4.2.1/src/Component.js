Ext.define("Ext.Component",{alias:["widget.component","widget.box"],extend:"Ext.AbstractComponent",uses:["Ext.util.DelayedTask","Ext.Layer","Ext.resizer.Resizer","Ext.util.ComponentDragger"],mixins:{floating:"Ext.util.Floating"},statics:{DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g},resizeHandles:"all",floating:!1,defaultAlign:"tl-bl?",toFrontOnShow:!0,hideMode:"display",offsetsCls:Ext.baseCSSPrefix+"hide-offsets",bubbleEvents:[],defaultComponentLayoutType:"autocomponent",constructor:function(n){var t=this;n=n||{};n.initialConfig?(n.isAction&&(t.baseAction=n),n=n.initialConfig):(n.tagName||n.dom||Ext.isString(n))&&(n={applyTo:n,id:n.id||n});t.callParent([n]);t.baseAction&&t.baseAction.addComponent(t)},initComponent:function(){var n=this;if(n.callParent(),n.listeners){n.on(n.listeners);n.listeners=null}n.enableBubble(n.bubbleEvents)},afterRender:function(){var n=this;n.callParent();n.x&&n.y||!(n.pageX||n.pageY)||n.setPagePosition(n.pageX,n.pageY)},setAutoScroll:function(n){var t=this;return t.autoScroll=!!n,t.rendered&&t.getOverflowEl().setStyle(t.getOverflowStyle()),t.updateLayout(),t},setOverflowXY:function(n,t){var i=this,r=arguments.length;return r&&(i.overflowX=n||"",r>1&&(i.overflowY=t||"")),i.rendered&&i.getOverflowEl().setStyle(i.getOverflowStyle()),i.updateLayout(),i},beforeRender:function(){var n=this,i=n.floating,t;return i&&(n.addCls(Ext.baseCSSPrefix+"layer"),t=i.cls,t&&n.addCls(t)),n.callParent()},beforeLayout:function(){this.callParent(arguments);this.floating&&this.onBeforeFloatLayout()},afterComponentLayout:function(){this.callParent(arguments);this.floating&&this.onAfterFloatLayout()},makeFloating:function(n){this.mixins.floating.constructor.call(this,n)},wrapPrimaryEl:function(n){this.floating?this.makeFloating(n):this.callParent(arguments)},initResizable:function(n){var t=this;n=Ext.apply({target:t,dynamic:!1,constrainTo:t.constrainTo||(t.floatParent?t.floatParent.getTargetEl():null),handles:t.resizeHandles},n);n.target=t;t.resizer=new Ext.resizer.Resizer(n)},getDragEl:function(){return this.el},initDraggable:function(){var n=this,i=n.resizer&&n.resizer.el!==n.el?n.resizerComponent=new Ext.Component({el:n.resizer.el,rendered:!0,container:n.container}):n,t=Ext.applyIf({el:i.getDragEl(),constrainTo:n.constrain||n.draggable.constrain?n.constrainTo||(n.floatParent?n.floatParent.getTargetEl():n.container):undefined},n.draggable);(n.constrain||n.constrainDelegate)&&(t.constrain=n.constrain,t.constrainDelegate=n.constrainDelegate);n.dd=new Ext.util.ComponentDragger(i,t)},scrollBy:function(){var n;(n=this.getTargetEl())&&n.dom&&n.scrollBy.apply(n,arguments)},setLoading:function(n,t){var i=this,r={target:i};return i.rendered&&(Ext.destroy(i.loadMask),i.loadMask=null,n===!1||i.collapsed||(Ext.isObject(n)?Ext.apply(r,n):Ext.isString(n)&&(r.msg=n),t&&Ext.applyIf(r,{useTargetEl:!0}),i.loadMask=new Ext.LoadMask(r),i.loadMask.show())),i.loadMask},beforeSetPosition:function(){var i=this,n=i.callParent(arguments),t;return n&&(t=i.adjustPosition(n.x,n.y),n.x=t.x,n.y=t.y),n||null},afterSetPosition:function(n,t){this.onPosition(n,t);this.fireEvent("move",this,n,t)},showAt:function(n,t,i){var r=this;if(!r.rendered&&(r.autoRender||r.floating))return r.x=n,r.y=t,r.show();r.floating?r.setPosition(n,t,i):r.setPagePosition(n,t,i);r.show()},showBy:function(n,t,i){var r=this;return r.floating?(r.floating&&n&&(r.show(),r.rendered&&!r.hidden&&r.alignTo(n,t||r.defaultAlign,i)),r):(Ext.log.warn("Using showBy on a non-floating component"),r)},setPagePosition:function(n,t,i){var r=this,u,f;return Ext.isArray(n)&&(t=n[1],n=n[0]),r.pageX=n,r.pageY=t,r.floating?(r.isContainedFloater()?(f=r.floatParent.getTargetEl().getViewRegion(),Ext.isNumber(n)&&Ext.isNumber(f.left)&&(n-=f.left),Ext.isNumber(t)&&Ext.isNumber(f.top)&&(t-=f.top)):(u=r.el.translateXY(n,t),n=u.x,t=u.y),r.setPosition(n,t,i)):(u=r.el.translateXY(n,t),r.setPosition(u.x,u.y,i)),r},isContainedFloater:function(){return this.floating&&this.floatParent},updateBox:function(n){return this.setSize(n.width,n.height),this.setPagePosition(n.x,n.y),this},getOuterSize:function(){var n=this.el;return{width:n.getWidth()+n.getMargin("lr"),height:n.getHeight()+n.getMargin("tb")}},adjustPosition:function(n,t){var r=this,i;return r.isContainedFloater()&&(i=r.floatParent.getTargetEl().getViewRegion(),n+=i.left,t+=i.top),{x:n,y:t}},getPosition:function(n){var t=this,i,u=t.isContainedFloater(),r;return n===!0&&!u?[t.getLocalX(),t.getLocalY()]:(i=t.getXY(),n===!0&&u&&(r=t.floatParent.getTargetEl().getViewRegion(),i[0]-=r.left,i[1]-=r.top),i)},getId:function(){var n=this,t;return n.id||(t=n.getXType(),t=t?t.replace(Ext.Component.INVALID_ID_CHARS_Re,"-"):Ext.name.toLowerCase()+"-comp",n.id=t+"-"+n.getAutoId()),n.id},show:function(){var n=this,t=n.rendered;return n.hierarchicallyHidden||n.floating&&!t&&n.isHierarchicallyHidden()?(t||n.initHierarchyEvents(),arguments.length>1?(arguments[0]=null,n.pendingShow=arguments):n.pendingShow=!0):t&&n.isVisible()?n.toFrontOnShow&&n.floating&&n.toFront():n.fireEvent("beforeshow",n)!==!1?(n.hidden=!1,delete this.getHierarchyState().hidden,Ext.suspendLayouts(),!t&&(n.autoRender||n.floating)&&(n.doAutoRender(),t=n.rendered),t?(n.beforeShow(),Ext.resumeLayouts(),n.onShow.apply(n,arguments),n.afterShow.apply(n,arguments)):Ext.resumeLayouts(!0)):n.onShowVeto(),n},onShowVeto:Ext.emptyFn,beforeShow:Ext.emptyFn,onShow:function(){var n=this;n.el.show();n.callParent(arguments);n.floating&&(n.maximized?n.fitContainer():n.constrain&&n.doConstrain())},getAnimateTarget:function(n){return n=n||this.animateTarget,n&&(n=n.isComponent?n.getEl():Ext.get(n)),n||null},afterShow:function(n,t,i){var r=this,u=r.el,o,e,f;if(n=r.getAnimateTarget(n),r.ghost||(n=null),n)e={x:u.getX(),y:u.getY(),width:u.dom.offsetWidth,height:u.dom.offsetHeight},o={x:n.getX(),y:n.getY(),width:n.dom.offsetWidth,height:n.dom.offsetHeight},u.addCls(r.offsetsCls),f=r.ghost(),f.el.stopAnimation(),f.setX(-1e4),r.ghostBox=e,f.el.animate({from:o,to:e,listeners:{afteranimate:function(){delete f.componentLayout.lastComponentSize;r.unghost();delete r.ghostBox;u.removeCls(r.offsetsCls);r.onShowComplete(t,i)}}});else r.onShowComplete(t,i);r.fireHierarchyEvent("show")},onShowComplete:function(n,t){var i=this;i.floating&&(i.toFront(),i.onFloatShow());Ext.callback(n,t||i);i.fireEvent("show",i);delete i.hiddenByLayout},hide:function(){var n=this,t;return n.pendingShow&&delete n.pendingShow,n.rendered&&!n.isVisible()||(t=n.fireEvent("beforehide",n)!==!1,(n.hierarchicallyHidden||t)&&(n.hidden=!0,n.getHierarchyState().hidden=!0,n.rendered&&n.onHide.apply(n,arguments))),n},onHide:function(n,t,i){var r=this,u,f,e;n=r.getAnimateTarget(n);r.ghost||(n=null);n&&(e={x:n.getX(),y:n.getY(),width:n.dom.offsetWidth,height:n.dom.offsetHeight},u=r.ghost(),u.el.stopAnimation(),f=r.getSize(),u.el.animate({to:e,listeners:{afteranimate:function(){delete u.componentLayout.lastComponentSize;u.el.hide();u.el.setSize(f);r.afterHide(t,i)}}}));r.el.hide();n||r.afterHide(t,i)},afterHide:function(n,t){var i=this,r=Ext.Element.getActiveElement();i.hiddenByLayout=null;Ext.AbstractComponent.prototype.onHide.call(i);(r===i.el||i.el.contains(r))&&Ext.fly(r).blur();Ext.callback(n,t||i);i.fireEvent("hide",i);i.fireHierarchyEvent("hide")},onDestroy:function(){var n=this;n.rendered&&Ext.destroy(n.dd,n.resizer,n.proxy,n.proxyWrap,n.resizerComponent);delete n.focusTask;n.callParent()},deleteMembers:function(){for(var t=arguments,i=t.length,n=0;n<i;++n)delete this[t[n]]},focus:function(n,t,i,r){var u=this,f,e,o;if(t)return u.focusTask||(Ext.Component.prototype.focusTask=new Ext.util.DelayedTask(u.focus)),u.focusTask.delay(Ext.isNumber(t)?t:10,null,u,[n,!1,i,r]),u;if(u.focusTask&&u.focusTask.cancel(),u.rendered&&!u.isDestroyed&&u.isVisible(!0)&&(f=u.getFocusEl())){if(f.isComponent)return f.focus(n,t);(e=f.dom)&&(f.needsTabIndex()&&(e.tabIndex=-1),u.floating&&(o=u.container.dom.scrollTop),f.focus(),n===!0&&e.select(),Ext.callback(i,r));u.floating&&(u.toFront(!0),o!==undefined&&(u.container.dom.scrollTop=o))}return u},cancelFocus:function(){var n=this.focusTask;n&&n.cancel()},blur:function(){var n;return this.rendered&&(n=this.getFocusEl())&&n.blur(),this},getEl:function(){return this.el},getResizeEl:function(){return this.el},getPositionEl:function(){return this.el},getActionEl:function(){return this.el},getVisibilityEl:function(){return this.el},getRefOwner:function(){return this.ownerCt||this.floatParent},getBubbleTarget:function(){return this.getRefOwner()},getContentTarget:function(){return this.el},cloneConfig:function(n){n=n||{};var r=n.id||Ext.id(),t=Ext.applyIf(n,this.initialConfig),i;return t.id=r,i=Ext.getClass(this),new i(t)},getXType:function(){return this.self.xtype},findParentBy:function(n){for(var t=this.getBubbleTarget();t&&!n(t,this);t=t.getBubbleTarget());return t||null},findParentByType:function(n){return Ext.isFunction(n)?this.findParentBy(function(t){return t.constructor===n}):this.up(n)},bubble:function(n,t,i){for(var r=this;r;){if(n.apply(t||r,i||[r])===!1)break;r=r.getBubbleTarget()}return this},getProxy:function(){var n=this,t;return n.proxy||(t=Ext.getBody(),n.proxy=n.el.createProxy(Ext.baseCSSPrefix+"proxy-el",t,!0)),n.proxy},fireHierarchyEvent:function(n){this.hierarchyEventSource.fireEvent(n,this)},onAdded:function(){this.callParent(arguments);this.hierarchyEventSource.hasListeners.added&&this.fireHierarchyEvent("added")}},function(){this.hierarchyEventSource=this.prototype.hierarchyEventSource=new Ext.util.Observable({events:{hide:!0,show:!0,collapse:!0,expand:!0,added:!0}})})