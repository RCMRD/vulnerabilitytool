Ext.define("Ext.Shadow",{requires:["Ext.ShadowPool"],localXYNames:{get:"getLocalXY",set:"setLocalXY"},constructor:function(n){var r=this,u,t,i;Ext.apply(r,n);Ext.isString(r.mode)||(r.mode=r.defaultMode);t=r.offset;i=Math.floor(t/2);r.opacity=50;switch(r.mode.toLowerCase()){case"drop":u=Ext.supports.CSS3BoxShadow?{t:t,l:t,h:-t,w:-t}:{t:-i,l:-i,h:-i,w:-i};break;case"sides":u=Ext.supports.CSS3BoxShadow?{t:t,l:0,h:-t,w:0}:{t:-(1+i),l:1+i-2*t,h:-1,w:i-1};break;case"frame":u=Ext.supports.CSS3BoxShadow?{t:0,l:0,h:0,w:0}:{t:1+i-2*t,l:1+i-2*t,h:t-i-1,w:t-i-1};break;case"bottom":u=Ext.supports.CSS3BoxShadow?{t:t,l:0,h:-t,w:0}:{t:t,l:0,h:0,w:0}}r.adjusts=u},getShadowSize:function(){var n=this,t=n.el?n.offset:0,i=[t,t,t,t],r=n.mode.toLowerCase();return n.el&&r!=="frame"&&(i[0]=0,r=="drop"&&(i[3]=0)),i},offset:4,defaultMode:"drop",boxShadowProperty:function(){var n="boxShadow",t=document.documentElement.style;return"boxShadow"in t||("WebkitBoxShadow"in t?n="WebkitBoxShadow":"MozBoxShadow"in t&&(n="MozBoxShadow")),n}(),show:function(n){var t=this,r,i;n=Ext.get(n);r=parseInt(n.getStyle("z-index"),10)-1||0;i=n[t.localXYNames.get]();t.el||(t.el=Ext.ShadowPool.pull(),t.el.dom.style.position=t.fixed?"fixed":"",t.el.dom.nextSibling!=n.dom&&t.el.insertBefore(n));t.el.setStyle("z-index",t.zIndex||r);Ext.isIE&&!Ext.supports.CSS3BoxShadow&&(t.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+t.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+t.offset+")");t.realign(i[0],i[1],n.dom.offsetWidth,n.dom.offsetHeight);t.el.dom.style.display="block"},isVisible:function(){return this.el?!0:!1},realign:function(n,t,i,r){if(this.el){var f=this.adjusts,s=this.el,u=s.dom.style,h,c,e,o;s[this.localXYNames.set](n+f.l,t+f.t);h=Math.max(i+f.w,0);c=Math.max(r+f.h,0);e=h+"px";o=c+"px";(u.width!=e||u.height!=o)&&(u.width=e,u.height=o,Ext.supports.CSS3BoxShadow&&(u[this.boxShadowProperty]="0 0 "+(this.offset+2)+"px #888"))}},hide:function(){var n=this;n.el&&(n.el.dom.style.display="none",Ext.ShadowPool.push(n.el),delete n.el)},setZIndex:function(n){this.zIndex=n;this.el&&this.el.setStyle("z-index",n)},setOpacity:function(n){this.el&&(Ext.isIE&&!Ext.supports.CSS3BoxShadow&&(n=Math.floor(n*50)/100),this.opacity=n,this.el.setOpacity(n))}})