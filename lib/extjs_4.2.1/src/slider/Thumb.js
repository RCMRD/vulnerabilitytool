Ext.define("Ext.slider.Thumb",{requires:["Ext.dd.DragTracker","Ext.util.Format"],topZIndex:1e4,constructor:function(n){var t=this;Ext.apply(t,n||{},{cls:Ext.baseCSSPrefix+"slider-thumb",constrain:!1});t.callParent([n])},render:function(){var n=this;n.el=n.slider.innerEl.insertFirst(n.getElConfig());n.onRender()},onRender:function(){this.disabled&&this.disable();this.initEvents()},getElConfig:function(){var t=this,n=t.slider,i={};return i[n.vertical?"bottom":n.horizontalProp]=n.calculateThumbPosition(n.normalizeValue(t.value))+"%",{style:i,id:this.id,cls:this.cls}},move:function(n,t){var e=this,r=e.el,o=e.slider,i=o.vertical?"bottom":o.horizontalProp,u,f;n+="%";t?(u={},u[i]=n,Ext.supports.GetPositionPercentage||(f={},f[i]=r.dom.style[i]),new Ext.fx.Anim({target:r,duration:350,from:f,to:u})):r.dom.style[i]=n},bringToFront:function(){this.el.setStyle("zIndex",this.topZIndex)},sendToBack:function(){this.el.setStyle("zIndex","")},enable:function(){var n=this;n.disabled=!1;n.el&&n.el.removeCls(n.slider.disabledCls)},disable:function(){var n=this;n.disabled=!0;n.el&&n.el.addCls(n.slider.disabledCls)},initEvents:function(){var n=this,t=n.el;n.tracker=new Ext.dd.DragTracker({onBeforeStart:Ext.Function.bind(n.onBeforeDragStart,n),onStart:Ext.Function.bind(n.onDragStart,n),onDrag:Ext.Function.bind(n.onDrag,n),onEnd:Ext.Function.bind(n.onDragEnd,n),tolerance:3,autoStart:300,overCls:Ext.baseCSSPrefix+"slider-thumb-over"});n.tracker.initEl(t)},onBeforeDragStart:function(){return this.disabled?!1:(this.slider.promoteThumb(this),!0)},onDragStart:function(n){var t=this,i=t.slider;i.onDragStart(t,n);t.el.addCls(Ext.baseCSSPrefix+"slider-thumb-drag");t.dragging=t.slider.dragging=!0;t.dragStartValue=t.value;i.fireEvent("dragstart",i,n,t)},onDrag:function(n){var i=this,r=i.slider,e=i.index,t=i.getValueFromTracker(),u,f;t!==undefined&&(i.constrain&&(u=r.thumbs[e+1],f=r.thumbs[e-1],f!==undefined&&t<=f.value&&(t=f.value),u!==undefined&&t>=u.value&&(t=u.value)),r.setValue(e,t,!1),r.fireEvent("drag",r,n,i))},getValueFromTracker:function(){var n=this.slider,t=n.getTrackpoint(this.tracker.getXY());if(t!==undefined)return n.reversePixelValue(t)},onDragEnd:function(n){var t=this,i=t.slider,r=t.value;i.onDragEnd(t,n);t.el.removeCls(Ext.baseCSSPrefix+"slider-thumb-drag");t.dragging=i.dragging=!1;i.fireEvent("dragend",i,n);t.dragStartValue!=r&&i.fireEvent("changecomplete",i,r,t)},destroy:function(){Ext.destroy(this.tracker)}})