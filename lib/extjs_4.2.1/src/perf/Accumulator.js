Ext.define("Ext.perf.Accumulator",function(){function u(n,t){n.sum+=t;n.min=Math.min(n.min,t);n.max=Math.max(n.max,t)}function o(i){var f=i?i:n()-this.time,e=this,r=e.accum;++r.count;--r.depth||u(r.total,f);u(r.pure,f-e.childTime);t=e.parent;t&&(++t.accum.childCount,t.childTime+=f)}function f(){return{min:Number.MAX_VALUE,max:0,sum:0}}function s(n,t){return function(){var i=n.enter(),r=t.apply(this,arguments);return i.leave(),r}}function e(n,t,i,r){var u={avg:0,min:r.min,max:r.max,sum:0};return n&&(i=i||0,u.sum=r.sum-t*i,u.avg=u.sum/n),u}var t=null,i=Ext.global.chrome,r,n=function(){n=function(){return(new Date).getTime()};var t,r;if(Ext.isChrome&&i&&i.Interval)t=new i.Interval,t.start(),n=function(){return t.microseconds()/1e3};else if(window.ActiveXObject)try{r=new ActiveXObject("SenchaToolbox.Toolbox");Ext.senchaToolbox=r;n=function(){return r.milliseconds}}catch(u){}else Date.now&&(n=Date.now);return Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=n,n()};return{constructor:function(n){var t=this;t.count=t.childCount=t.depth=t.maxDepth=0;t.pure=f();t.total=f();t.name=n},statics:{getTimestamp:n},format:function(n){r||(r=new Ext.XTemplate('{name} - {count} call(s)<tpl if="count"><tpl if="childCount"> ({childCount} children)<\/tpl><tpl if="depth - 1"> ({depth} deep)<\/tpl><tpl for="times">, {type}: {[this.time(values.sum)]} msec (avg={[this.time(values.sum / parent.count)]})<\/tpl><\/tpl>',{time:function(n){return Math.round(n*100)/100}}));var t=this.getData(n);return t.name=this.name,t.pure.type="Pure",t.total.type="Total",t.times=[t.pure,t.total],r.apply(t)},getData:function(n){var t=this;return{count:t.count,childCount:t.childCount,depth:t.maxDepth,pure:e(t.count,t.childCount,n,t.pure),total:e(t.count,t.childCount,n,t.total)}},enter:function(){var i=this,r={accum:i,leave:o,childTime:0,parent:t};return++i.depth,i.maxDepth<i.depth&&(i.maxDepth=i.depth),t=r,r.time=n(),r},monitor:function(n,t,i){var r=this.enter();i?n.apply(t,i):n.call(t);r.leave()},report:function(){Ext.log(this.format())},tap:function(n,t){var o=this,l=typeof t=="string"?[t]:t,r,f,i,h,e,u,c,a=function(){if(typeof n=="string")for(r=Ext.global,h=n.split("."),i=0,e=h.length;i<e;++i)r=r[h[i]];else r=n;for(i=0,e=l.length;i<e;++i)u=l[i],f=u.charAt(0)=="!",f?u=u.substring(1):f=!(u in r.prototype),c=f?r:r.prototype,c[u]=s(o,c[u])};Ext.ClassManager.onCreated(a,o,n);return o}}}(),function(){Ext.perf.getTimestamp=this.getTimestamp})