Ext.define("Ext.perf.Monitor",{singleton:!0,alternateClassName:"Ext.Perf",requires:["Ext.perf.Accumulator"],constructor:function(){this.accumulators=[];this.accumulatorsByName={}},calibrate:function(){var n=new Ext.perf.Accumulator("$"),f=n.total,t=Ext.perf.Accumulator.getTimestamp,i=0,r,u,e=t();do r=n.enter(),r.leave(),++i;while(f.sum<100);return u=t(),(u-e)/i},get:function(n){var i=this,t=i.accumulatorsByName[n];return t||(i.accumulatorsByName[n]=t=new Ext.perf.Accumulator(n),i.accumulators.push(t)),t},enter:function(n){return this.get(n).enter()},monitor:function(n,t,i){this.get(n).monitor(t,i)},report:function(){var n=this,t=n.accumulators,i=n.calibrate();t.sort(function(n,t){return n.name<t.name?-1:t.name<n.name?1:0});n.updateGC();Ext.log("Calibration: "+Math.round(i*100)/100+" msec/sample");Ext.each(t,function(n){Ext.log(n.format(i))})},getData:function(n){var t={},i=this.accumulators;return Ext.each(i,function(i){(n||i.count)&&(t[i.name]=i.getData())}),t},reset:function(){Ext.each(this.accumulators,function(n){var t=n;t.count=t.childCount=t.depth=t.maxDepth=0;t.pure={min:Number.MAX_VALUE,max:0,sum:0};t.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var t=this.accumulatorsByName.GC,i=Ext.senchaToolbox,n;t&&(t.count=i.garbageCollectionCounter||0,t.count&&(n=t.pure,t.total.sum=n.sum=i.garbageCollectionMilliseconds,n.min=n.max=n.sum/t.count,n=t.total,n.min=n.max=n.sum/t.count))},watchGC:function(){Ext.perf.getTimestamp();var n=Ext.senchaToolbox;n&&(this.get("GC"),n.watchGarbageCollector(!1))},setup:function(n){n||(n={render:{"Ext.AbstractComponent":"render"},layout:{"Ext.layout.Context":"run"}});this.currentConfig=n;var t,i,u,r,f;for(t in n)if(n.hasOwnProperty(t)){i=n[t];u=Ext.Perf.get(t);for(r in i)i.hasOwnProperty(r)&&(f=i[r],u.tap(r,f))}this.watchGC()}})