Ext.define("Ext.ComponentQuery",{singleton:!0,requires:["Ext.ComponentManager","Ext.dom.Query"]},function(){var n=this,t=Ext.dom.Query.operators,o=/(\d*)n\+?(\d*)/,s=/\D/,h="var r = [],i = 0,it = items,l = it.length,c;for (; i < l; i++) {c = it[i];if (c.{0}) {r.push(c);}}return r;",i=function(n,t){return t.method.apply(this,[n].concat(t.args))},r=function(n,t){for(var i=[],r=0,f=n.length,u,e=t!==">";r<f;r++)u=n[r],u.getRefItems&&(i=i.concat(u.getRefItems(e)));return i},c=function(n){for(var r=[],i=0,u=n.length,t;i<u;i++)for(t=n[i];!!(t=t.getRefOwner());)r.push(t);return r},u=function(n,t,i){if(t==="*")return n.slice();for(var f=[],r=0,e=n.length,u;r<e;r++)u=n[r],u.isXType(t,i)&&f.push(u);return f},l=function(n,t){for(var u=[],i=0,f=n.length,r;i<f;i++)r=n[i],r.hasCls(t)&&u.push(r);return u},a=function(n,i,r,u){var o=[],h=0,v=n.length,c,l,e,f,s,a;for(i.charAt(0)==="@"&&(c=!0,i=i.substr(1)),i.charAt(0)==="?"&&(c=!0,l=!0,i=i.substr(1));h<v;h++)if(e=n[h],!c||e.hasOwnProperty(i))if(f=e[i],l)o.push(e);else if(r==="~="){if(f)for(Ext.isArray(f)||(f=f.split(" ")),s=0,a=f.length;s<a;s++)if(t[r](Ext.coerce(f[s],u),u)){o.push(e);break}}else(u?t[r](Ext.coerce(f,u),u):!!e[i])&&o.push(e);return o},f=function(n,t){for(var u=[],i=0,f=n.length,r;i<f;i++)r=n[i],r.getItemId()===t&&u.push(r);return u},v=function(t,i,r){return n.pseudos[i](t,r)},y=/^(\s?([>\^])\s?|\s|$)/,p=/^(#)?([\w\-]+|\*)(?:\((true|false)\))?/,e=[{re:/^\.([\w\-]+)(?:\((true|false)\))?/,method:u},{re:/^(?:\[((?:@|\?)?[\w\-\$]*[^\^\$\*~%!])\s?(?:(=|.=)\s?['"]?(.*?)["']?)?\])/,method:a},{re:/^#([\w\-]+)/,method:f},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:v},{re:/^(?:\{([^\}]+)\})/,method:h}];n.Query=Ext.extend(Object,{constructor:function(n){n=n||{};Ext.apply(this,n)},execute:function(n){var e=this.operations,f=0,o=e.length,u,t;for(n?Ext.isIterable(n)?t=n:n.isMixedCollection&&(t=n.items):t=Ext.ComponentManager.all.getArray();f<o;f++)if(u=e[f],t=u.mode==="^"?c(t||[n]):u.mode?r(t||[n],u.mode):i(t||r([n]),u),f===o-1)return t;return[]},is:function(n){var u=this.operations,t=Ext.isArray(n)?n:[n],e=t.length,o=u[u.length-1],f,r;if(t=i(t,o),t.length===e){if(u.length>1)for(r=0,f=t.length;r<f;r++)if(Ext.Array.indexOf(this.execute(),t[r])===-1)return!1;return!0}return!1}});Ext.apply(this,{cache:{},pseudos:{not:function(n,t){for(var f=Ext.ComponentQuery,i=0,e=n.length,u=[],o=-1,r;i<e;++i)r=n[i],f.is(r,t)||(u[++o]=r);return u},first:function(n){var t=[];return n.length>0&&t.push(n[0]),t},last:function(n){var t=n.length,i=[];return t>0&&i.push(n[t-1]),i},focusable:function(n){for(var u=n.length,r=[],t=0,i;t<u;t++)i=n[t],i.isFocusable()&&r.push(i);return r},"nth-child":function(n,t){for(var r=[],h=o.exec(t=="even"&&"2n"||t=="odd"&&"2n+1"||!s.test(t)&&"n+"+t||t),c=(h[1]||1)-0,u=h[2]-0,f,e,i=0;f=n[i];i++)e=i+1,c==1?(u==0||e==u)&&r.push(f):(e+u)%c==0&&r.push(f);return r}},query:function(n,t){for(var f=n.split(","),e=f.length,i=0,r=[],o=[],s={},h,c,u;i<e;i++)n=Ext.String.trim(f[i]),h=this.cache[n]||(this.cache[n]=this.parse(n)),r=r.concat(h.execute(t));if(e>1){for(c=r.length,i=0;i<c;i++)u=r[i],s[u.id]||(o.push(u),s[u.id]=!0);r=o}return r},is:function(n,t){if(!t)return!0;for(var r=t.split(","),f=r.length,i=0,u;i<f;i++)if(t=Ext.String.trim(r[i]),u=this.cache[t]||(this.cache[t]=this.parse(t)),u.is(n))return!0;return!1},parse:function(t){for(var r=[],v=e.length,w,i,a,o,s,h,c,b;t&&w!==t;){for(w=t,i=t.match(p),i&&(a=i[1],a==="#"?r.push({method:f,args:[Ext.String.trim(i[2])]}):a==="."?r.push({method:l,args:[Ext.String.trim(i[2])]}):r.push({method:u,args:[Ext.String.trim(i[2]),Boolean(i[3])]}),t=t.replace(i[0],""));!(o=t.match(y));)for(h=0;t&&h<v;h++){if(c=e[h],s=t.match(c.re),b=c.method,s){r.push({method:Ext.isString(c.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[b].concat(s.slice(1)))):c.method,args:s.slice(1)});t=t.replace(s[0],"");break}h===v-1&&Ext.Error.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}o[1]&&(r.push({mode:o[2]||o[1]}),t=t.replace(o[0],""))}return new n.Query({operations:r})}})})