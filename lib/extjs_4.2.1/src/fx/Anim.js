Ext.define("Ext.fx.Anim",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.fx.Manager","Ext.fx.Animator","Ext.fx.Easing","Ext.fx.CubicBezier","Ext.fx.PropertyHandler"],isAnimation:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:!1,running:!1,paused:!1,iterations:1,alternate:!1,currentIteration:0,startTime:0,frameCount:0,constructor:function(n){var t=this,i;if(n=n||{},n.keyframes)return new Ext.fx.Animator(n);Ext.apply(t,n);t.from===undefined&&(t.from={});t.propHandlers={};t.config=n;t.target=Ext.fx.Manager.createTarget(t.target);t.easingFn=Ext.fx.Easing[t.easing];t.target.dynamic=t.dynamic;t.easingFn||(t.easingFn=String(t.easing).match(t.bezierRE),t.easingFn&&t.easingFn.length==5&&(i=t.easingFn,t.easingFn=Ext.fx.CubicBezier.cubicBezier(+i[1],+i[2],+i[3],+i[4])));t.id=Ext.id(null,"ext-anim-");t.addEvents("beforeanimate","afteranimate","lastframe");t.mixins.observable.constructor.call(t);Ext.fx.Manager.addAnim(t)},setAttr:function(n,t){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,n,t)},initAttrs:function(){var t=this,o=t.from,i=t.to,s=t.initialFrom||{},u={},f,r,e;for(var n in i)i.hasOwnProperty(n)&&(f=t.target.getAttr(n,o[n]),r=i[n],e=Ext.fx.PropertyHandler[n]?t.propHandlers[n]=Ext.fx.PropertyHandler[n]:Ext.isObject(r)?t.propHandlers[n]=Ext.fx.PropertyHandler.object:t.propHandlers[n]=Ext.fx.PropertyHandler.defaultHandler,u[n]=e.get(f,r,t.damper,s[n],n));t.currentAttrs=u},start:function(n){var t=this,i=t.delay,r=t.delayStart,u;if(i)if(r){if(u=n-r,u<i)return;n=new Date(r.getTime()+i)}else{t.delayStart=n;return}t.fireEvent("beforeanimate",t)!==!1&&(t.startTime=n,t.paused||t.currentAttrs||t.initAttrs(),t.running=!0,t.frameCount=0)},runAnim:function(n){var t=this,u=t.currentAttrs,r=t.duration,h=t.easingFn,c=t.propHandlers,f={},e,o,i,s;n>=r&&(n=r,s=!0);t.reverse&&(n=r-n);for(i in u)u.hasOwnProperty(i)&&(o=u[i],e=s?1:h(n/r),f[i]=c[i].set(o,e));return t.frameCount++,f},lastFrame:function(){var n=this,i=n.iterations,t=n.currentIteration;t++;t<i?(n.alternate&&(n.reverse=!n.reverse),n.startTime=new Date,n.currentIteration=t,n.paused=!1):(n.currentIteration=0,n.end(),n.fireEvent("lastframe",n,n.startTime))},endWasCalled:0,end:function(){if(!this.endWasCalled++){var n=this;n.startTime=0;n.paused=!1;n.running=!1;Ext.fx.Manager.removeAnim(n);n.fireEvent("afteranimate",n,n.startTime);Ext.callback(n.callback,n.scope,[n,n.startTime])}},isReady:function(){return this.paused===!1&&this.running===!1&&this.iterations>0},isRunning:function(){return this.paused===!1&&this.running===!0&&this.isAnimator!==!0}});Ext.enableFx=!0