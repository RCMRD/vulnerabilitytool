Ext.define("Ext.fx.PropertyHandler",{requires:["Ext.draw.Draw"],statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(n,t,i,r,u){i=typeof i=="number"?i:1;var o=this.unitRE,f=o.exec(n),s,e;return f&&(n=f[1],e=f[2],this.scrollRE.test(u)||e||!this.pixelDefaultsRE.test(u)||(e="px")),n=+n||0,f=o.exec(t),f&&(t=f[1],e=f[2]||e),t=+t||0,s=r!=null?r:n,{from:n,delta:(t-s)*i,units:e}},get:function(n,t,i,r,u){for(var l=n.length,o=[],s,h,e,c,f=0;f<l;f++)if(r&&(s=r[f][1].from),Ext.isArray(n[f][1])&&Ext.isArray(t)){for(h=[],e=0,c=n[f][1].length;e<c;e++)h.push(this.computeDelta(n[f][1][e],t[e],i,s,u));o.push([n[f][0],h])}else o.push([n[f][0],this.computeDelta(n[f][1],t,i,s,u)]);return o},set:function(n,t){for(var s=n.length,f=[],i,e,o,u,r=0;r<s;r++)if(i=n[r][1],Ext.isArray(i)){for(e=[],u=0,o=i.length;u<o;u++)e.push(i[u].from+i[u].delta*t+(i[u].units||0));f.push([n[r][0],e])}else f.push([n[r][0],i.from+i.delta*t+(i.units||0)]);return f}},stringHandler:{computeDelta:function(n,t){return{from:n,delta:t}},get:function(n,t,i,r,u){for(var o=n.length,e=[],s,f=0;f<o;f++)e.push([n[f][0],this.computeDelta(n[f][1],t,i,s,u)]);return e},set:function(n){for(var u=n.length,i=[],r,t=0;t<u;t++)r=n[t][1],i.push([n[t][0],r.delta]);return i}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(n,t){t=typeof t=="number"?t:1;for(var f=!1,e=[this.hexRE,this.rgbRE,this.hex3RE],s=e.length,i,u,o,r=0;r<s;r++)if(o=e[r],u=r%2==0?16:10,i=o.exec(n),i&&i.length===4){r===2&&(i[1]+=i[1],i[2]+=i[2],i[3]+=i[3]);f={red:parseInt(i[1],u),green:parseInt(i[2],u),blue:parseInt(i[3],u)};break}return f||n},computeDelta:function(n,t,i,r){n=this.parseColor(n);t=this.parseColor(t,i);var u=r?r:n,f=typeof u,e=typeof t;return f=="string"||f=="undefined"||e=="string"||e=="undefined"?t||u:{from:n,delta:{red:Math.round((t.red-u.red)*i),green:Math.round((t.green-u.green)*i),blue:Math.round((t.blue-u.blue)*i)}}},get:function(n,t,i,r){for(var o=n.length,f=[],e,u=0;u<o;u++)r&&(e=r[u][1].from),f.push([n[u][0],this.computeDelta(n[u][1],t,i,e)]);return f},set:function(n,t){for(var s=n.length,e=[],i,o,u,f,r=0;r<s;r++)if(i=n[r][1],i){if(u=i.from,f=i.delta,i=typeof i=="object"&&"red"in i?"rgb("+i.red+", "+i.green+", "+i.blue+")":i,i=typeof i=="object"&&i.length?i[0]:i,typeof i=="undefined")return[];o=typeof i=="string"?i:"rgb("+[(u.red+Math.round(f.red*t))%256,(u.green+Math.round(f.green*t))%256,(u.blue+Math.round(f.blue*t))%256].join(",")+")";e.push([n[r][0],o])}return e}},object:{interpolate:function(n,t){t=typeof t=="number"?t:1;var i={};for(var r in n)i[r]=parseFloat(n[r])*t;return i},computeDelta:function(n,t,i,r){n=this.interpolate(n);t=this.interpolate(t,i);var e=r?r:n,f={};for(var u in t)f[u]=t[u]-e[u];return{from:n,delta:f}},get:function(n,t,i,r){for(var o=n.length,f=[],e,u=0;u<o;u++)r&&(e=r[u][1].from),f.push([n[u][0],this.computeDelta(n[u][1],t,i,e)]);return f},set:function(n,t){for(var h=n.length,e=[],o={},u,s,f,r,i=0;i<h;i++){f=n[i][1];u=f.from;s=f.delta;for(r in u)o[r]=u[r]+s[r]*t;e.push([n[i][0],o])}return e}},path:{computeDelta:function(n,t,i,r){i=typeof i=="number"?i:1;var u;return n=+n||0,t=+t||0,u=r!=null?r:n,{from:n,delta:(t-u)*i}},forcePath:function(n){return Ext.isArray(n)||Ext.isArray(n[0])||(n=Ext.draw.Draw.parsePathString(n)),n},get:function(n,t,i,r){for(var h=this.forcePath(t),l=[],p=n.length,a,v,e,y,u,o,c,f,s=0;s<p;s++){for(f=this.forcePath(n[s][1]),e=Ext.draw.Draw.interpolatePaths(f,h),f=e[0],h=e[1],a=f.length,c=[],u=0;u<a;u++){for(e=[f[u][0]],v=f[u].length,o=1;o<v;o++)y=r&&r[0][1][u][o].from,e.push(this.computeDelta(f[u][o],h[u][o],i,y));c.push(e)}l.push([n[s][0],c])}return l},set:function(n,t){for(var l=n.length,s=[],i,f,e,o,r,h,c,u=0;u<l;u++){for(r=n[u][1],e=[],h=r.length,i=0;i<h;i++){for(o=[r[i][0]],c=r[i].length,f=1;f<c;f++)o.push(r[i][f].from+r[i][f].delta*t);e.push(o.join(","))}s.push([n[u][0],e.join(",")])}return s}}}},function(){for(var t=["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],r=t.length,n=0,i;n<r;n++)i=t[n],this[i]=this.color;for(t=["cursor"],r=t.length,n=0;n<r;n++)i=t[n],this[i]=this.stringHandler})