Ext.define("Ext.data.writer.Writer",{alias:"writer.base",alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],writeAllFields:!0,nameProperty:"name",writeRecordId:!0,isWriter:!0,constructor:function(n){Ext.apply(this,n)},write:function(n){for(var i=n.operation,r=i.records||[],f=r.length,t=0,u=[];t<f;t++)u.push(this.getRecordData(r[t],i));return this.writeRecords(n,u)},getRecordData:function(n,t){var s=n.phantom===!0,v=this.writeAllFields||s,f=n.fields,h=f.items,r={},c=n.clientIdProperty,e,i,o,l,u,a;if(v)for(a=h.length,u=0;u<a;u++)i=h[u],i.persist&&this.writeValue(r,i,n);else{e=n.getChanges();for(o in e)e.hasOwnProperty(o)&&(i=f.get(o),i.persist&&this.writeValue(r,i,n))}return s?c&&t&&t.records.length>1&&(r[c]=n.internalId):this.writeRecordId&&(l=f.get(n.idProperty)[this.nameProperty]||n.idProperty,r[l]=n.getId()),r},writeValue:function(n,t,i){var u=t[this.nameProperty],f=this.dateFormat||t.dateWriteFormat||t.dateFormat,r=i.get(t.name);u==null&&(u=t.name);n[u]=t.serialize?t.serialize(r,i):t.type===Ext.data.Types.DATE&&f&&Ext.isDate(r)?Ext.Date.format(r,f):r}})