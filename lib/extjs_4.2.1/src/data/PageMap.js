Ext.define("Ext.data.PageMap",{extend:"Ext.util.LruCache",clear:function(){var n=this;n.pageMapGeneration=(n.pageMapGeneration||0)+1;n.callParent(arguments)},forEach:function(n,t){for(var f=this,r=Ext.Object.getKeys(f.map),s=r.length,u,e,o,h,i=0;i<s;i++)r[i]=Number(r[i]);for(Ext.Array.sort(r),t=t||f,i=0;i<s;i++)for(e=r[i],o=f.getPage(e),h=o.length,u=0;u<h;u++)if(n.call(t,o[u],(e-1)*f.pageSize+u)===!1)return},findBy:function(n,t){var i=this,r=null;return t=t||i,i.forEach(function(i,u){if(n.call(t,i,u))return r=i,!1}),r},findIndexBy:function(n,t){var i=this,r=-1;return t=t||i,i.forEach(function(i,u){if(n.call(t,i))return r=u,!1}),r},getPageFromRecordIndex:function(){return Ext.data.Store.prototype.getPageFromRecordIndex.apply(this,arguments)},addAll:function(n){this.getCount()&&Ext.Error.raise("Cannot addAll to a non-empty PageMap");this.addPage(1,n)},addPage:function(n,t){for(var i=this,f=n+Math.floor((t.length-1)/i.pageSize),u,r=0;n<=f;n++,r+=i.pageSize)u=Ext.Array.slice(t,r,r+i.pageSize),i.add(n,u),i.fireEvent("pageAdded",n,u)},getCount:function(){var n=this.callParent();return n&&(n=(n-1)*this.pageSize+this.last.value.length),n},indexOf:function(n){return n?n.index:-1},insert:function(){Ext.Error.raise("insert operation not suppported into buffered Store")},remove:function(){Ext.Error.raise("remove operation not suppported from buffered Store")},removeAt:function(){Ext.Error.raise("removeAt operation not suppported from buffered Store")},getPage:function(n){return this.get(n)},hasRange:function(n,t){for(var i=this.getPageFromRecordIndex(n),r=this.getPageFromRecordIndex(t);i<=r;i++)if(!this.hasPage(i))return!1;return!0},hasPage:function(n){return!!this.get(n)},getAt:function(n){return this.getRange(n,n)[0]},getRange:function(n,t){this.hasRange(n,t)||Ext.Error.raise("PageMap asked for range which it does not have");for(var i=this,e=i.getPageFromRecordIndex(n),o=i.getPageFromRecordIndex(t),a=(e-1)*i.pageSize,v=o*i.pageSize-1,r=e,u=[],s,c,f,h=0,l;r<=o;r++)r==e?(s=n-a,f=!0):(s=0,f=!1),r==o&&(c=i.pageSize-(v-t),f=!0),f?Ext.Array.push(u,Ext.Array.slice(i.getPage(r),s,c)):Ext.Array.push(u,i.getPage(r));for(l=u.length;h<l;h++)u[h].index=n++;return u}})