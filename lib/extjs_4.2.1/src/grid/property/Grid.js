Ext.define("Ext.grid.property.Grid",{extend:"Ext.grid.Panel",alias:"widget.propertygrid",alternateClassName:"Ext.grid.PropertyGrid",uses:["Ext.grid.plugin.CellEditing","Ext.grid.property.Store","Ext.grid.property.HeaderContainer","Ext.XTemplate","Ext.grid.CellEditor","Ext.form.field.Date","Ext.form.field.Text","Ext.form.field.Number","Ext.form.field.ComboBox"],valueField:"value",nameField:"name",inferTypes:!0,enableColumnMove:!1,columnLines:!0,stripeRows:!1,trackMouseOver:!1,clicksToEdit:1,enableHdMenu:!1,gridCls:Ext.baseCSSPrefix+"property-grid",initComponent:function(){var n=this;n.source=n.source||{};n.addCls(n.gridCls);n.plugins=n.plugins||[];n.plugins.push(new Ext.grid.plugin.CellEditing({clicksToEdit:n.clicksToEdit,startEdit:function(t){return this.self.prototype.startEdit.call(this,t,n.headerCt.child("#"+n.valueField))}}));n.selModel={selType:"cellmodel",onCellSelect:function(n){return n.column!=1&&(n.column=1),this.self.prototype.onCellSelect.call(this,n)}};n.sourceConfig=Ext.apply({},n.sourceConfig);n.store||(n.propStore=n.store=new Ext.grid.property.Store(n,n.source));n.configure(n.sourceConfig);n.sortableColumns&&n.store.sort("name","ASC");n.columns=new Ext.grid.property.HeaderContainer(n,n.store);n.addEvents("beforepropertychange","propertychange");n.callParent();n.getView().walkCells=this.walkCells;n.editors={date:new Ext.grid.CellEditor({field:new Ext.form.field.Date({selectOnFocus:!0})}),string:new Ext.grid.CellEditor({field:new Ext.form.field.Text({selectOnFocus:!0})}),number:new Ext.grid.CellEditor({field:new Ext.form.field.Number({selectOnFocus:!0})}),boolean:new Ext.grid.CellEditor({field:new Ext.form.field.ComboBox({editable:!1,store:[[!0,n.headerCt.trueText],[!1,n.headerCt.falseText]]})})};n.store.on("update",n.onUpdate,n)},configure:function(n){var t=this,o=t.store,r=0,s=t.store.getCount(),h=t.nameField,c=t.valueField,u,i,f,e;if(t.configureLegacy(n),t.inferTypes)for(;r<s;++r)f=o.getAt(r),u=f.get(h),t.getConfig(u,"type")||(i=f.get(c),e=Ext.isDate(i)?"date":Ext.isNumber(i)?"number":Ext.isBoolean(i)?"boolean":"string",t.setConfig(u,"type",e))},getConfig:function(n,t,i){var r=this.sourceConfig[n],u;return r&&(u=r[t]),u||i},setConfig:function(n,t,i){var u=this.sourceConfig,r=u[n];return r?r.__copied||(r=Ext.apply({__copied:!0},r),u[n]=r):r=u[n]={__copied:!0},r[t]=i,i},configureLegacy:function(n){var t=this;t.copyLegacyObject(n,t.customRenderers,"renderer");t.copyLegacyObject(n,t.customEditors,"editor");t.copyLegacyObject(n,t.propertyNames,"displayName");(t.customRenderers||t.customEditors||t.propertyNames)&&Ext.global.console&&Ext.global.console.warn&&Ext.global.console.warn(this.$className,'customRenderers, customEditors & propertyNames have been consolidated into a new config, see "sourceConfig". These configurations will be deprecated.')},copyLegacyObject:function(n,t,i){var r;for(r in t)t.hasOwnProperty(r)&&(n[r]||(n[r]={}),n[r][i]=t[r])},onUpdate:function(n,t,i){var r=this,u,f;r.rendered&&i==Ext.data.Model.EDIT&&(u=t.get(r.valueField),f=t.modified.value,r.fireEvent("beforepropertychange",r.source,t.getId(),u,f)!==!1?(r.source&&(r.source[t.getId()]=u),t.commit(),r.fireEvent("propertychange",r.source,t.getId(),u,f)):t.reject())},walkCells:function(n,t,i,r,u,f){return t=="left"?t="up":t=="right"&&(t="down"),n=Ext.view.Table.prototype.walkCells.call(this,n,t,i,r,u,f),n&&!n.column&&(n.column=1),n},getCellEditor:function(n){var i=this,u=n.get(i.nameField),f=n.get(i.valueField),t=i.getConfig(u,"editor"),e=i.getConfig(u,"type"),r=i.editors;if(t)t instanceof Ext.grid.CellEditor||(t instanceof Ext.form.field.Base||(t=Ext.ComponentManager.create(t,"textfield")),t=i.setConfig(u,"editor",new Ext.grid.CellEditor({field:t})));else if(e)switch(e){case"date":t=r.date;break;case"number":t=r.number;break;case"boolean":t=i.editors.boolean;break;default:t=r.string}else t=Ext.isDate(f)?r.date:Ext.isNumber(f)?r.number:Ext.isBoolean(f)?r.boolean:r.string;return t.editorId=u,t},beforeDestroy:function(){var n=this;n.callParent();n.destroyEditors(n.editors);n.destroyEditors(n.customEditors);delete n.source},destroyEditors:function(n){for(var t in n)n.hasOwnProperty(t)&&Ext.destroy(n[t])},setSource:function(n,t){var i=this;i.source=n;t!==undefined&&(i.sourceConfig=Ext.apply({},t),i.configure(i.sourceConfig));i.propStore.setSource(n)},getSource:function(){return this.propStore.getSource()},setProperty:function(n,t,i){this.propStore.setValue(n,t,i)},removeProperty:function(n){this.propStore.remove(n)}})