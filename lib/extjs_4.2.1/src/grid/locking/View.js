Ext.define("Ext.grid.locking.View",{alternateClassName:"Ext.grid.LockingView",mixins:{observable:"Ext.util.Observable"},isLockingView:!0,eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell|refresh)/,constructor:function(n){var t=this,u=[],o=t.eventRelayRe,i=n.locked.getView(),f=n.normal.getView(),e,r;Ext.apply(t,{lockedView:i,normalView:f,lockedGrid:n.locked,normalGrid:n.normal,panel:n.panel});t.mixins.observable.constructor.call(t,n);e=i.events;for(r in e)e.hasOwnProperty(r)&&o.test(r)&&u.push(r);t.relayEvents(i,u);t.relayEvents(f,u);f.on({scope:t,itemmouseleave:t.onItemMouseLeave,itemmouseenter:t.onItemMouseEnter});i.on({scope:t,itemmouseleave:t.onItemMouseLeave,itemmouseenter:t.onItemMouseEnter});t.panel.on({render:t.onPanelRender,scope:t})},onPanelRender:function(){var n=this,t=n.loadMask,i={target:n.panel,msg:n.loadingText,msgCls:n.loadingCls,useMsg:n.loadingUseMsg,store:n.panel.store};n.el=n.panel.body;n.fireEvent("render",n);t&&(Ext.isObject(t)&&(i=Ext.apply(i,t)),n.loadMask=new Ext.LoadMask(i))},getGridColumns:function(){var n=this.lockedGrid.headerCt.getVisibleGridColumns();return n.concat(this.normalGrid.headerCt.getVisibleGridColumns())},getEl:function(n){return this.getViewForColumn(n).getEl()},getViewForColumn:function(n){var t=this.lockedView,i;return t.headerCt.cascade(function(t){if(t===n)return i=!0,!1}),i?t:this.normalView},onItemMouseEnter:function(n,t){var r=this,u=r.lockedView,i=r.normalView,f;n.trackOver&&(n!==u&&(i=u),f=i.getNode(t,!1),i.highlightItem(f))},onItemMouseLeave:function(n){var t=this,i=t.lockedView,r=t.normalView;n.trackOver&&(n!==i&&(r=i),r.clearHighlight())},relayFn:function(n,t){t=t||[];var i=this.lockedView;i[n].apply(i,t);i=this.normalView;i[n].apply(i,t)},getSelectionModel:function(){return this.panel.getSelectionModel()},getStore:function(){return this.panel.store},getNode:function(n,t){return this.normalView.getNode(n,t)},getCell:function(n,t){var i=this.getViewForColumn(t),r=i.getNode(n,!0);return Ext.fly(r).down(t.getCellSelector())},indexOf:function(n){var t=this.lockedView.indexOf(n);return t||(t=this.normalView.indexOf(n)),t},focus:function(){var n=this.getSelectionModel().getCurrentPosition(),t=n?n.view:this.normalView;t.focus()},focusRow:function(n){this.normalView.focusRow(n)},focusCell:function(n){n.view.focusCell(n)},isVisible:function(n){return this.panel.isVisible(n)},getRecord:function(n){var t=this.lockedView.getRecord(n);return t||(t=this.normalView.getRecord(n)),t},scrollBy:function(){var n=this.normalView;n.scrollBy.apply(n,arguments)},addElListener:function(){this.relayFn("addElListener",arguments)},refreshNode:function(){this.relayFn("refreshNode",arguments)},refresh:function(){this.relayFn("refresh",arguments)},bindStore:function(){this.relayFn("bindStore",arguments)},addRowCls:function(){this.relayFn("addRowCls",arguments)},removeRowCls:function(){this.relayFn("removeRowCls",arguments)},destroy:function(){var t=this,n=t.loadMask;t.clearListeners();n&&n.bindStore&&n.bindStore(null)}})