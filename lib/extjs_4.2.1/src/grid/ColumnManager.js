Ext.define("Ext.grid.ColumnManager",{alternateClassName:["Ext.grid.ColumnModel"],columns:null,constructor:function(n,t){n.isRootHeader||Ext.Error.raise("ColumnManager must be passed an instantiated HeaderContainer");this.headerCt=n;t&&(n.isRootHeader||Ext.Error.raise("ColumnManager must be passed an instantiated HeaderContainer"),this.secondHeaderCt=t)},getColumns:function(){return this.columns||this.cacheColumns(),this.columns},getHeaderIndex:function(n){return n.isGroupHeader&&(n=n.down(":not([isGroupHeader])")),Ext.Array.indexOf(this.getColumns(),n)},getHeaderAtIndex:function(n){var t=this.getColumns();return t.length?t[n]:null},getHeaderById:function(n){for(var r=this.getColumns(),u=r.length,i,t=0;t<u;++t)if(i=r[t],i.getItemId()===n)return i;return null},getVisibleHeaderClosestToIndex:function(n){var t=this.getHeaderAtIndex(n);return t&&t.hidden&&(t=t.next(":not([hidden])")||t.prev(":not([hidden])")),t},cacheColumns:function(){this.columns=this.headerCt.getVisibleGridColumns();this.secondHeaderCt&&Ext.Array.push(this.columns,this.secondHeaderCt.getVisibleGridColumns())},invalidate:function(){this.columns=null;this.rootColumns&&this.rootColumns.invalidate()}},function(){this.createAlias("indexOf","getHeaderIndex")})