Ext.define("Ext.grid.plugin.RowEditing",{extend:"Ext.grid.plugin.Editing",alias:"plugin.rowediting",requires:["Ext.grid.RowEditor"],lockableScope:"top",editStyle:"row",autoCancel:!0,errorSummary:!0,constructor:function(){var n=this;n.callParent(arguments);n.clicksToMoveEditor||(n.clicksToMoveEditor=n.clicksToEdit);n.autoCancel=!!n.autoCancel},destroy:function(){Ext.destroy(this.editor);this.callParent(arguments)},startEdit:function(){var t=this,i=t.getEditor(),n;return i.beforeEdit()!==!1&&(n=t.callParent(arguments),n)?(t.context=n,t.lockingPartner&&t.lockingPartner.cancelEdit(),i.startEdit(n.record,n.column,n),!0):!1},cancelEdit:function(){var n=this;if(n.editing){n.getEditor().cancelEdit();n.callParent(arguments);return}return!0},completeEdit:function(){var n=this;n.editing&&n.validateEdit()&&(n.editing=!1,n.fireEvent("edit",n,n.context))},validateEdit:function(){for(var n=this,s=n.editor,u=n.context,h=u.record,f={},e={},o=s.query(">[isFormField]"),c=o.length,i,r,t=0;t<c;t++)r=o[t],i=r.name,f[i]=r.getValue(),e[i]=h.get(i);return Ext.apply(u,{newValues:f,originalValues:e}),n.callParent(arguments)&&n.getEditor().completeEdit()},getEditor:function(){var n=this;return n.editor||(n.editor=n.initEditor()),n.editor},initEditor:function(){return new Ext.grid.RowEditor(this.initEditorConfig())},initEditorConfig:function(){for(var n=this,f=n.grid,e=n.view,o=f.headerCt,r=["saveBtnText","cancelBtnText","errorsText","dirtyText"],s=r.length,u={autoCancel:n.autoCancel,errorSummary:n.errorSummary,fields:o.getGridColumns(),hidden:!0,view:e,editingPlugin:n},i,t=0;t<s;t++)i=r[t],Ext.isDefined(n[i])&&(u[i]=n[i]);return u},initEditTriggers:function(){var n=this,t=n.view,i=n.clicksToMoveEditor===1?"click":"dblclick";n.callParent(arguments);n.clicksToMoveEditor!==n.clicksToEdit&&n.mon(t,"cell"+i,n.moveEditorByClick,n);t.on({render:function(){n.mon(n.grid.headerCt,{scope:n,columnresize:n.onColumnResize,columnhide:n.onColumnHide,columnshow:n.onColumnShow})},single:!0})},startEditByClick:function(){var n=this;n.editing&&n.clicksToMoveEditor!==n.clicksToEdit||n.callParent(arguments)},moveEditorByClick:function(){var n=this;n.editing&&n.superclass.onCellClick.apply(n,arguments)},onColumnAdd:function(n,t){if(t.isHeader){var r=this,i;if(r.initFieldAccessors(t),i=r.editor,i&&i.onColumnAdd)i.onColumnAdd(t)}},onColumnRemove:function(n,t){if(t.isHeader){var r=this,i=r.getEditor();if(i&&i.onColumnRemove)i.onColumnRemove(n,t);r.removeFieldAccessors(t)}},onColumnResize:function(n,t,i){if(t.isHeader){var u=this,r=u.getEditor();if(r&&r.onColumnResize)r.onColumnResize(t,i)}},onColumnHide:function(n,t){var r=this,i=r.getEditor();if(i&&i.onColumnHide)i.onColumnHide(t)},onColumnShow:function(n,t){var r=this,i=r.getEditor();if(i&&i.onColumnShow)i.onColumnShow(t)},onColumnMove:function(n,t,i,r){var f=this,u=f.getEditor();if(f.initFieldAccessors(t),u&&u.onColumnMove)u.onColumnMove(t,i,r)},setColumnField:function(n){var t=this,i=t.getEditor();i.removeField(n);t.callParent(arguments);t.getEditor().setField(n)}})