Ext.define("Ext.Editor",{extend:"Ext.container.Container",alias:"widget.editor",requires:["Ext.layout.container.Editor"],layout:"editor",allowBlur:!0,revertInvalid:!0,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:!1,swallowKeys:!0,completeOnEnter:!0,cancelOnEsc:!0,updateEl:!1,focusOnToFront:!1,hidden:!0,baseCls:Ext.baseCSSPrefix+"editor",initComponent:function(){var n=this,t=n.field=Ext.ComponentManager.create(n.field,"textfield");Ext.apply(t,{inEditor:!0,msgTarget:t.msgTarget=="title"?"title":"qtip"});n.mon(t,{scope:n,blur:n.onFieldBlur,specialkey:n.onSpecialKey});t.grow&&n.mon(t,"autosize",n.onFieldAutosize,n,{delay:1});n.floating={constrain:n.constrain};n.items=t;n.callParent(arguments);n.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onFieldAutosize:function(){this.updateLayout()},afterRender:function(){var n=this,i=n.field,t=i.inputEl;n.callParent(arguments);t&&(t.dom.name="",n.swallowKeys&&t.swallowEvent(["keypress","keydown"]))},onSpecialKey:function(n,t){var i=this,r=t.getKey(),u=i.completeOnEnter&&r==t.ENTER,f=i.cancelOnEsc&&r==t.ESC;(u||f)&&(t.stopEvent(),Ext.defer(function(){u?i.completeEdit():i.cancelEdit();n.triggerBlur&&n.triggerBlur(t)},10));i.fireEvent("specialkey",i,n,t)},startEdit:function(n,t){var i=this,r=i.field;i.completeEdit();i.boundEl=Ext.get(n);t=Ext.isDefined(t)?t:Ext.String.trim(i.boundEl.dom.innerText||i.boundEl.dom.innerHTML);i.rendered||(i.ownerCt&&(i.parentEl=i.ownerCt.el,i.parentEl.position()),i.render(i.parentEl||document.body));i.fireEvent("beforestartedit",i,i.boundEl,t)!==!1&&(i.startValue=t,i.show(),r.suspendEvents(),r.reset(),r.setValue(t),r.resumeEvents(),i.realign(!0),r.focus(),r.autoSize&&r.autoSize(),i.editing=!0)},realign:function(n){var t=this;n===!0&&t.updateLayout();t.alignTo(t.boundEl,t.alignment,t.offsets)},completeEdit:function(n){var t=this,r=t.field,i;if(t.editing){if(r.assertValue&&r.assertValue(),i=t.getValue(),!r.isValid()){t.revertInvalid!==!1&&t.cancelEdit(n);return}if(String(i)===String(t.startValue)&&t.ignoreNoChange){t.hideEdit(n);return}t.fireEvent("beforecomplete",t,i,t.startValue)!==!1&&(i=t.getValue(),t.updateEl&&t.boundEl&&t.boundEl.update(i),t.hideEdit(n),t.fireEvent("complete",t,i,t.startValue))}},onShow:function(){var n=this;n.callParent(arguments);n.hideEl!==!1&&n.boundEl.hide();n.fireEvent("startedit",n,n.boundEl,n.startValue)},cancelEdit:function(n){var t=this,i=t.startValue,r=t.field,u;t.editing&&(u=t.getValue(),r.suspendEvents(),t.setValue(i),r.resumeEvents(),t.hideEdit(n),t.fireEvent("canceledit",t,u,i))},hideEdit:function(n){n!==!0&&(this.editing=!1,this.hide())},onFieldBlur:function(){var n=this,t=Ext.Element.getActiveElement();n.allowBlur===!0&&n.editing&&n.selectSameEditor!==!0&&n.completeEdit();(Ext.fly(t).isFocusable()||t.getAttribute("tabIndex"))&&t.focus()},onHide:function(){var n=this,t=n.field;if(n.editing){n.completeEdit();return}t.hasFocus&&t.triggerBlur&&t.triggerBlur();t.collapse&&t.collapse();n.hideEl!==!1&&n.boundEl.show();n.callParent(arguments)},setValue:function(n){this.field.setValue(n)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){var n=this;Ext.destroy(n.field);delete n.field;delete n.parentEl;delete n.boundEl;n.callParent(arguments)}})