Ext.define("Ext.dd.ScrollManager",{singleton:!0,requires:["Ext.dd.DragDropManager"],constructor:function(){var n=Ext.dd.DragDropManager;n.fireEvents=Ext.Function.createSequence(n.fireEvents,this.onFire,this);n.stopDrag=Ext.Function.createSequence(n.stopDrag,this.onStop,this);this.doScroll=Ext.Function.bind(this.doScroll,this);this.ddmInstance=n;this.els={};this.dragEl=null;this.proc={}},onStop:function(){var n=Ext.dd.ScrollManager;n.dragEl=null;n.clearProc()},triggerRefresh:function(){this.ddmInstance.dragCurrent&&this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)},doScroll:function(){if(this.ddmInstance.dragCurrent){var n=this.proc,t=n.el,i=n.el.ddScrollConfig,r=i?i.increment:this.increment;this.animate?t.scroll(n.dir,r,!0,this.animDuration,this.triggerRefresh):t.scroll(n.dir,r)&&this.triggerRefresh()}},clearProc:function(){var n=this.proc;n.id&&clearInterval(n.id);n.id=0;n.el=null;n.dir=""},startProc:function(n,t){this.clearProc();this.proc.el=n;this.proc.dir=t;var i=n.ddScrollConfig?n.ddScrollConfig.ddGroup:undefined,r=n.ddScrollConfig&&n.ddScrollConfig.frequency?n.ddScrollConfig.frequency:this.frequency;(i===undefined||this.ddmInstance.dragCurrent.ddGroup==i)&&(this.proc.id=setInterval(this.doScroll,r))},onFire:function(n,t){if(!t&&this.ddmInstance.dragCurrent){this.dragEl&&this.dragEl==this.ddmInstance.dragCurrent||(this.dragEl=this.ddmInstance.dragCurrent,this.refreshCache());var h=n.getXY(),u=n.getPoint(),e=this.proc,o=this.els,s,i,r,f;for(s in o)if(i=o[s],r=i._region,f=i.ddScrollConfig?i.ddScrollConfig:this,r&&r.contains(u)&&i.isScrollable()){if(r.bottom-u.y<=f.vthresh){e.el!=i&&this.startProc(i,"down");return}if(r.right-u.x<=f.hthresh){e.el!=i&&this.startProc(i,"left");return}if(u.y-r.top<=f.vthresh){e.el!=i&&this.startProc(i,"up");return}if(u.x-r.left<=f.hthresh){e.el!=i&&this.startProc(i,"right");return}}this.clearProc()}},register:function(n){if(Ext.isArray(n))for(var t=0,i=n.length;t<i;t++)this.register(n[t]);else n=Ext.get(n),this.els[n.id]=n},unregister:function(n){if(Ext.isArray(n))for(var t=0,i=n.length;t<i;t++)this.unregister(n[t]);else n=Ext.get(n),delete this.els[n.id]},vthresh:25,hthresh:25,increment:100,frequency:500,animate:!0,animDuration:.4,ddGroup:undefined,refreshCache:function(){var n=this.els;for(var t in n)typeof n[t]=="object"&&(n[t]._region=n[t].getRegion())}})