Ext.define("Ext.view.TableLayout",{extend:"Ext.layout.component.Auto",requires:["Ext.util.CSS"],alias:["layout.tableview"],type:"tableview",beginLayout:function(n){var t=this,i=t.owner.lockingPartner,r=t.owner;t.callParent(arguments);i&&(t.lockedGrid=t.owner.up("[lockable]"),t.lockedGrid.needsRowHeightSync=!0,n.lockingPartner||(n.lockingPartner=n.context.getItem(i,i.el),n.lockingPartner&&!n.lockingPartner.lockingPartner&&(n.lockingPartner.lockingPartner=n)));n.headerContext=n.context.getCmp(t.headerCt);t.owner.body.dom&&(n.bodyContext=n.getEl(t.owner.body));Ext.isWebKit&&r.el.select(r.getBodySelector()).setStyle("table-layout","auto")},calculate:function(n){var t=this,u=t.lockingPartner,f=t.owner,i=0,r;if(n.headerContext.hasProp("columnWidthsDone")){if(!t.setColumnWidths(n)){t.done=!1;return}n.state.columnWidthsSynced=!0;n.bodyContext&&(r=t.owner.el.down("."+f.ownerCt.emptyCls,!0),r?i=r.offsetHeight:(i=n.bodyContext.el.dom.offsetHeight,n.bodyContext.setHeight(i,!1)),n.setProp("contentHeight",i));u&&!u.state.columnWidthsSynced?t.done=!1:t.callParent(arguments)}else t.done=!1},measureContentHeight:function(n){var t=n.lockingPartner;if(!n.bodyContext||n.state.columnWidthsSynced&&(!t||t.state.columnWidthsSynced))return this.callParent(arguments)},setColumnWidths:function(n){var e=this,t=e.owner,r=n.context,h=e.headerCt.getVisibleGridColumns(),u,f=0,l=h.length,c=0,o=0,s,i,a=!Ext.isBorderBox;for(r&&(r.currentLayout=e),f=0;f<l;f++){if(u=h[f],s=r.getCmp(u),i=s.props.width,isNaN(i))return s.getProp("width"),!1;c+=i;a&&t.columnLines&&(o||(o=r.getCmp(u).borderInfo.width||1),i-=o);t.body.select(t.getColumnSizerSelector(u)).setWidth(i)}return t.el.select(t.getBodySelector()).setWidth(c),!0},finishedLayout:function(){var n=this,t=n.owner;n.callParent(arguments);Ext.isWebKit&&t.el.select(t.getBodySelector()).setStyle("table-layout","");t.refreshCounter&&n.lockedGrid&&n.lockedGrid.syncRowHeight&&n.lockedGrid.needsRowHeightSync&&(n.lockedGrid.syncRowHeights(),n.lockedGrid.needsRowHeightSync=!1)}})