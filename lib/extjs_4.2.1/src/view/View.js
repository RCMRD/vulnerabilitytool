Ext.define("Ext.view.View",{extend:"Ext.view.AbstractView",alternateClassName:"Ext.DataView",alias:"widget.dataview",deferHighlight:Ext.isIE7m?100:0,mouseOverOutBuffer:20,inputTagRe:/^textarea$|^input$/i,inheritableStatics:{EventMap:{mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",focus:"Focus"}},initComponent:function(){var n=this;n.callParent();n.mouseOverOutBuffer?(n.handleMouseOverOrOut=Ext.Function.createBuffered(n.handleMouseOverOrOut,n.mouseOverOutBuffer,n),n.lastMouseOverOutEvent=new Ext.EventObjectImpl):n.deferHighlight&&(n.setHighlightedItem=Ext.Function.createBuffered(n.setHighlightedItem,n.deferHighlight,n))},addCmpEvents:function(){this.addEvents("beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","beforeitemkeydown","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","itemkeydown","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","containermouseup","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","selectionchange","beforeselect","beforedeselect","select","deselect","focuschange","highlightitem","unhighlightitem")},getFocusEl:function(){return this.getTargetEl()},afterRender:function(){var n=this,t=n.mouseOverOutBuffer?n.onMouseOverOut:n.handleMouseOverOrOut;n.callParent();n.mon(n.getTargetEl(),{scope:n,freezeEvent:!0,click:n.handleEvent,mousedown:n.handleEvent,mouseup:n.handleEvent,dblclick:n.handleEvent,contextmenu:n.handleEvent,keydown:n.handleEvent,mouseover:t,mouseout:t})},onMouseOverOut:function(n){var t=this;t.lastMouseOverOutEvent.setEvent(n.browserEvent,!0);t.handleMouseOverOrOut(t.lastMouseOverOutEvent)},handleMouseOverOrOut:function(n){var t=this,u=n.type==="mouseout",i=u?n.getRelatedTarget:n.getTarget,r=i.call(n,t.itemSelector)||i.call(n,t.dataRowSelector);t.mouseOverItem&&r===t.mouseOverItem||(t.mouseOverItem&&(n.item=t.mouseOverItem,n.newType="mouseleave",t.handleEvent(n)),t.mouseOverItem=r,t.mouseOverItem&&(n.item=t.mouseOverItem,n.newType="mouseenter",t.handleEvent(n)))},handleEvent:function(n){var t=this,i=n.type=="keydown"&&n.getKey();t.processUIEvent(n)!==!1&&t.processSpecialEvent(n);i===n.SPACE&&(t.inputTagRe.test(n.getTarget().tagName)||n.stopEvent())},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(n){if(Ext.getBody().isAncestor(n.target)){var t=this,r=n.getTarget(t.getItemSelector(),t.getTargetEl()),o=this.statics().EventMap,u,i,f=n.type,e=n.type,s;if(n.newType&&(e=n.newType,r=n.item),r||f!="keydown"||(s=t.getSelectionModel(),i=s.lastFocused||s.getLastSelected(),i&&(r=t.getNode(i,!0))),r){if((i||(i=t.getRecord(r)),u=t.indexInStore?t.indexInStore(i):t.indexOf(r),!i||t.processItemEvent(i,r,u,n)===!1)||t["onBeforeItem"+o[e]](i,r,u,n)===!1||t.fireEvent("beforeitem"+e,t,i,r,u,n)===!1||t["onItem"+o[e]](i,r,u,n)===!1)return!1;t.fireEvent("item"+e,t,i,r,u,n)}else{if(t.processContainerEvent(n)===!1||t["onBeforeContainer"+o[f]](n)===!1||t.fireEvent("beforecontainer"+f,t,n)===!1||t["onContainer"+o[f]](n)===!1)return!1;t.fireEvent("container"+f,t,n)}return!0}},onItemMouseEnter:function(n,t){this.trackOver&&this.highlightItem(t)},onItemMouseLeave:function(){this.trackOver&&this.clearHighlight()},onItemMouseDown:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,setHighlightedItem:function(n){var t=this,r=t.highlightedItem,f=t.overItemCls,u=t.beforeOverItemCls,i;r!=n&&(r&&(Ext.fly(r).removeCls(f),i=r.previousSibling,u&&i&&Ext.fly(i).removeCls(u),t.fireEvent("unhighlightitem",t,r)),t.highlightedItem=n,n&&(Ext.fly(n).addCls(t.overItemCls),i=n.previousSibling,u&&i&&Ext.fly(i).addCls(u),t.fireEvent("highlightitem",t,n)))},highlightItem:function(n){this.setHighlightedItem(n)},clearHighlight:function(){this.setHighlightedItem(undefined)},onUpdate:function(n,t){var i=this,f,r,u;i.viewReady&&(f=i.getNode(t),r=i.callParent(arguments),u=i.highlightedItem,u&&u===f&&(delete i.highlightedItem,r&&i.highlightItem(r)))},refresh:function(){this.clearHighlight();this.callParent(arguments)},focusNode:function(n){var e=this,o=e.getNode(n,!0),r=e.el,u=0,f=0,t=r.getRegion(),i;t.bottom=t.top+r.dom.clientHeight;t.right=t.left+r.dom.clientWidth;o&&(i=Ext.fly(o).getRegion(),i.top<t.top?u=i.top-t.top:i.bottom>t.bottom&&(u=i.bottom-t.bottom),i.left<t.left?f=i.left-t.left:i.right>t.right&&(f=i.right-t.right),(f||u)&&e.scrollBy(f,u,!1),r.focus())}})