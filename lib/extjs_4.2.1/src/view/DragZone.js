Ext.define("Ext.view.DragZone",{extend:"Ext.dd.DragZone",containerScroll:!1,constructor:function(n){var t=this,i,r,u;Ext.apply(t,n);t.ddGroup||(t.ddGroup="view-dd-zone-"+t.view.id);i=t.view;r=i.ownerCt;u=r?r.getTargetEl().dom:i.el.dom.parentNode;t.callParent([u]);t.ddel=Ext.get(document.createElement("div"));t.ddel.addCls(Ext.baseCSSPrefix+"grid-dd-wrap")},init:function(n,t,i){this.initTarget(n,t,i);this.view.mon(this.view,{itemmousedown:this.onItemMouseDown,scope:this})},onValidDrop:function(n){this.callParent();n.el.focus()},onItemMouseDown:function(n,t,i,r,u){this.isPreventDrag(u,t,i,r)||(n.focusRow&&n.focusRow(t),this.handleMouseDown(u))},isPreventDrag:function(){return!1},getDragData:function(n){var t=this.view,i=n.getTarget(t.getItemSelector());if(i)return{copy:t.copy||t.allowCopy&&n.ctrlKey,event:new Ext.EventObjectImpl(n),view:t,ddel:this.ddel,item:i,records:t.getSelectionModel().getSelection(),fromPosition:Ext.fly(i).getXY()}},onInitDrag:function(n,t){var i=this,r=i.dragData,f=r.view,u=f.getSelectionModel(),e=f.getRecord(r.item);u.isSelected(e)||u.select(e,!0);r.records=u.getSelection();i.ddel.update(i.getDragText());i.proxy.update(i.ddel.dom);i.onStartDrag(n,t);return!0},getDragText:function(){var n=this.dragData.records.length;return Ext.String.format(this.dragText,n,n==1?"":"s")},getRepairXY:function(n,t){return t?t.fromPosition:!1}})