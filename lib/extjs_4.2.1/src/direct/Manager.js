Ext.define("Ext.direct.Manager",{singleton:!0,requires:["Ext.util.MixedCollection","Ext.app.domain.Direct"],mixins:{observable:"Ext.util.Observable"},exceptions:{TRANSPORT:"xhr",PARSE:"parse",DATA:"data",LOGIN:"login",SERVER:"exception"},constructor:function(){var n=this;n.addEvents("event","exception");n.transactions=new Ext.util.MixedCollection;n.providers=new Ext.util.MixedCollection;n.mixins.observable.constructor.call(n)},addProvider:function(n){var t=this,r=arguments,f=t.relayers||(t.relayers={}),i,u;if(r.length>1){for(i=0,u=r.length;i<u;++i)t.addProvider(r[i]);return}n.isProvider||(n=Ext.create("direct."+n.type+"provider",n));t.providers.add(n);n.on("data",t.onProviderData,t);return n.relayedEvents&&(f[n.id]=t.relayEvents(n,n.relayedEvents)),n.isConnected()||n.connect(),n},getProvider:function(n){return n.isProvider?n:this.providers.get(n)},removeProvider:function(n){var t=this,u=t.providers,r=t.relayers,i;return(n=n.isProvider?n:u.get(n),n)?(n.un("data",t.onProviderData,t),i=n.id,r[i]&&(r[i].destroy(),delete r[i]),u.remove(n),n):null},addTransaction:function(n){return this.transactions.add(n),n},removeTransaction:function(n){var t=this;return n=t.getTransaction(n),t.transactions.remove(n),n},getTransaction:function(n){return typeof n=="object"?n:this.transactions.get(n)},onProviderData:function(n,t){var i=this,r,u;if(Ext.isArray(t)){for(r=0,u=t.length;r<u;++r)i.onProviderData(n,t[r]);return}t.name&&t.name!="event"&&t.name!="exception"?i.fireEvent(t.name,t):t.status===!1&&i.fireEvent("exception",t);i.fireEvent("event",t,n)},parseMethod:function(n){if(Ext.isString(n)){for(var r=n.split("."),i=0,u=r.length,t=Ext.global;t&&i<u;)t=t[r[i]],++i;n=Ext.isFunction(t)?t:null}return n||null}},function(){Ext.Direct=Ext.direct.Manager})