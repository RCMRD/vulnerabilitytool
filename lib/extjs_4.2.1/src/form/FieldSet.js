Ext.define("Ext.form.FieldSet",{extend:"Ext.container.Container",mixins:{fieldAncestor:"Ext.form.FieldAncestor"},alias:"widget.fieldset",uses:["Ext.form.field.Checkbox","Ext.panel.Tool","Ext.layout.container.Anchor","Ext.layout.component.FieldSet"],collapsed:!1,toggleOnTitleClick:!0,baseCls:Ext.baseCSSPrefix+"fieldset",layout:"anchor",componentLayout:"fieldset",autoEl:"fieldset",childEls:["body"],renderTpl:["{%this.renderLegend(out,values);%}",'<div id="{id}-body" class="{baseCls}-body {bodyTargetCls}"<tpl if="bodyStyle"> style="{bodyStyle}"<\/tpl>>',"{%this.renderContainer(out,values);%}","<\/div>"],stateEvents:["collapse","expand"],maskOnDisable:!1,beforeDestroy:function(){var n=this,t=n.legend;t&&(delete t.ownerCt,t.destroy(),n.legend=null);n.callParent()},initComponent:function(){var n=this,t=n.baseCls;n.initFieldAncestor();n.callParent();n.layout.managePadding=n.layout.manageOverflow=!1;n.addEvents("beforeexpand","beforecollapse","expand","collapse");n.collapsed&&(n.addCls(t+"-collapsed"),n.collapse());(n.title||n.checkboxToggle||n.collapsible)&&(n.addTitleClasses(),n.legend=Ext.widget(n.createLegendCt()));n.initMonitor()},initPadding:function(n){var i=this,u=i.getProtoBody(),t=i.padding,r;t!==undefined&&((Ext.isIEQuirks||Ext.isIE8m)&&(t=i.parseBox(t),r=Ext.Element.parseBox(0),r.top=t.top,t.top=0,u.setStyle("padding",i.unitizeBox(r))),n.setStyle("padding",i.unitizeBox(t)))},getProtoBody:function(){var t=this,n=t.protoBody;return n||(t.protoBody=n=new Ext.util.ProtoElement({styleProp:"bodyStyle",styleIsText:!0})),n},initRenderData:function(){var n=this,t=n.callParent();return t.bodyTargetCls=n.bodyTargetCls,n.protoBody.writeTo(t),delete n.protoBody,t},getState:function(){var n=this.callParent();return this.addPropertyToState(n,"collapsed")},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn,collapsedHorizontal:function(){return!0},collapsedVertical:function(){return!0},createLegendCt:function(){var n=this,t=[],i={xtype:"container",baseCls:n.baseCls+"-header",id:n.id+"-legend",autoEl:"legend",items:t,ownerCt:n,shrinkWrap:!0,ownerLayout:n.componentLayout};return n.checkboxToggle?t.push(n.createCheckboxCmp()):n.collapsible&&t.push(n.createToggleCmp()),t.push(n.createTitleCmp()),i},createTitleCmp:function(){var n=this,t={xtype:"component",html:n.title,cls:n.baseCls+"-header-text",id:n.id+"-legendTitle"};return n.collapsible&&n.toggleOnTitleClick&&(t.listeners={click:{element:"el",scope:n,fn:n.toggle}},t.cls+=" "+n.baseCls+"-header-text-collapsible"),n.titleCmp=Ext.widget(t)},createCheckboxCmp:function(){var n=this,t="-checkbox";return n.checkboxCmp=Ext.widget({xtype:"checkbox",hideEmptyLabel:!0,name:n.checkboxName||n.id+t,cls:n.baseCls+"-header"+t,id:n.id+"-legendChk",checked:!n.collapsed,listeners:{change:n.onCheckChange,scope:n}}),n.checkboxCmp},createToggleCmp:function(){var n=this;return n.toggleCmp=Ext.widget({xtype:"tool",height:15,width:15,type:"toggle",handler:n.toggle,id:n.id+"-legendToggle",scope:n}),n.toggleCmp},doRenderLegend:function(n,t){var u=t.$comp,i=u.legend,r;i&&(i.ownerLayout.configureItem(i),r=i.getRenderTree(),Ext.DomHelper.generateMarkup(r,n))},finishRender:function(){var n=this.legend;this.callParent();n&&n.finishRender()},getCollapsed:function(){return this.collapsed?"top":!1},getCollapsedDockedItems:function(){var n=this.legend;return n?[n]:[]},setTitle:function(n){var t=this,i=t.legend,r=t.baseCls;return t.title=n,t.rendered?(i||(t.legend=i=Ext.widget(t.createLegendCt()),t.addTitleClasses(),i.ownerLayout.configureItem(i),i.render(t.el,0)),t.titleCmp.update(n)):i?t.titleCmp.update(n):(t.addTitleClasses(),t.legend=Ext.widget(t.createLegendCt())),t},addTitleClasses:function(){var n=this,t=n.title,i=n.baseCls;t&&n.addCls(i+"-with-title");(t||n.checkboxToggle||n.collapsible)&&n.addCls(i+"-with-header")},applyTargetCls:function(n){this.bodyTargetCls=n},getTargetEl:function(){return this.body||this.frameBody||this.el},getDefaultContentTarget:function(){return this.body},expand:function(){return this.setExpanded(!0)},collapse:function(){return this.setExpanded(!1)},setExpanded:function(n){var t=this,i=t.checkboxCmp,r=n?"expand":"collapse";return t.rendered&&t.fireEvent("before"+r,t)===!1||(n=!!n,i&&i.setValue(n),n?t.removeCls(t.baseCls+"-collapsed"):t.addCls(t.baseCls+"-collapsed"),t.collapsed=!n,n?delete t.getHierarchyState().collapsed:t.getHierarchyState().collapsed=!0,t.rendered&&(t.updateLayout({isRoot:!1}),t.fireEvent(r,t))),t},getRefItems:function(n){var t=this.callParent(arguments),i=this.legend;return i&&(t.unshift(i),n&&t.unshift.apply(t,i.getRefItems(!0))),t},toggle:function(){this.setExpanded(!!this.collapsed)},onCheckChange:function(n,t){this.setExpanded(t)},setupRenderTpl:function(n){this.callParent(arguments);n.renderLegend=this.doRenderLegend}})