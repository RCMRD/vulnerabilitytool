Ext.define("Ext.form.field.File",{extend:"Ext.form.field.Trigger",alias:["widget.filefield","widget.fileuploadfield"],alternateClassName:["Ext.form.FileUploadField","Ext.ux.form.FileUploadField","Ext.form.File"],requires:["Ext.form.field.FileButton"],buttonText:"Browse...",buttonOnly:!1,buttonMargin:3,clearOnSubmit:!0,extraFieldBodyCls:Ext.baseCSSPrefix+"form-file-wrap",readOnly:!0,triggerNoEditCls:"",componentLayout:"triggerfield",childEls:["browseButtonWrap"],onRender:function(){var n=this,t=n.id,i;n.callParent(arguments);i=n.inputEl;i.dom.name="";n.button=new Ext.form.field.FileButton(Ext.apply({renderTo:t+"-browseButtonWrap",ownerCt:n,ownerLayout:n.componentLayout,id:t+"-button",ui:n.ui,disabled:n.disabled,text:n.buttonText,style:n.buttonOnly?"":n.getButtonMarginProp()+n.buttonMargin+"px",inputName:n.getName(),listeners:{scope:n,change:n.onFileChange}},n.buttonConfig));n.fileInputEl=n.button.fileInputEl;n.buttonOnly&&n.inputCell.setDisplayed(!1);n.browseButtonWrap.dom.style.width=n.browseButtonWrap.dom.lastChild.offsetWidth+n.button.getEl().getMargin("lr")+"px";Ext.isIE&&n.button.getEl().repaint()},getTriggerMarkup:function(){return'<td id="'+this.id+'-browseButtonWrap"><\/td>'},onFileChange:function(n,t,i){this.lastValue=null;Ext.form.field.File.superclass.setValue.call(this,i)},setValue:Ext.emptyFn,reset:function(){var n=this,t=n.clearOnSubmit;n.rendered&&(n.button.reset(t),n.fileInputEl=n.button.fileInputEl,t&&(n.inputEl.dom.value=""));n.callParent()},onShow:function(){this.callParent();this.button.updateLayout()},onDisable:function(){this.callParent();this.button.disable()},onEnable:function(){this.callParent();this.button.enable()},isFileUpload:function(){return!0},extractFileInput:function(){var n=this.button.fileInputEl.dom;return this.reset(),n},restoreInput:function(n){var t=this.button;t.restoreInput(n);this.fileInputEl=t.fileInputEl},onDestroy:function(){Ext.destroyMembers(this,"button");delete this.fileInputEl;this.callParent()},getButtonMarginProp:function(){return"margin-left:"}})