Ext.define("Ext.form.field.Number",{extend:"Ext.form.field.Spinner",alias:"widget.numberfield",alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowExponential:!0,allowDecimals:!0,decimalSeparator:".",submitLocaleSeparator:!0,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:!1,initComponent:function(){var n=this;n.callParent();n.setMinValue(n.minValue);n.setMaxValue(n.maxValue)},getErrors:function(n){var t=this,i=t.callParent(arguments),u=Ext.String.format,r;return(n=Ext.isDefined(n)?n:this.processRawValue(this.getRawValue()),n.length<1)?i:(n=String(n).replace(t.decimalSeparator,"."),isNaN(n)&&i.push(u(t.nanText,n)),r=t.parseValue(n),t.minValue===0&&r<0?i.push(this.negativeText):r<t.minValue&&i.push(u(t.minText,t.minValue)),r>t.maxValue&&i.push(u(t.maxText,t.maxValue)),i)},rawToValue:function(n){var t=this.fixPrecision(this.parseValue(n));return t===null&&(t=n||null),t},valueToRaw:function(n){var t=this,i=t.decimalSeparator;return n=t.parseValue(n),n=t.fixPrecision(n),n=Ext.isNumber(n)?n:parseFloat(String(n).replace(i,".")),isNaN(n)?"":String(n).replace(".",i)},getSubmitValue:function(){var n=this,t=n.callParent();return n.submitLocaleSeparator||(t=t.replace(n.decimalSeparator,".")),t},onChange:function(){this.toggleSpinners();this.callParent(arguments)},toggleSpinners:function(){var n=this,i=n.getValue(),r=i===null,t;(n.spinUpEnabled||n.spinUpDisabledByToggle)&&(t=r||i<n.maxValue,n.setSpinUpEnabled(t,!0));(n.spinDownEnabled||n.spinDownDisabledByToggle)&&(t=r||i>n.minValue,n.setSpinDownEnabled(t,!0))},setMinValue:function(n){var t=this,i;t.minValue=Ext.Number.from(n,Number.NEGATIVE_INFINITY);t.toggleSpinners();t.disableKeyFilter!==!0&&(i=t.baseChars+"",t.allowExponential?i+=t.decimalSeparator+"e+-":(t.allowDecimals&&(i+=t.decimalSeparator),t.minValue<0&&(i+="-")),i=Ext.String.escapeRegex(i),t.maskRe=new RegExp("["+i+"]"),t.autoStripChars&&(t.stripCharsRe=new RegExp("[^"+i+"]","gi")))},setMaxValue:function(n){this.maxValue=Ext.Number.from(n,Number.MAX_VALUE);this.toggleSpinners()},parseValue:function(n){return n=parseFloat(String(n).replace(this.decimalSeparator,".")),isNaN(n)?null:n},fixPrecision:function(n){var i=this,r=isNaN(n),t=i.decimalPrecision;return r||!n?r?"":n:((!i.allowDecimals||t<=0)&&(t=0),parseFloat(Ext.Number.toFixed(parseFloat(n),t)))},beforeBlur:function(){var n=this,t=n.parseValue(n.getRawValue());Ext.isEmpty(t)||n.setValue(t)},setSpinUpEnabled:function(n,t){this.callParent(arguments);t?this.spinUpDisabledByToggle=!n:delete this.spinUpDisabledByToggle},onSpinUp:function(){var n=this;n.readOnly||n.setSpinValue(Ext.Number.constrain(n.getValue()+n.step,n.minValue,n.maxValue))},setSpinDownEnabled:function(n,t){this.callParent(arguments);t?this.spinDownDisabledByToggle=!n:delete this.spinDownDisabledByToggle},onSpinDown:function(){var n=this;n.readOnly||n.setSpinValue(Ext.Number.constrain(n.getValue()-n.step,n.minValue,n.maxValue))},setSpinValue:function(n){var t=this;t.enforceMaxLength&&t.fixPrecision(n).toString().length>t.maxLength||t.setValue(n)}})